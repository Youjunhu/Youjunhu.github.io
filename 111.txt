online image editor: pixlr.com/editor/

linux command: paste  ----merge lines of different files
 combine lines from different FILEs, separated by TABs
This is a usefull utility for gnuplot because there is no way to plot the x coordinate from one file and the y coordinate from another natively in gnuplot.
In this case, we can use:
paste x_data.dat y_data.dat > xy_data.dat
to combine the two files so that gnuplot can easily plot the data.


change the Dos line ending  ^M to unix format:
$ dos2unix filename

linux下最简单穿墙技术, using ssh tunneling:
$ ssh -qTfnN -D8624  username@some_ssh_server_out_of_GFW (e.g. ssh -qTfnN -D8624 fastssh.com-yjyjyj@167.114.1.234)
Configure firefox:-->preference-->advanced-->connection--settings-->socks (localhost port 8264), 

yjyj@sdf.org


--pronunciation--
resistivity
discrepancy


wanluyuan:
sudo iwconfig wlan0 essid 'MERCURY_FF2A'

In addition, I notice that there is difference in the format of .tm files between the version 1.0.7 and 1.0.7.21 because the .tm created by the latter can not be correctly displayed by the former.
For a developing code like TeXmacs, it is normal to introduce bugs as new codes are added in. But the developers should be very serious about the foundamental functions of the program. I do not know the code structure of TeXmacs, but I think it is not difficult to find out why the revision reduces the perfomance so much.

I use `gphoto2` to connect linux pc to my phone

---
As a part of the A3 program (Asia 3 Foresight Program), the simulation collaboration with NIFS (National Institute for Fusion Science of Japan) focuses on the study of the nonlinear interaction of energetic particles with MHD instabilities in Tokamak plasmas. 
The goal of the collaboration is to use the MHD-PIC hybrid code MEGA to understand the energetic particles physics and predict the energetic particles loss in the EAST tokamak.
 
---

---mega code---
Get started with the MEGA code
October 30, 2013, Y. Todo
revised by Youjun Hu

1. Create an equilibrium data for MEGA 
(1) compile and run "read-geqdsk.f90"
Input files: g038300.03900, electron_number_density.dat
Output file: psi-east38300.3900

(2) compile and run “to-MEGA.f” + “eplot2.f”
Input file: psi-east38300.3900
Output files: sim-east38300.3900, sim-east38300.3900.txt, psi-east38300.3900.ps

2. Compile MEGA “east1_128.f90”
$ mpif90 -cpp -DPRM16MPI east1_128.f90 #compile, here the argument -DPRM16MPI set number of MPI processes to be 16

3. Run MEGA
Input files: east01_00?.in (input parameters) sim-east38300.3900 (equilibrium data)

$ qsub run16.pbs  # where run16.pbs is the job script

Output files: east01_00?.out (standard output), east01_00?.moments, east01_00?.harmonics, east01_00?.movie (usually commented out in the code), east01_00?.energy_phys.txt, east01_00?.energy_n.txt, and some data files needed for restart, which are written out on the working directory.

4. Diagnostics
(1) Standard output
(2) *.moments: field variables on a poloidal plane (drawn with “east_snapsh_lnf.f” + “eplot2.f”)
(3) *.harmonics: field variables Fourier decomposed on flux coordinates
(4) *phys.txt: time evolution of MHD energy components
(5) *energy_n.txt: time evolution of MHD energy for each toroidal mode number

Questions about MEGA code:

(*) Equilibrium: gfile, Is there any other way to specify equilibrium in MEGA code? Is any analytical equilibrium available in MEGA?

(*) The range of z, 0<z<2*minor_radius, may not suitable for elongated plasmas.

(*) It takes a long time for eplot.f90 to plot the .moments file

(*) bcptcl: boundary condition of energetic particles

how to treat the the particles which cross the boundary of the computational region.

(*) phimode: total toroidal angle is given by 2pi/phimode , when using this, we are limitted to the single mode, mode-coupling between differents n can not be treated in this case.

(*) deltav: width of the cutoff at valpha of the slowing-down distribution

(*) If I load the particles randomly according to thier initial distribution, do I still need to evolve the weight of particles?

(*) initial_mhd_balance: neglect numerical error in the equilibrium data, how?

(*) perturb_fluid_random: give initial random perturbation to the MHD: is the perturbation chosen to be one with  single n?


(*) density: calculate energetic-particle pressures from the PIC particles, Why do you choose to calculate the current from the pressure, instead of by Eq. () in your paper.

(*) mhd_lowpass: low-pass filter of MHD perturbations
(*) mhd_smoothing: filter of the MHD data variation of each ksmth steps

(*)  read(40,'(i10,7(1pe14.5))')kstep,wat,e_kin_total,e_mag_total&
             &,e_thr_total ,e_ep_total,e_trans_total,e_total

the meaning of these quantities

----------mega code end----


PBS script example:
#!/bin/sh
#PBS -N  yj_job  
#PBS -l nodes=4:ppn=16
#PBS -j oe
#PBS -l walltime=10:00:00
#PBS -q  parallel

cd $PBS_O_WORKDIR
echo $PBS_NODEFILE
cat $PBS_NODEFILE
NP=`cat $PBS_NODEFILE|wc -l`
echo 'number of processors, ' $NP

mpirun -machinefile $PBS_NODEFILE  -np  $NP  ./a.out

--------
PBS commands:
submit a job:
$ qsub job_script
view the status of all the job of the user 'yj'
$ qstat -u yj
view all the jobs on the cluster
$ qstat -a
cancel a job:
$ qdel Job_ID

PBS variables (which are set by the server)
Job's submission directory: PBS_O_WORKDIR 


--mpich on t420 machine---
./configure --prefix=/home/yj/installed/mpich-3-gfortran/ FC=gfortran
make 
make install

---compile mpich2 codes:
mpif90 data_passing.f90
---run the program:
mpiexec -n 10 ./a.out 

I also used the same steps, i.e., ./configure --prefix=/home/yj/installed/mpich-3-gfortran/ FC=gfortran && make  && make install,
to install mpich on shenma.ipp.ac.cn. And the installed mpich proved to work (Before this, I thought the mpich installed by a regular user (not root) could  not work correctly on a cluster. This turned out to be wrong.)

--watch - execute a program periodically, showing output fullscreen
--diff -- compare two files and generate the difference

the pronunciation of the words:
acronym
abbreviation
monotonic
circumference
parenthesis
symmetry
symmetric



Display date in mm-dd-yy format
$ date +"%m-%d-%y"
Sample output:
02-27-07
To turn on 4 digit year display:
$ date +"%m-%d-%Y"

to solve "Your PHP installation appears to be missing the MySQL extension which is required"
In centos, to set up a website:
1) #yum install -y mysql mysql-server - Ensure that MySQL and MySQL server are installed
2) #yum install -y php php-mysql - Ensure that PHP and the PHP MySQL components are installed
3) Restart Apache:
# apachectl -k restart
Remarks: "httpd -k restart" should also work (not tested)


Linux Open Port 80 (HTTP Web Server Port)
refer to http://www.cyberciti.biz/faq/linux-iptables-firewall-open-port-80/
The default configuration file for iptables based firewall on RHEL / CentOS / Fedora Linux is /etc/sysconfig/iptables for IPv4 based firewall. For IPv6 based firewall you need to edit /etc/sysconfig/ip6tablesfile.


---apache---
configure file on centos is: /etc/httpd/conf/httpd.conf
To enable every user on the system has a directory that can be visited by the url "http://example.com/~username",
edit the file httpd.conf to remove the line "UserDir disabled" and add a line "UserDir public_html" to set the default directory in the user's home directory.

Directory Listings
If no file from the DirectoryIndex directive can be located in the directory, then mod_autoindex can generate a listing of the directory contents. This is turned on and off using the Options directive. For example, to turn on directory listings for a particular directory, you can use:
<Directory /usr/local/apache2/htdocs/list_me>
  Options +Indexes
</Directory>

Restart Apache:
# apachectl -k restart


---mysql--
Ensure that your mysql service is running
# service mysqld start

--create MySQL user and database:
run "mysql" from the shell to enter the comandline mode of mysql (with the root username):
$ mysql -u root
mysql>
Then you can create a databases.
mysql> CREATE DATABASE yj_databasename;
Query OK, 1 row affected (0.00 sec)
And grant a username the full privileges of using the database, and set the password for this user:
mysql> GRANT ALL PRIVILEGES ON yj_databasename.* TO "wordpressusername"@"hostname" IDENTIFIED BY "some_password";
Query OK, 0 rows affected (0.00 sec)
mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.01 sec)
mysql> EXIT

---import a .sql file to a database in MySQL---
From the mysql console:
mysql> use DATABASE_NAME;
mysql> source path/to/file.sql;


--move wordpress to a new server---
On the old server, 
 (*) backup the database, the output is a file ended with .sql, which is a SQL database file
 (*) copy the contents in the wordpress directory of the old server to the corresponding wordpress directory on the new server.
One the new server:
 (*) create a MySQL database and database user.
 (*) import the .sql file mentioned above to the database just created.
 (*) Set the wp-config.php file in the wordpress directory to set the database name and database username to those just created.
 (*) Since my new server domain name is different from the old one, I need to substitute all the domain names appearing in the database with the new domain name. A easy and safe way to do this is to use the php script "searchreplacedb2.php" (https://interconnectit.com/products/search-and-replace-for-wordpress-databases/). Dowload this script from the URL and put it in the wordpress directory. Then visit this php script from a internet browser. Then the php script will automaticacly find the dadabas used by wordpress and we can do Search and Replace in the databases.
(*) after the above steps, the new wordpress cite can be visited by a internet browser. The new website will appear as a mirror of the old website.
Remarks: When I created the database, I used "mysql  --default-character-set=utf8" to ensure that the character-set is idential with the one set in wp-config.ph. If I did not explicitly set the encode, the chinese characters in the webpapges can not be correctly displayed.


# If we want ot use the intel C and Fortran compilers, use the following commands,
. /home/yj/installed/intel/composerxe-2011.4.191/bin/compilervars.sh  ia32
The above lines was in my .profile file. Since in most cases I do not use intel compilers, I removed the above line from .profile file.
I can manually type the above command when I need intel compilers.

Open source Scientific Compuation Library:
PETSC
SLEPc

---install petsc----
./configure --prefix=/home/yj/installed/petsc-3.4.2/ --with-blas-lapack-dir=/home/yj/installed/lapack-3.1.1-gfortran/ --with-mpi-dir=/home/yj/installed/mpich-3.0.4/ --with-scalar-type=complex
make all test
make install
----
--install slepc---
The variable PETSC_DIR is set in .profile to point to petsc liabrary
export SLEPC_DIR=/home/yj/install_source/slepc-3.4.2/
cd $SLEPC_DIR
./configure --prefix=/home/yj/installed/slepc-3.4.2/
make SLEPC_DIR=$PWD PETSC_DIR=/home/yj/installed/petsc-3.4.2/ PETSC_ARCH=arch-installed-petsc
make SLEPC_DIR=/home/yj/install_source/slepc-3.4.2 PETSC_DIR=/home/yj/installed/petsc-3.4.2/ PETSC_ARCH=arch-installed-petsc install
export SLEPC_DIR=/home/yj/installed/slepc-3.4.2/ !this is set in .profile file of bash
------------


linux tip:
emptify a file:
:>filename
where `:` is a household which does nothing, so it's output is empty, thus emptify the file.


Emacs has a "Man mode", which can be invoked by "M-x man enter" and then typing in your command.

To be happy, to make (even very small) progress every day.

Learning by doing.

DestroyFunc MyMusic
AddToFunc   MyMusic
+ I Exec exec rxvt-unicode -e music_yj.sh


--html---
Q: How to add an image on the title of an HTML page (i.e on the tab along with the title)?
A: What you need is a favicon.ico file. Just put it in the root of your site and link to it in the header of your page:

<head>
    <title>My Site</title>
    <link rel="shortcut icon" href="favicon.ico" />
</head>

some browsers look for favicon.ico even if you don't link to it on your pages.

----





Some time it is necessary to find out files and remove them on fly. 
This can be done by "find" command. For example, to remove multiple files matching the pattern *.jpg with one command find, use:
find . -name '*.jpg' -exec rm -rf {} \;
Here {} stands for the files found by 'find' command, "\;"  stands for the ending of the command.
More Examples:
(a) Find all *.bak files in current directory and removes them with confirmation from user:
$ find . -type f -name "*.bak" -exec rm -i {} \;
Output:
rm: remove regular empty file `./data0002.bak'? y
rm: remove regular empty file `./d234234234fsdf.bak'? y
rm: remove regular empty file `./backup-20-10-2005.bak'? n

Document everything that I do.

---
Note that "sudo echo mem > /sys/power/state" does not work.
The reason is that the redirection is being done on the output of 'sudo echo mem', at which point it only has user privileges (redirection is a shell function, not a function of the echo). The correct way  is to start a shell under sudo:
$ sudo bash -c 'echo mem >/sys/power/state'
--------



--suspend --hibernate---
To view the modes the system support:
# cat /sys/power/state
mem disk

You can make the system suspend (待机) by using the following command:
# echo "mem" > /sys/power/state 

Press the power button on the computer to wake up the machine.

You can make the system hibernate (休眠) by using the following command:
# echo "disk" > /sys/power/state

I had used the suspend commands in my Linux+fvwm operating system. It works. Great!

/sys/power/state is a text file, when a message "mem" is sent to this file, the operating system will suspend.
--------------


To play in random sequency all the music files in a directory:
cd ~/music/ && mplayer `ls |sort --random-sort`


Nowdays every one usually has more than one computer. It would be nice to have a easy way to make the content in all the computers kept in sync

Using the traditional copy/delete method to  make the content in sync is usually not convenient.

This situation makes the sync between computers important

--module--
module load script/python/ActivePython , to use eastview
module load compiler/intel/2013
module load mpi/impi/4.1.0.024


---latest version of the codes I currently use---
cql3d is on shenma ~/cql3d
nova is located at yj@dt:~/project_borrowed/nova_yjhu
nova-k is located at yj@dt:~/project_borrowed/novak_yjhu
Toray1.6 is located at dt:/home/yj/project_borrowed/toray1.6
Toray1.9 is located at dt:/home/yj/project_borrowed/toray1.9
2D Fokker-Planck code (with Fish's quasilinear term) for uniform magnetic field: yj@dt:/home/yj/project/2d_rel_fp
-----------------


-tar--gzip-- usage
First 
tar -cf abc.tar some_existing_dirctory_name
Then
gzip abc.tar
this will generate abc.tar.gz file


--float--
One byte contains 8 bits

The work in theory division is devoted to providing physical understanding of the process invloved in tokamak plasmas.

virtualbox shared fold setting:
(1) create a fold named 'haha' in linux
(2) using device manual in a running virtualbox to set the fold as a shared fold
(3) In the guset winxp system, using cmd to enter the following command:
net use e: \\vboxsvr\haha
Here e: is a driver name specified by you, and 'haha' is the name of the shared fold.
The step 3 is only needed when you setting the shared folder for the first time.


How to globally disable comments in wordpress:
I did as follows: 
(1) install the "disable comments" plugin using wordpress admin page
(2) active the plugin and configure it to disable comments
(3) I must select the permanent mode to make this plugin take effect (refer to the faq for the reason)
(4) After this, the comment function is disabled, but there is a message saying "sorry but you can not leave comments" appears in the origin commetns region. To disable this message, I manually edit the "comments.php" by using the admin page to delete the message.
Ref: http://wordpress.org/extend/plugins/disable-comments/faq/

hostname -fqdn did not return a fully qualified name, dc_minimaldns will not work. please fix you /etc/hosts setup
This message appears because the hostname defined in /etc/hostname is not identical with the names appearing in /etc/hosts

pair linux pc with other device through bluetooth
# bluetooth-agent 4888
Then in mobile phone, scanning nearby device will find the linux bluethooth.

--in order to receive file from mobile phone, do the following:
1. aptitude install obexftp obexpushd
2. Turn the bluetooth device "hci0" into discoverable mode:
yj@hny:~$ sudo hciconfig hci0 piscan

3. Run obexpushd tool and listen to the incoming bluetooth connection:
yj@hny:~$ obexpushd -B

4. Then, you should be able to receive file sent from your mobile device. The files will be stored in your home directory.


--set up wireless network of my laptop:
ifconfig wlan0 up !this is to turn on the wlan0 net interface (the wireless light will turn on)
use the following command to find the essid of available wireless acess points.
sudo iwlist wlan0 scan
use the following command to tell wlan0 that we want to connnect to the acess point with essid being Network_ID and the key being my_key:
iwconfig wlan0 essid NETWORK_ID key my_KEY

To get a ip adress from the acess point:
sudo dhclient wlan0
After this your computer is connected to the acess point.

On 2013-8-1, I attmpted to use the above procedures to connect to the wireless acess point in WanLvYuan house, but failed. I did not know the reason.
Later,in the evening of 2013-8-4, I tried the above commands again and still failed. This time, I used the command "sudo iwconfig wlan0" to check the status of wlan0.
Surprsizingly, I found that "ESSID:off" was shown in the output. This indicates that the command "iwconfig wlan0 essid YJHu_network" invoked previous did not sucess.
So I invoked "iwconfig wlan0 essid YJHu_network" again. I found even after this, the essid associated with wlan0 someitmes is off( somtiems essid is correctly acociated but after I invoked "sudo dhclient wlan0", it becomes again off). This indicates the status of wlan0 is unstable and there are bugs with the programs dealling with the wlan0 network interface.  Where is the bugs? I remembered that severall days ago I got to know that network-manager-gnome and wcid are two network mangers, they should not be installed at the the same time. But in my system, the two mangagers are both installed. This reminded me: Are the bugs related to this?
To test this idea, I uninstalled network-manager-gnome with "aptitude". After this, I invoked the above commands again, i.e.,
sudo iwconfig wlan0 essid YJHu_network
sudo dhclient wlan0
After this, the wireless netwrok works! Great!

*) when use pppoe, the commnad "sudo dhclient wlan0" is not needed (if used, the connection may be disconnected)



Changing Linux to use local time is easier and more reliable than changing Windows to use UTC, 
so dual-boot Linux/Windows systems tend to use local time.
Nowadays in Linux system, UTC=yes is default. 
To make Linux use 'Local' time, i.e., to tell your linux system that the "hardware clock" is set to 'local' time:
    edit /etc/default/rcS
    add or change the following section
#Set UTC=yes if your hardware clock is set to UTC (GMT)
UTC=no

sudo mount -o uid=yj /dev/mmcblk0p1 /mnt/usb/



[shenma:~]$ ssh yj@210.73.19.168 -Y
hostname -fqdn did not return a fully qualified name, dc_minimaldns will not work. please fix you /etc/hosts setup
Howto fix long boot delay with "Starting MTA:" (Common Issue) :
This turns out that I have set the hostname as 'hny' at one file and set it as 't420' at another file. This inconsistency leads to the long delay during the system startup.

--alsa---
It is better to use alsamixergui instead of alsamixer to configure sound because the gui version usually provide more optins to adjust the sound system. For example when I use skype on my t40 laptop I found that the internal microphone does not work, and I can not get it work by using alsamixer, however, by using the gui version, I get it work becaus the gui version provide a option to adjust the volume of the internal microphone.

*)Problem: the microphone does not work on my lenovo computer. 
Solution: In alsamixer, press F4 to enter the capture device setting, and set the input soure to rear and front mic.


--skype
./skype: error while loading shared libraries: libXss.so.1: cannot open shared object file: No such file or directory
aptitude installing libxss1 solves the problem.
In addition I also install libqt4-core.

--inkscape---

--virtual box--

root@t420:/home/yj# dpkg -i Downloads/virtualbox-4.1_4.1.14-77440~Debian~squeeze_i386.deb
give the following information:
virtualbox-4.1 depends on libqt4-opengl (>= 4:4.5.3); however:
  Package libqt4-opengl is not installed.

So I aptitude install libqt4-opengl
then 
root@t420:/home/yj# dpkg -i Downloads/virtualbox-4.1_4.1.14-77440~Debian~squeeze_i386.deb

and successed!
some output message:
Unpacking virtualbox-4.1 (from .../virtualbox-4.1_4.1.14-77440~Debian~squeeze_i386.deb) ...
Setting up virtualbox-4.1 (4.1.14-77440~Debian~squeeze) ...
Adding group `vboxusers' (GID 114) ...
Done.
Stopping VirtualBox kernel modules:.
Uninstalling old VirtualBox DKMS kernel modules:.
Trying to register the VirtualBox kernel modules using DKMS:
Failed, trying without DKMS ... failed!
Recompiling VirtualBox kernel modules:
.
Starting VirtualBox kernel modules:.
Processing triggers for shared-mime-info ...
Processing triggers for hicolor-icon-theme ...
Processing triggers for python-central ...

---------------------------------------------------
--istall winxp on virtual machine---
series number:
cat Winxpsp3.txt 
MRX3F-47B9T-2487J-KWKMF-RPWBY


Notes on installing linux on my t420 laptop:
1) enter bios mode and adjust the graphic to discrete graphic card and disable Nvida optimism.
2) use usb as startup device to start the net-install process
3) install linux and tools for building new kernel
4)  building new kernel and restart to use the new kernel


If I can use handrads of compute cores to excute a program written by me, I will have the good feeling of success. This feeling should be caused by the feeling of prosessing/ocupying.

chinese input: aptitude install scim scim-pinyin
After installing these, I need to quit fvwm to make the scim work.
To make emacs be able to use scim, export LC_CTYPE=zh_CN.UTF-8
--kernel--
---remove kernel and update grub2 menu
first manually remove the kernel (in /boot directory) you do not need, using, for example,  `sudo rm /boot/*2.6.32*`  `sudo rm -r /lib/modules/2.6.32-5-*`

then run `sudo update-grub` will update the grub2 menu, i.e., remove the menu entry for the removed kernel

---change the default item in the grup menu:
(1) edit /etc/default/grub to change the value of Grub_default to the desired number (in my case the number seems to be starting from zero, i.e., zero for the first entry in the menu)
(2) then run 'update-grub' to update /boot/grub/grub.cfg file.

---build linux kernel----

(1)In Debian there are some useful utilities which can make life easy when build a new  kernel.
Fisrt make sure these useful utils have been installed. If not, install them.
#apt-get install kernel-package fakeroot module-init-tools libncurses5-dev 

(2) Download the newest kernel from http://www.kernel.org 
$ wget http://www.kernel.org/pub/linux/kernel/v3.0/linux-3.5.3.tar.bz2
$ tar -jxf linux-3.4.4.tar.bz2 
$ sudo mv linux-3.4.4 /usr/src/
$ cd /usr/src/linux-3.4.4/

(3) You can use a provious working config files as a  starting point for your customization:
$ cp /boot/config-2.6.32-5-686 .config

(4) configure kernel:
# make menuconfig
This will look the current directory for a .config file and load them as a basis configuration.
On this basis, you can adjust the option. 
Then save and exit. The original .config will be renamed as .config.old. and the new configuration is writen into .config file.
Remarks: Issues about lguest is given in the last of this notes.

(5) complie and pack the resulting binary files.

# fakeroot make-kpkg --revision=mykernel1.0 kernel_image --initrd
After the above command is finished, a package named linux-image-3.4.4_mykernel.1.0_i386.deb will be generated in the /usr/src directory

(6) Now install the package:
#  dpkg -i /usr/src/linux-image-3.4.4_mykernel1.0_i386.deb 

Done!

root@hny:/usr/src# dpkg -i linux-image-3.3.6_mykernel.1.0_i386.deb 
Selecting previously deselected package linux-image-3.3.6.
(Reading database ... 47044 files and directories currently installed.)
Unpacking linux-image-3.3.6 (from linux-image-3.3.6_mykernel.1.0_i386.deb) ...
Done.
Setting up linux-image-3.3.6 (mykernel.1.0) ...
Running depmod.
Examining /etc/kernel/postinst.d.
run-parts: executing /etc/kernel/postinst.d/initramfs-tools 3.3.6 /boot/vmlinuz-3.3.6
update-initramfs: Generating /boot/initrd.img-3.3.6
run-parts: executing /etc/kernel/postinst.d/pm-utils 3.3.6 /boot/vmlinuz-3.3.6
run-parts: executing /etc/kernel/postinst.d/zz-update-grub 3.3.6 /boot/vmlinuz-3.3.6
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.3.6
Found initrd image: /boot/initrd.img-3.3.6
Found linux image: /boot/vmlinuz-2.6.32-5-686
Found initrd image: /boot/initrd.img-2.6.32-5-686
Found Windows 7 (loader) on /dev/sda1
Found Windows 7 (loader) on /dev/sda2
done

troubleshotting:
While I’m trying to compile the Kernel Linux 3.4.4 gave me an error:
[...]
Documentation/lguest not found
[...]

This because lguest is not anymore located at ./Documentation, now is in ./Documentation/virtual
I solved this issue by simply disabling lguest, (I don’t think I need it):
edit your .config and comments the following lines (don’t appears ordered):

CONFIG_LGUEST_GUEST=y
CONFIG_PARAVIRT_SPINLOCKS=y
CONFIG_LGUEST=y


--Q: When I exit an ssh session on some hosts, my terminal will clear. I would like it if this would never happen, is there an easy way to do this? 
A: Normally it shouldn't. If it does for you, then perhaps you have something in the .bash_logout or similar, on the box you have shelled into, that causes the shell on the server to clear the terminal when you log out.
In my case, the solution is: rm .bash_logout did the trick (it had only the line /usr/bin/clear). 

#controls how many history commands to keep in HISTFILE, 
export HISTFILESIZE=10000
#controls how many history commands to keep in the history list of current session: 
export HISTSIZE=10000
you can check the number of history command by typing `history`
Q: Waht is the difference between HISTFILESIZE and HISTSIZE?
A: The history "file" is not updated as you type the commands. The commands get stored in a "list" separately (accessed by the history command). The number of these stored commands is controlled by HISTSIZE value. When the shell (interactive) exits, the last $HISTSIZE lines are copied/appended to $HISTFILE from that "list". If HISTFILESIZE is set, then after this operation, it is ensured that only $HISTFILESIZE lines (latest) exist in $HISTFILE . And when the shell starts, the "list" is initialized from $HISTFILE upto a maximum of $HISTSIZE commands.

So when you open several terminals and want to find out the commands input in one terminal from another, the only possible way is to (1) first terminate the first terminal so that the command input in this terminal is written to history_file, (2) then open another new termial to find the commands.


desktop ip: yj@210.73.19.147
---stardict start---
---Create a stardict dictionary file--
(1) Create the dictionary tabfile, which is a plain text file containing definition of words.
The format of tabfile is simple: Every word entry starts with a word name then a tab and followed by the definition of the word. Different word entries are saperated by enter.

(2) aptitude install stardict-tools, which contains a convertor (converting tabfile to a stardict dictionary format),
After install stardict-tools, you will have the util stardict-editor, then run this util to convert tabfile to stardict dictionary format.
Three files will be generated from the tabfile: *.dict.dz, *.ifo, and *.idx

(3) stardict-editor can also be used to decompile a stardict dictionary to tabfile.

Ref: http://jalasthana.de/?p=828#toc-installing-the-converter

让 stardict 发音：

1. 下载真人语音文件：WyabdcRealPeopleTTS.tar.bz2
http://cdnetworks-kr-2.dl.sourceforge.net/project/stardict/WyabdcRealPeopleTTS/2.1.0/WyabdcRealPeopleTTS.tar.bz2
2. untar the file，then mv the directory obtained "WyabdcRealPeopleTTS/" to /usr/share/
3、configurate stardict

首选项--》词典--》音效
修改 "Command for playing wav files 由[play] 改成 [aplay], This step is necessary, otherwise stardict can not read the .wav file for the words.

There is a small bug for this setting designed in stardict: If the "Enable sound event" is not checked, you may be unable to change the command for playing wav files. Actually one may want stardict to play wav file for words inputed in while disable the sound event. So this is a bug. However, you can check the "Enable sound event" box then modify "command for playing wav file" to your disired command, then uncheck the "Enable sound event" if you do not want to hear the sound for stardict event (such as a sound for a button being pressed).

Use TTS program, check this box
Command line：espeak %s &（即选用菜单中的第二个命令）

4 测试：启动 stardict,输入单词，回车后，stardict朗读单词。

2010/12/8:我现在要使用OtdRealPeopleTTS真人语音库， 而其文件为mp3格式， 现在要使stardict能播mp3语音:
The Command line is modified to: mplayer /usr/share/my_words_youjunhu/%s.mp3 &
Here I use mplayer as the audio player. Note that "%s" in the command line refer to the word input to stardict. The last "&" means the same as that in bash shell, i.e., run in the background.
I made a dirctory /usr/share/my_words_youjunhu to store my personal audio file of some uncommon words (these audio file  is downloaded from http://www.forvo.com)

Later, I replace "espeak %s &" by "/home/yj/bin/myespeak.sh %s &", where "myespeak.sh" is a script written by me.

Update: I find a OtdRealPeopleTTS in the wav format (coverted from mp3 by me or by others? I do not remmember.). So I now use aplay to play wav files.
I find that an advantage of OtdRealPeopleTTS is that its pronounciantion is slow, so it is easy to learn the pronunciation.

Update: aptitude install mpg321, and use: 
mpg321 -w apple.wav apple.mp3
to converter the mp3 format to wav format,
I do this because the pronunciation for the word "apple" is deleted by me by mistakes, so I downlaoded a new one, but it is in mp3 format. Thus, I need to convert it to wav format.

---stardict_end----------------------

change wallpaper using
xloadimage -onroot -fullscreen IMG_1794.jpg

remove beep:
modules pcspkr and snd_pcsp both can enable beep, thus you need remove both modules to disable beep 
# modprobe -r pcspkr snd_pcsp

To prevent the "pcspkr" and "snd_pcsp" modules from loading at startup, add them to modprobe's blacklist in /etc/modprobe.d/blacklist (in my case the files is /etc/modprobe.d/alsa-base-blacklist.conf). You can do this with the following two lines:

blacklist pcspkr
blacklist snd_pcsp

fortran, C/C++ python

--rename--
rename all .JPG files to .jpg files:
$ rename 's/\.JPG$/.jpg/' *.JPG
replace  blank space with under line:
$ rename 's/\ /_/' *.pdf
However, for a filename with more than one blank space, this command replace only the first blanck. To replace all, we need to invoke this command for several times.

mount windows partion:
sudo mount -t ntfs -o iocharset=utf8 /dev/sda5 /mnt/d


--install acroread---
1) download file AdbeRdr9.5.1-1_i486linux_enu.bin  
2) $ chmod u+x AdbeRdr9.5.1-1_i486linux_enu.bin 
3) $ ./AdbeRdr9.5.1-1_i486linux_enu.bin 
Extracting files, please wait. (This may take a while depending on the configuration of your machine)
This installation requires 136 MB of free disk space.
Enter installation directory for Adobe Reader 9.5.1 [/opt]  /home/yj/installed/adobe_reader
/home/yj/installed/adobe_reader
--------
--make a ps figure using the ncarg metafile
$ ctrans    -d $NCARG_ROOT/lib/ncarg/graphcaps/ps.land.mono  plotmap >t.ps
or
$ctrans -d ps.land.mono  plotmap >t.ps
or
$ctrans -d ps.mono  plotmap >t.ps !this is a rotation of the above result

then convert .ps to .pdf:
ps2pdf t.ps 

ps--transform to pdf using ps2pdf--remove pages using pdftk---transform back to ps using pdf2ps

---pdftk---
merge pdf files:
$ pdftk 1.pdf 2.pdf 3.pdf output out.pdf

A usefull ability of pdftk is to remove specific pages from a PDF file.
For example, to remove pages 10 to 25 from a PDF file, I use the following command:

$ pdftk myDocument.pdf cat 1-9 26-end output removedPages.pdf 

---------

logical hinput_exist
!    inquire (DIRECTORY='hinput', EXIST=hinput_exist)
    inquire (file='hinput', EXIST=hinput_exist)
write(*,*) hinput_exist
   if(.not.hinput_exist) then
call system('mkdir hinput')
else
write(*,*) 'haha I do not need to create hinput'
endif
end

For gfortran: use "file" for either directory and regular file
However, for ifort, we need to tell between directory and regular file, and use "directory" keyword for directory and "file" keyword for regular file
Which compiler is better in priceple in dealing with this issue?




To change x window manager, change the symbollink /etc/alternatives/x-window-manager to your disired window manage, such as,
$ sudo ln -sf /home/yj/installed/fvwm-2.6.5/bin/fvwm /etc/alternatives/x-window-manager

-----hwclock------------
system clock and hardware clock:
the following commands will set  the date and time. (June 28 13:31)
#date 06281331
The following  command set the hardware clock to the system clock(just the time set above)
# hwclock --utc --systohc

Debian系统启动脚本 （init.d目录中） 是按--utc的格式去读硬件时间，并把它拷贝为系统时间。
所以我在设硬件时间时一定要用--utc选项去设（否则不带这个参数默认设的是local时间）
例如：
$ sudo hwclock --utc --set --date="3/16/2010 10:13:05"
而不能这样设：
$ sudo hwclock --set --date="3/16/2010 10:13:05" 
或
$ sudo hwclock --local --set --date="3/16/2010 10:13:05"

I can also edit /etc/default/rcS to set wheter the operating system intepret the hardware time as utc time or local time:
UTC=yes means the operating system will interpret the hardware time as utc time, and use it to set system time
UTC=no means the operating system will interpret the hardware time as local time, and use it to set system time

[~]$ ls -l /etc/localtime 
lrwxrwxrwx 1 root root 36 2009-11-08 15:46 /etc/localtime -> /usr/share/zoneinfo/America/New_York
Symlink /etc/localtime to /usr/share/zoneinfo/... to set your timezone.
set time zone to Shanghai time:
sudo ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

Set clock:
First set hardware clock:
$ sudo hwclock --utc --set --date="5/8/2012 21:26:45"
then set hardware clock to system clock:
$ sudo hwclock --hctosys


--------------------


--Linux comes with a handy utility called rename, which can be used to rename multiple files.

For example, to rename all .JPG files to .jpg files, use the following command line:
$  rename 's/\.JPG$/.jpg/'   *.JPG

---import--

"Import" program can save any visible window on an X server and outputs it as an image file. It can capture a single window, the entire screen, or any rectangular portion of the screen. I bind the "import" command to the Alt-PrtSc key to take screenshot and save the picture as screenshot.jpg in my home directory: "PointerKey Print A M Exec exec import $HOME/screenshot.jpg &"

我 副研究员各级岗位聘用起始时间自2012年3月1日起

To use network printer, aptitude install cups package. 
In my case, after installing cups, firefox and evince can find the internet printer in room 505.
Ref: http://www.ehow.com/how_5107960_add-network-printer-linux.html


Based on the Experimental Advanced Superconducting Tokamak (EAST), Theory and Simulation Division was established in 199? Which devotes to experimental prediction and explanation. 

The main area of research covers *****************************************

Developed for more than 10 years, TD has established a good working relationship with some world-renowned fusion energy research institutions of America, Japan, Europe, and also some domestic Institutions and universities. 
Every year we have some aboard visitors work here and send some young scientists to MIT,  pppl ,NIFS.

TD is also a main part of Center for Magnetic Fusion Theory (CMFT).


The mission of the plasma theory division is to help provide theoretic explanation for the experiments on the EAST tokamak.

The research field includes (1) rf wave heating and current drive, (2) MHD waves and instabilities, (3) transport theory, and (4) edge plasma theory.

The research staff consists of 2 investigators with rank of professor and 13 reseach scientists. 


The head of the division is Dr. N. Xiang, 

userfn.o: $(SRC)userfn.f
	 $(COMPILE.F) -save $<	
to make sure save property of local variables in subroutine/function.

---computed go to statement---

To invoke the preprocessor of fortran compiler, use -fpp option, for example, ifort -fpp t.f

cat t.f
      PROGRAM MAIN
      IMPLICIT NONE
#IFDEF MULTI
      PRINT *,'Multi'
#ELSE
      PRINT *,'NOT MULTI'
#ENDIF
      END

You can include (or not include) " #define MULTI " at the begining of "t.f" to achieve "conditional compiling".

--Django--
install Django:
tar xzvf Django-1.3.1.tar.gz
cd Django-1.3.1
sudo python setup.py install

To verify that Django can be seen by Python, type python from your shell. Then at the Python prompt, try to import Django:

>>> import django
>>> print django.get_version()
1.3

to run a develop server at port 8080:
(1) cd the website directory which contains the manage.py script.
(2) run the following command:
$ python manage.py runserver 8080
(3) Then we can visit the website at the local ip: http://127.0.0.1:8080
I test this on ipp cluster.


(*) when modify .py file of django, we usually need to restart the web server (apach for the case of ipp cluster).
another thing to note that: I use "django-admin.py compilemessages" to compile the translation file .po to .mo. To make the new translation take effect, I  also need to ask yuzhi to restart the appach server. (I spent much time in finally finding out this issue)
--------------------------

Q: How do I allow input methods such as SCIM to override Emacs default input method?
A: Set LC_CTYPE=zh_CN.UTF-8  before launching Emacs, and Emacs will recognize your SCIM keys, such as C-SPC to change input method. 
Ref.: http://www.emacswiki.org/emacs/InputMethods


------nova----pppl---2011-12-01---2012-01-30-------this section has been revised and expanded after the visit---
---yj's short description for running nova------------------------------
(1) prepare inequ file: modify inequ for the first run of goeq_tr (make sure all lines have 8 entries, otherwise the code may complain when running, depending on the read statement in eq_transp.F file, refer to the modification I made in the code. refer to inequ_first and inequ_second for working inequ examples.)

$ ./goeq_tr
$ mv eqb1 eqxz  
and modify inequ file for the second run
$ ./goeq_tr
Then
$ mv eqb1 eqxz  
modify the value of p0 in inequ
$ ./goeq_tr
-------the above steps are now acomplished by running a script: ../scripts/yj_runeq

(*) ./gomap
      &dfun /
         q
      &wdat /

(*) ./gocont_tr
&inp ntor=3/
3 for quit

(*) cp ~/nova/Equil/modinv .
./goin
&inp ntor=3 gamma=1.66667, iden=1, alphar=0. ksound=1 /

(*) ./gost
0 (0 means searching for fixed boundary mode, i.e., there is a wall on the boundary and thus the mode is zero there; 1 for free boundary mode)
zero
1.43,0.01,25,1.e-7,1,1
(here the first is a guess of the root, the second is the length of side of a square box enclosing the guess root outside which the iteration will not proceed, the third is the maximum number of iteration, the fourth is the accuracy (the maximum residual permitted for the function))
1,1
fin
end

where we can also use the "ranges" option: 1.4,1.6,20,1.e-6,25
------------------------------------------------------

--yj's short description of running GA version of nova--
cp ../TEST_ligq/nvk.119369.inp .  
../scripts/runinp nvk.119369.inp 
../scripts/runequ nvk.119369.equ 



!! replace the "go to" statement by basic structure for the ease of long term maintentence of NOVA-K code.
-------------------nova--readme------------------------
(1) modification made in nova source code: In eq_transp.F, change read(15,*)---> read(15,1000)
Remarks: Forget this because the copy of NOVA I got from Nikolai is already in the revised version.
(2) A minor revision is needed in 'contx.f' file to make the dumy and actual parameter's type match. The revision is as follows: 
In contx.f, change 'j2=min(ntor*q_srf(iqsrch)+1-lmin+jd,jmax)' to 'j2=min(ntor*q_srf(iqsrch)+1-lmin+jd,jmax*1.0d0)'; change 'msrch=int(ntor*q_srf(iqsrch)+sign(0.02+1,ntor))' to 'msrch=int(ntor*q_srf(iqsrch)+sign(0.02+1,ntor*1.0d0))'

(3)  add "save iex0, aman0" in userfn subroutine to garentee that the value of iex0 and aman0 are not lost across invocation of the subroutine.
This is important, because I found that the ifort_version_12 does not save the value of these two variables, resulting that the normalized value of the determination is calculated to be Infinity.

(4) comment out  the hardcoding of the precision  facimp=1.e-11, Now the facimp gets its value from 03x02 entry of inequ file.

(5) fix the bug of  the "range" option: add one line " z=z+dz !yjhu added" to increase the frequency so that we can san over frequency range.
   Remarks: this bug is introduced by myself when I edited the code at PPPL. The orginal source has this line.

If the goeq_tr gives the following errors:
MAPS    : Bad mapping. bottom .gt. top
 error 3: cdf .le. 0
forrtl: severe (174): SIGSEGV, segmentation fault occurred
then, this is because you miss the compiler option, -i8 -r8. This option means using 8 byte to store both real and integer variables.

If you get the following errors when run `./goeq_tr`
 GKS ERROR NUMBER    8 ISSUED FROM SUBROUTINE GESC  :
 --GKS NOT IN PROPER STATE: GKS SHALL BE IN ONEOF THE STATES  GKOP, WSOP, WSAC, OR SGOP
 GKS ERROR NUMBER    8 ISSUED FROM SUBROUTINE GOPWK :

then, this is because you use 'ifort -i8 -r8 -c tv80lib.f && ar cr libtv80.a tv80lib.o', instead of
'ifort  -c tv80lib.f && ar cr libtv80.a tv80lib.o' to create tv80 library. Why the former does not work is currently unknown to me. The same situation happens when using gfortran.


(* )I commented out two lines about the "high-f GAM and delta for BAAE frequencies" because I do not need these two branches presntly. And I do not know eactly what are the "high-f GAM and delta for BAAE frequencies". And the output continua produced by this two lines confused me for at leat two hours when I examined the continua of the Solovev equilibrium. After I commented out these two lines, the additional continua (which are strange to me) on the continua graphic disppear.

tv80 library needed NOVA:
(1) download tv80_wrappers.f from http://w3.pppl.gov/~ethier/tv80/tv80wrappers.f
This file contains subroutines such as ncarcgm(), gtext() .etc.
(2) remove cdraw() routine from eq_transp.f, becuase this routine invoke some routines unavailable to me.(TV80GKS routines)
(3) remove `setpch` from `init` routine in eq_transp.f file, since `setpch` is unavailable to me.
(*revision*) Later, ZhuJia sent the source of the tv80 library to me, now I can compile the code without the above modification.


Steps to run the equilibrium part of NOVA:
(1) set the input file 'inequ' as specified later in this notes.
(2) Optional: then check the number of TRANSP grid dimension points, ndat, in file gridparam;
(2) or (the better way to reproduce the default equilibrium is to) run the script for analytical plasma profiles: 'runeq_4anl.scr'. Read it to undestand what it is doing. (This script is not availalbe in the tarball of nova I got, so skip this step.)

(3) To compile the equilibrium part of the nova code:
Use the makefile 'mkeq'
$ make -f mkeq
which will produce the executable file 'goeq'.

(4)  to run the code: ./goeq
The equilibrium information drawn from 'inequ' will be arranged and written to 'outequ' file. You can read this file to know the detailed information of the equilibrium.

(5) You can examine the output figures in the file "ploteq" by using `ctrans` command provided by ncarg, e.g. `ctrans -d X11 ploteq`, or `ictrans -d X11 ploteq` for interactive mode. You can also examine the results by using the netcdf output file, 'eqb1.cdf', (I use 'ncview' to view the netcdf file.)
(You will get other ncar graphic files, such as, plotmap, plotidin, plotcont, plotidst, when running other parts of NOVA.)

---set the input file 'inequ'---
The only input file for the equilibrium solver is 'inequ', which is a file formatted as a table, where we can set various parameters. An example of inequ is as follows:

0   tok q solver
00        0.0       1.0       0.0       1.0       1.0       0.0       0.0
01        0.0       1.0       1.0       0.0       8.0       +0.0      0.0
02        101.      111.      1.0       -2.0      1.0       0.0       -2.1
03        0.70      .00000001 300.0     901.      0.0       0.0       .200
04        +0.25     0.780000  +0.001     .00000001 2.0       01.60     .400
05        2.6228    +2.670    .94939    1.0       1.0       1.0       0.00
06        2.0       .01       4.0       0.0       1.0       1.0       0.0
07        0.0       0.0        0.0       0.0       1.0      0.0       0.0
08        0.0       0.0        0.0       128.      97.      37.0       +0.0
12        0.60      2.5       0.7800    05.0000    2.0      +1.         1.0
13        0.0       +0.000    0.0       +11.00      05.0      01.0       3.0
99

Note that, due to eq_transp.f assume a fixed format (the edit descriptor is "i2,8x,7f10.0") for 'inequ', when you change parameters in inequ, you must be careful to keep the format of the file unchanged, for example when you change value 111 to 51, you'd better write 051 instead of 51. Besides, some scritps written by Nikolai relies on the sign before the entry to find some entries, so you'd better keep the sign before the entry unchanged.


The number in the first entry (entry 0) of every line is called 'card number'. 
In the following, I explain the meaning of the various entries in 'inequ'.   

The 03x02 entry is used to set the value of tolerance paramter "facimp"for the iteration, refer to input.F file.
If (facimp.gt.1.) the real tolerance is set by facimp=1.e-9/facimp.

The value of the 12th card and 6th entry (denoted as 12x6 in the following, note that the entry number starts from zero) is readin to set 'qalph'.
if  qalph=1 then analytical q and p(ressure)-profiles will be used;
if  qalph=0 then q and p profiles will be read from TRANSP file; 
if 0<qalph<1 then q=qalph*q_anal+(1-qalph)*q_TRANSP, the same for the pressure profile;

p-profile:
As explained above, when qalph(12x6) is set to 1, p profile will be set using analytical expression.
This analytical expression is characterised by the parameters given on the 04th card.
Specifically, depending on the value of 'ifunc'(01x05), the analytical expression for p profile is set as follows :

if ifunc=7, then p_anal=(p0-pmin)*(1.0003-arg**beta)**(alpha+1.),

if ifunc=8 then p_anal=(p0-pmin)*(exp(-arg/alpha)-exp(-1./alpha))/(1.-exp(-1./alpha)),

if ifunc=9 then p_anal=(p0-pmin)*(1.00+alpha*arg+beta*arg**2+alpha_0*arg**3), where alpha_0 (04th card 4st value),

where alpha (04x01), beta (04x02), p0 (04x03), pmin (04x04), arg is the normalized poloidal flux, arg = psi.

q-profile:
As discussed above, when qalph (12x6) equals 1, q profile will be set using analytical expression.
The analytical expression is characterised by the parameters specified in the 12nd card: q0 (12x01), q(r=a) (12x02), dq/dPsi(0) (12x03), dq/dPsi(r=a) (12x04), where Psi is the normalized poloidal magnetic flux. The exact q-profile is then given by Eq.6.21 in C.Z.Cheng's paper [Phys.Reports, Vol.211,P.1 (1992)]. 
Another way of specifying q-profile is to change isph (8x6) from 37(default) to 38 (any numbers larger thant 37 have the same effect). 
In this case  q = q0 + (qlim-q0)*ybar, where ybar is the normalized poloidal flux, ranging from 0 to 1)

As discussed above, if qalph (12x6) is not equal to 1, then the transp.dat file is used to set q-profile.  The profile set this way can be further scaled by 'qscale' variable, which is set by the value located at (06th card and 6th value). If qscale is positive then q = q_transp * qscale. If qscale is negative, then q = q_transp*[1.+abs(Psi-1.)*(|qscale|-1.)], i.e., q at the edge is kept fixed and only changed towards the center.



---Plasma boundary, i.e., the shape of the boundary flux surface (probably be a last-closed-flux-surface (LCFS)), is computed according to the parameters in 05 card: 
major radius(05x1), guess of the major radius of magn axis(05x2) (note that a bad guess will cause the code to fail to converge), minor radius(05x3), ellipt/elongation(05x4), guess ellipt/elongation(05x5), triangul(05x7). 
These parameters must be set even when using 'TRANSP.dat' as input.
YJ: I think magn axis(05x2) specified here should be a guess, since we usually do not know the location of the magnetic axis. Also, note that the parameter 'ellipt' in the above should be equivalent to the elongation.


- If you are running the equilibrium solver for the first time (files eqb1 and eqxz do not exist), the value of (08x07) should be set to 0.0; The value of 'itooff'(13x04) should be set to 11.0;

- If you are running the solver second time (to increase the magnitude of plasma parameters such as beta), you should do two things:  
(1) change 'itest' (08x07) to 1.0 and 'itooff' (13th card 4th value) to 2.0.
(2) copy (or move) file eqb1 to eqxz

(YJ: Q: The code gives errors when running for the second time. Why? 
     A: The most possibility is that you forgot to mv eqb1 to eqxz.)

*) the 03x04 is the maximum iteration number used in the equilibrium solver, eq_transp.F: numit=ifix(card(4)+1.) 

(*). Length of the array for poloidal angle and flux grids are stored in variables 'nthe' and 'npsi' in the common region defined in file 'clichg'. The value of 'nthe' and 'npsi' are set by using  02x01 and 02x02 entries in 'inequ' file.


----- map IS TO BE RUN AFTER EQUILIBRIUM is found ---
(i) make -f mkmap
Before run xmap, you should check that the values of nq and ny in the file clichpar.h is consistent with those in file 'clichg'. Usually we don't change them. In the file gridparam the number of radial grid points (nmbrgrd) and the number of theta grid points (mnths0) can be changed by user.

To run 'map', you need file 'eqb1', which is one of the output files of goe_tr.

When './map' is started, you will be asked to change (or leave unchanged) various parameters. 
You can type the following three lines to indicate that you want to use the default values,
           &dfun /
           q
           &wdat /
Or you can change them if you want, for example, you want to set igrid=1 (this is for equidistant radial grid in sqrt(psi), the default is igrid=2 for equidistant grid in psi.), you type:
         &dfun /
         q
         &wdat igrid=1 /

(ii) Or you can simply run the default case with the script located in /u/ngorelen/work/exe/runmap.scr.

(iii)You can increase the density of points near three radial locations. To do this, you need to set igrid=4 and define the following variables:
xm{1,2,3} (this is a shorthand for three variables, xm1,xm2,xm3), radial width, gdxm{1,2,3} 
and density of accumulation d1f{1,2,3}, which is between 0.1 (more dense) and 1 (equidistant). 
For example, you use just one point, to achieve this, you type
     &dfun /
     q
     &wdat igrid=4 xm1=0.5 gdxm1=0.1 d1f1=0.3 /

     In the last page of the output plot file 'plotmap', there is a graph of Psi(i), where i is the radial grid index. This graph shows how you have chosen the grid.

(iv) to make the Boozer coordinates in the maping file, you need to do something like this (for ORBIT):
         &dfun /
         q
         &wdat igrid=2 mjacx=0 njacg=0  ljacb=2 /

(v)  The output file of `xmap` is 'mapds' and 'mpout' files. In the file contx.f there are commented read statements which read all the arrays contained in mapdsk and mpout files.

****************  HOW TO FIND CONTINUUM ***********************
The step of finding the continuum has to be done especially for the Alfven eigenmode studies. 
Note that the frequencies are normalized to the Omega_A = v_A / R0 q_1. 
Run equilibrium and mapping (see above)



(i) `make -f mkcont` to generate gocont_tr
    1. before compiling, be sure that ndat in clich1a is consistent with ndat in transp.dat file.
    2. Set the minimal and maximal poloidal harmonic number you are supposed to use in file "clichlmax": Generally speaking, the largest poloidal mode number (denoted by maxm_1 in clichlmax file) should be larger than q_a*n, where q_a is the safety factor at the LCFS and n is the toroidal mode number.
A typical "clichmax" file looks like:
c generic nstx with large number of harmonics must be maxm_1 >= q_a*n
	parameter(minm_1=-3,maxm_1=30,imode_tot=maxm_1-minm_1+1,
     *	jmin_1=minm_1-2,jmax_1=maxm_1+2,jmode_tot=jmax_1-jmin_1+1)

where we note, besides minm_1 and maxm_1, we also define jmin_1 and jmax_1, which are different from the corresponding mmin_1 and mmax_1 by 2.
These variables are set to check whether the range of the poloidal mode number is wide enough. If the results calculated by using the extended range of the poloidal number (the range from jmin_1 to jmax_1) agree with those obtained with mmin_1 and mmax_1, this indicates the range of the poloidal number is wide enough.

    3. When you run './gocont_tr' you will be asked about changing parameters, type the following line to use the default:
       &inp /
  or change, for example, the mass density profile and toroidal mode number, using the following line:
       &inp iden=1 ntor=3 alphar=0.8 prho=1.6 arho=0.0 /
    Here alphar, prho, and arho  are parameters for the mass density profile

    if iden=1, then analytical profile will be used, which is given by rhom=(1.00001-alphar*psi**prho)**arho
    For example, to set a uniform density profle, use the following
       &inp iden=1 ntor=3 alphar=0.0 prho=0.0 arho=0.0 /

       To avoid the inconvenience of typing in command line, you can use a shell script to set the parameters. An example script can be found at /u/ngorelen/work/exe/runcont_4anl.scr. You can copy it to your directory, modify it, then run it. 

   If iden=4 then read density profile from TRANSP data. To run continuum with the default input and transp.dat file use the script /u/ngorelen/work/exe/runcont.scr.

PS. If an error in NAGLIB program occurs, check the consistency of the poloidal mode numbers input and try to run again with changed value of ns = 11 501 1 (for example). The range of poloidal harmonics should cover n*q(r=a)

To implement Chu filtering scheme we will use ksound=1 and gamma~=(Te+3Ti/4)/(Te+Ti) or you can use gamma=5/3.


****************  HOW TO FIND THE MODES (INITIALIZATION)

Run equilibrium, (above)
Run mapping then (above)

make -f mkin

1. before compiling, be sure that ndat in clich1a nmbrgrd, and mnths0 in gridparam was not changed;
2. Insert the minimal and maximal poloidalmode number you are to use in file clichlmax; 
3. When you run `./goin` you will be asked to change parameters, type the following line to set paraeters:
 &inp gamma=1.66667, iden=1, alphar=0. ksound=0 /
Here ksound should be 0 for internal kink stability and 1 for TAEs.
Change parameters if you need to run it for different toroidal mode number such as in the case of TAE modes
 &inp ntor=3 /

alphar, prho, arho are parameter for density profile
if iden=1 then rho=(1.00001-alphar*psi**prho)**arho
if iden=4 then rho from TRANSP data

***FIND FREQUECY AND STRUCTURE OF MODE
prepare 'gost' file
$  make -f mkst

Run equilibrium, mapping  initialisation (see above)
1.Be sure that 'ndat' in clich1a and  nmbrgrd, mnths0 in gridparam, the minimal and maximal harmonic number 
you are supposed to use in file  clichlmax was not changed;

2. When you start gost you have to choose options you need. 
> ./gost

First enter choice for the boundary, without or with wall at the plasma edge. 
0
-To find the frequency of possible mode within some region of om^2, type:
profiles
Then you can specify the frequency range using the following format:
w_min^2,  w_max^2, number_of_steps
For example,in the following line, you set w_min^2=-0.000001, w_max^2=-0.1, and the number of steps as 21:
-0.000001,-0.1,21


--If you want to find the mode structure, type
zero

then you should set the parameters: start_omega, delta_step, iterrationnumber, accuracy, key_for_print, ih
---as in the following line:
-0.005,0.001,25,1.e-5,1,1

Here 'ih' is a key for root finder if ih=1 then  guess = 0.5 * ( g3 + g2 )
---If it asks about mdum, n00 type 1,0 for saving the eigenfunction
--If you desire to find next mode structure, type
more
---and repeat previous step
--If you want to finish run, type
end


********* To find the n=3 TAE for this default case use this: ********************

take ntor=3 mode as an example:

./goin
 &inp ntor=3 gamma=1.66667, iden=1, alphar=0. ksound=1 /

Note that ksound greatly helps to find clean modes. See M.Chu Phys. Fluids. '92 paper. 
Look for how many modes are in the range of frequencies of interest. Take a look at the default continuum, 
say for ntor=3:

./gost
0
range
1.4,1.6,20,1.e-6,25

then refine the good mode structure with this:

./gost
0
zero
1.43,0.01,25,1.e-7,1,1
1,1
fin
end
-------


----nova end----

--nova-k--
*) NOVA_param: 
The hot speciese can be one of three speceise, namely, D, T, alpha.
If ihsps=1, the first hot species, i.e., D, will be used,
If ihsps=2, the second hot species, i.e., T, will be used,
If ihsps=1, the third  hot species, i.e., alpha particle, will be used,

*) All variables in nova and novak are now real numbers, i.e. no complex variables are used.
*) Commented out "call show_31" in ncar2pgplot.f file

nova-k compiled by gfortran does not work, (tested on IBM laptop and Lenovo desktop computer)

NOVA-K needs the following input files
(1) eigenf which is the mhd perturbation (eigenfunction)
(2) mpout1 which is one of the equilibrium file generated by xmap code
(3) mapdsk which is also one of the equilibrium file generated by xmap code
(4) NOVA_param file, which is generated when you run the gotae for the first time, then you can adjust the parameters in this file. When you run the gotae for the second time, gotae will use NOVA_param as an input file.
(5) 'transp.dat' file

Make sure the 'gotae' form differnt compiling works the same.

--nova-k end---



---------nova-k collisional damping----------
Case: eigenf -> /u/yhu/d3d_109855/egn08w.2394E+01
Eigf peaks at isrf= 81  for i_m= 27
Results before revision:
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.3499E-04  -0.2460E-03  -0.7721E-02   0.0000E+00   0.0000E+00  -0.5841E-0
3   

Results after revision (using backward derivative scheme)::
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.3498E-04  -0.2460E-03  -0.7721E-02   0.0000E+00   0.0000E+00  -0.5841E-0
3   

After correcting the shift mistake in reading mpout1 file and using the original 4-points derivative scheme:

** contri. from e-colli.
gms_kg  -0.3498E-04

The same resonable results appear!

analytic approximation of ecoll= 0.3538424332072352
-------------------

Case: eigenf -> /u/yhu/d3d_109855/egn08w.5158E+01
 Eigf peaks at isrf= 8  for i_m= 12
Results before revision:
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.3331E-03  -0.3350E-03  -0.2442E-01   0.0000E+00   0.0000E+00  -0.7646E-03
Results after revision:
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.3331E-03  -0.3350E-03  -0.2442E-01   0.0000E+00   0.0000E+00  -0.7646E-03
The same resonable results appear!

analytic approximation of ecoll= 1.026279446834690E-02
-------------------

eigenf -> /u/yhu/d3d_109855/egn05w.1885E+01
Eigf peaks at isrf= 87  for i_m= 10
Results before revision:
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.9377E+02  -0.2267E-03  -0.8012E-02   0.0000E+00   0.0000E+00  -0.1530E-05
Results after revision (using backward derivative sheme):

** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.1092E-01  -0.2267E-03  -0.8012E-02   0.0000E+00   0.0000E+00  -0.1530E-05
After correcting the shift mistake in reading mpout1 file:
** contri. from e-colli.
gms_kg  -0.1071E-01
Incease the number of basis functions to 10 gives the following result:
gms_kg  -0.1071E-01
Reducing the number of basis functions to 6 gives the following result:
gms_kg  -0.1071E-01 
Reducing the number of basis functions to 1 gives the following result:
gms_kg  -0.1042E-01
When idet=2, the result is:
gms_kg  -0.1059E-01

analytic approximation of ecoll= 8.478119314711903E-02

eigenf -> /u/yhu/d3d_109855/egn05w.2195E+01
Results before revision:
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.1329E+02  -0.4513E-03  -0.1880E-02   0.0000E+00   0.0000E+00  -0.4698E-06
Results after revision (using backward derivative scheme):
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.7345E-02  -0.4513E-03  -0.1880E-02   0.0000E+00   0.0000E+00  -0.4698E-06
After correcting the shift mistake in reading mpout1 file:
** contri. from e-colli., 
gms_kg  -0.5920E-02 
Reducing the number of basis functions to 6 gives the following result:
gms_kg  -0.5916E-02
Incease the number of basis functions to 10 gives the following result:
gms_kg  -0.5921E-02 

analytic approximation of ecoll= 6.353093757329495E-02

--------------------------------------
eigenf -> /u/yhu/d3d_109855/egn05w.4982E+01
Results before revision:
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.3401E+00  -0.2161E-03  -0.1392E-01   0.0000E+00   0.0000E+00  -0.1161E-05
Results after revision (using backward derivative scheme):
** contri. from e-colli., thermal e, D, T, H, C
gms_kg  -0.1722E-02  -0.2161E-03  -0.1392E-01   0.0000E+00   0.0000E+00  -0.1161E-05
After correcting the shift mistake in reading mpout1 file:
** contri. from e-colli., 
gms_kg  -0.1584E-02 
Incease the number of basis functions to 10, give the same result as above.
Reducing the number of basis functions to 6:
 gms_kg  -0.1583E-02 

analytic approximation of ecoll= 6.281142830538065E-03


c abp is the parallel electric field term
c abe is the curvature term

----------trapped electron collisional damping of TAE--
The 'default' subroutine sets the number of the collision operator eigenfunctions idet to 8

In main program:

do i=1,nsrf
             /  call bouncee
call kinetic -- call E_parallel
             \ call      solu /
                              \
enddo

call taebeta /call cheng --> call ainte1
             \

in taebeta:

do i=1,nsrf
call cheng --> call ainte1
enddo

ecoll-->cei--->\int{cecol dr}

cecol-->cel-->aintx--->aint5--->\int{cx}


------------------------------
be carful about the kind (especially for integer variables)
some integers are defined explicitly by integer*8
and the code use "I-N" rule
If you use your own integer variable, they are integer*4 by default.


tv80lib subroutine list:
ncarcgm()
trace()  !solid line
tracec() !solid line with characters
pointc   !point line with characters
setlch()
gtext()

--- usage of some subroutine--
putwa(filename,data_array,record_location,length_of_data_array,ierr)
getwa has the similar usage.

!
 call posplt ( 0,  xtemp,ytemp, 1,nc, 1, "j vs x" ) !plot 4 figures in one frame.
the first parameter is an swither, being zero means the y axis will start or end at zero.
xtemp, ytemp is the x array and y array
1 and nc are the starting index and ending index of the xtemp and y temp array
1 is is the No. (can be from 1 to 4) of the figure in the frame
"j vs x" is the label of the figure.

Before compiling nova and novak, you should prepare the following two files:
(1)clichlmax  !This file sets the range of the poloidal mode number
(2)gridpara  !This file sets the radial and poloidal grid number
They should be keep unchaged when you compiles all the executable of nova and novak, otherwise, you will have problems when you run the excecute in sequence.



----run novak---
$ ln -sf egn01w.6734E-02  eigenf  

$ ./gotae
Then modify the NOVA_param file to set the parameter, such as ntor, rmajor and rminor
$ ./gotae

Notes: Make sure ntor takes the same value during going through the above steps.
------------pppl end-------------------------------------------------------

2011-6-11: aptitude install csh


--desktop computer--
Instead of installing Debian from a CD, I use netinstaller (two files: "linux" and "initrd.gz") to install debian basis system,
(when at the end of the installing process, choose to install boot loader to the MBR of my first hard drive)
then: 
*) 安装 gcc and some suggesting packages
*) aptitude install xorg (这个包含有基本的X window 系统，不包括wm)
*) instal a window manager
*) aptitude 安装ttf-arph开头的几个包(基本的中文包), 后来我没再安装其他中文字体了， 中文字体的显示效果在firefox中已经很漂亮了， 但在Emacs 中还不满意。(对Emacs: 后来我发现，不安装 ttf-arphic-bkai00mp ttf-arphic-bsmi00lp ttf-arphic-gbsn00lp ttf-arphic-gkai00mp情况下，emacs的字体还不错，若安装，效果变坏，中文字体模糊不清晰，也与之前在firefox遇到的情况相同。 想知道emacs所用的字体，可以这样做:先选中一个字，再用 M-x describe-char 函数取得字体信息，我的结果是 -arphic-文鼎ＰＬ简报宋-normal-normal-normal-*-14-*-*-*-d-0-iso10646-1， 这个字体很模糊，我又不知道如何选择不用它，解决这个问题的一个简单办法就是删除这个字体， 我猜这个字体应该是 ttf-arphic-bkai00mp ttf-arphic-bsmi00lp ttf-arphic-gbsn00lp ttf-arphic-gkai00mp 这几个包提供的，So I aptitude unistall these packages，然后再打开emacs看看字体怎么样，字体好看了点。现在用的是-unknown-仿宋_GB2312-normal-normal-normal-*-14-*-*-*-d-0-iso10646-1 还是不太满意）

*)  generate locales and select the default locale for the system:
# dpkg-reconfigure locales


2010-3-17 ipp台式机
先在lenovo台式机上安装网卡驱动， 再重写/etc/network/interface文件设好网卡地址， 最后重启网络/init.d/networking restart， 网络终于能用了。
2011-5-9 update: I found that when I used the netinstaller of debian (using two files 'linux' and 'initrd.gz'), do not need to install any additional network driver.
Q: How do I manage to make the network work during netinstall the system?. 
A: The answer is I do not need any thing, the netinstaller manage to provide correct driver for the network card.
I had not try the netinstaller before 2010-3-17 because I did not have a registered Mac address to connect the internet. Later, I bought a router, which enable the computer to connect the internet whichout regestering the mac address, thus I can install linux by network,(using the traditional grup installer: 'initrd.gz' and 'linux' files.)

----net-install debian on ipp desktop computer  2011-5-9---
[~/tmp]$  lftp ftp://debian.ustc.edu.cn/debian/dists/testing/main/installer-i386/current/images/netboot/debian-installer/i386/
cd ok, cwd=/debian/dists/testing/main/installer-i386/current/images/netboot/debian-installer/i386
lftp debian.ustc.edu.cn:/debian/dists/testing/main/installer-i386/current/images/netboot/debian-installer/i386> ls
drwxr-xr-x   5 ftp      ftp          4096 Jan 19 20:26 boot-screens
-rw-r--r--   3 ftp      ftp       6600596 Jan 17 13:15 initrd.gz
-rw-r--r--  18 ftp      ftp       2189312 Jan 17 13:22 linux
-rw-r--r--  16 ftp      ftp         26816 Mar 15 02:55 pxelinux.0
drwxr-xr-x   2 ftp      ftp          4096 Jan 17 13:15 pxelinux.cfg
lftp debian.ustc.edu.cn:/debian/dists/testing/main/installer-i386/current/images/netboot/debian-installer/i386> get linux initrd.gz 

(Using the above downloaded 'linux initrd.gz ', I should install a testing debian, however, it turn out that I actually installed  debian 'squeeze', which is the stable release of debian)
aptitude install openssh-server lftp
aptitude gcc and its suggesting packages such as 'make' .etc.

-web server on debian, LAMP (Apache+Mysql+PhP)--
*) when I install Debian, I chose to install a appache web server and a database
*) aptitude install mysql
*) aptitude install "php5-cgi, php5-cli php5-common, libapache2-mod-php5" to install php5 and enable php5 work with apache2.
*) to enable php5 work with mysql, aptitude install php5-mysql package.
*) I installed a wordpress (the content is a mirror of the content on theory.ipp.ac.cn) to test whether php5 and mysql work apache.
ref: http://www.howtoforge.com/installing-apache2-with-php5-and-mysql-support-on-debian-wheezy
ssh yj@210.73.18.35
ssh yj@210.73.19.15

install adobe flashplayer:
At the website of adobe, downlaod the file "libflashplayer.so"
# cp libflashplayer.so  /usr/lib/mozilla/plugins  
or to /home/yj/.mozilla/plugins directory, Done!

My desktop computer architeture: _i686, and it's a 64bit machine, since cpu has the 'lm' flag.
$ grep flags /proc/cpuinfo
Find 'lm' flag. If it's present, it means your CPU is 64bit and it supports 64bit OS. 'lm' stands for long mode.
We can also use `lscpu|grep "CPU op-mode"` to find out whether the cpu is 64bit or not.

If you install debian from a CD, then
 *) instal only the standard system from the CD
 *)安装完后启动到新系统
*) 编辑/etc/apt/sources.list 加入ustc的源
*)  更新到最新版：
 # apt-get update
 # apt-get upgrade  !我没一直没这么做过。
--------


--install kubuntu 11.10 using yuzhi's rom disk---
(0) make sure the network is working.
(1) insert rom disk
(2) restart
(3) choose install kubuntu
(4) choose install third-party software and download updates while installing.


--------


--#define in fortran----
Many Fortran compilers come with a pre-processor which implements #define, although it's not part of the standards. On linux-like systems, source files named with .F or .F90 typically cause the pre-precessor to be invoked, or a command line option which invokes pre-processing is available. If all else fails, a common tactic is
gcc -x c -traditional -E yourfile.f > preprocessedfile.f
Several preprocessors of similar nature are available as open source.


[~/project/nova_test/gost_yj]$ ./gost 
./gost: error while loading shared libraries: libpng15.so.15: cannot open shared object file: No such file or
 directory 
When this error happens, it is usually due to the lack of a shared library(dynamic library) on your computer, or the required libray exists but is installed at a non-standard location. For the latter case, you can fix this error by adding the path to the dynamic libray to the LD_LIBRARY_PATH environment variable, for example, 
export LD_LIBRARY_PATH=/home/yj/public/png/png/lib:$LD_LIBRARY_PATH

--ar--
ar - create, modify, and extract from archives
for example: create a library based on object file 'tv80lib.o'
ar cr libtv80.a tv80lib.o
or
ar -r libtv80.a tv80lib.o 

--ncview-- http://meteora.ucsd.edu/~pierce/ncview_home_page.html
Install ncview:
$ ./configure --x-libraries=/usr/lib --prefix=/home/yj/installed/ncview-1.93 --with-netcdf_incdir=/home/yj/installed/netcdf-gfortran/include/ --with-netcdf_libdir=/home/yj/installed/netcdf-gfortran/lib/         

Note that `--x-libraries=/usr/lib` is to let the configure script find  the X libraries and development headers. The ./configure script assume these files are in /usr/X11R6/lib, however, on my system, /usr/X11R6 does not contain a subdirectory lib, all X libraies are stored in /usr/lib, so I explicitly tell the configure script to look in this directory.

Comments: It seems that Debean/Ubuntu stores X libraries in a non-standard location, /usr/lib rather than /usr/X11R6/lib. This point must be noted when you compile any X related application from source on these systems.

$ make
$ make install
$ export XAPPLRESDIR=/home/yj/.app-defaults
Why I export 'XAPPLRESDIR' is due to the following information given by `make install` ncview,
************************************************************
              **** I M P O R T A N T ****
 
To run properly, ncview needs to have a properly installed
applications default file.  You do not seem to be installing
as super-user, so I cannot write into the global application
defaults directory, /usr/lib/X11/app-defaults.  Therefore, I
must install the applications default file in a user-specific 
location that you have write access to.  The traditional way to 
do this is to define an environmental variable named XAPPLRESDIR 
that holds the name of a directory to install user-specific application
default files into.  I am going to go ahead and put the ncview
applications default file, Ncview, into directory /home/yj/.app-defaults
 
        *** WHAT YOU NEED TO DO IS add the       ***
        *** following line to your .cshrc file:  ***
 
setenv XAPPLRESDIR /home/yj/.app-defaults
 
NOTE that this will not take effect until you log out and then log
back in again!  (It also assumes you are using the csh; modify
as appropriate if you are using a different shell.)
 
************************************************************
Installing app-defaults file in /home/yj/.app-defaults
--------------------------------------------------------




--ipp cluster----


--ncarg on ibm laptop---
download prebuild tarball, ncl_ncarg-5.2.0.Linux_i686_nodap_gcc432.tar.gz
$ mkdir ncl_ncarg-5.2.0.Linux_i686_nodap_gcc432_prebuild
$ cd ~/installed/ncl_ncarg-5.2.0.Linux_i686_nodap_gcc432_prebuild
$  tar -xzf ../tarball/ncl_ncarg-5.2.0.Linux_i686_nodap_gcc432.tar.gz -C .
Then, in .bash_profile, add 
export NCARG_ROOT=/home/yj/installed/ncl_ncarg-5.2.0.Linux_i686_nodap_gcc432_prebuild
export PATH=$NCARG_ROOT/bin:$PATH
export MANPATH=$NCARG_ROOT/man:$MANPATH

source .bash_profile
$ . .bash_profile

Now test ncar:
$    ncargex cpex08
Output:
NCAR Graphics Fortran  Example <cpex08>
  Copying cpex08.f
  Copying cpexcc.f
Compiling and linking...
gfortran -fPIC -fno-second-underscore -fno-range-check -O0 -o cpex08 cpexcc.f cpex08.f -L/home/yj/installed/ncl_ncarg-5.2.0.Linux_i686_nodap_gcc432_prebuild/lib -lncarg -lncarg_gks -lncarg_c -lX11 -lXext

Executing <cpex08>...
 PLOT TITLE WAS EXAMPLE 8
 INTEGER WORKSPACE USED          120
    REAL WORKSPACE USED          400
    AREA MAP SPACE USED        93050
 PLOT TITLE WAS EXAMPLE 8
 INTEGER WORKSPACE USED          120
    REAL WORKSPACE USED          400
    AREA MAP SPACE USED       865034

Metafile file is named cpex08.ncgm.

Now use ctrans to view the output metafile file,
$  ctrans -d X11 cpex08.ncgm

Note that to compile and link fortran program which uses ncarg, you must use various complier options, as illustrated in the above example. To ease this process, ncarg provides scripts to compile/link program,
for fortran code, you can use
$ ncargf77 example.f 
to compile and link.
for C code, you can use
$ ncargcc example.c


---ncar on cluster--
Before compiling ncarg source, set the following variables,
export NCARG=/home/yj/install_source/ncl_ncarg-5.2.1
export CC=gcc
export CFLAGS='-O -ansi -fPIC'
export FC=gfortran
export F90=gfortran
export FFLAGS='-fPIC'
export F90FLAGS='-fPIC'
export CXX=g++
export CXXFLAGS='-O -ansi -fPIC'
export CPPFLAGS='-DNDEBUG'
You do not need to type these commands one by one. You can copy these commands to a file, then soure this file. (Note you must source the file, instead of executing the file.)
$ cd ${NCARG}/config
$ cp LINUX.64.INTEL LINUX  (that is using INTEL compiler)
$ cd $NCARG
$ ./Configure      (and chose only ncar, and set the install directory )
$ make Everything  >&  make-output  &
Be patient, this can take from thirty minutes to a few hours depending on your machine and its current load. During the installation, you may examine the contents of the make-output file with the command:
$    tail  -f  make-output

The above steps follow the instructions in ncl-ncarg install.html (This file can be found in /home/yj/doc/software_manual/ncar_install.html)
For using ncar:
export NCARG_ROOT=/home/yj/installed/ncarg_compiled_new #this is the install directory chosen by me
 export PATH=$NCARG_ROOT/bin:$PATH
 export MANPATH=$NCARG_ROOT/man:$MANPATH
testing ncar:
$    ncargex cpex08
$    ctrans -d X11 cpex08.ncgm

The first command will copy a file called cpex08.f into your current working directory, compile, link, and execute it, and create a graphics file called cpex08.ncgm. The second command will display the graphic on an X11 window on your screen. You must have your DISPLAY environment variable set correctly for this command to work. Left-click on the X11 window to make the graphic go away.
Note that X11R6/lib64 libraries should be linked in, as given in the following:
$ ifort -O2 -o cpex08 cpexcc.f cpex08.f -L/home/yj/installed/ncarg_compiled_new/lib -L/usr/X11R6/lib64 -lncarg -lncarg_gks -lncarg_c -lXpm -lX11 -lXext

Comments: The above compiling process seems to be inconsistent,(I set f90=gfortran, however, I use the intel configure file) (ictrans provided by ncarg does not work in the above build, this may be due to the inappropriate mix of compilers).  Now I correct this by using only GNU compiler. The only difference from the above is I copy LINUX.64.GNU to LINUX, i.e. using gnu configure file. (Actually, a defaulf LINUX file is already present, and it is for GNU.)

Now, both ctrans and ictrans work properly.
-------

ipp_cluster usrname: yj
passwd: family name plus six numbers

when using -lX11 option for a compiler, the correct library directory should be
-L/usr/X11R6/lib64/, instead of  -L/usr/X11R6/lib/. That is, we should link the library "/usr/X11R6/lib64/libX11.a", instead of "/usr/X11R6/lib/libX11.a", since the ipp_cluster is a 64bit machine.

--pgplot--
read install-unix.txt, copy and modify drivers.list
$ ~/install_source/pgplot/pgplot/makemake /home/yj/source/pgplot/pgplot/ linux f77_gcc
using gfortran
makefile: modify the x11 library location to /usr/X11R6/lib64/
delete the -u and -lf2c option,
modify gidriv.f to change %val(blabla) structure to "blabla", here %val() structure is to explicitly set reference by value, however, this feature is not suported by the 64-bit version of gfortran, so I change it to the ordinary form (i.e. reference by address)
$export PGPLOT_FONT=/home/yj/installed/pgplot/grfont.dat 
$ gfortran -o example f.for ../libpgplot.a -L /usr/X11R6/lib64/ -lX11 
$./example
$ gv pgplot.ps 

--ezcdf---
$ tar -xzf ../tarball/ezcdf.tar.gz -C .
$ export   FORTRAN_VARIANT=Intel
$ make  FLIBROOT='/opt/intel/fce/10.0.023/lib/' NETCDF_DIR=/home/yj/installed/netcdf-ifort/   

compile source code that call eznetcdf:
$ ifort -c t.f90  -I ~/install_source/eznetcdf_ifort/LINUX/mod/
Link:
ifort t.o  -L/home/yj/install_source/eznetcdf_ifort/LINUX/lib/ -L/home/yj/installed/netcdf-ifort/lib/ -lezcdf -lnetcdf
注意这里的链接库的次序非常重要,如果次序反了链接时报错，很迷惑人，切记！

--ezcdf-- using gfortran on ibm laptop---

$ mkdir ezcdf_gfortran 
$ cd ezcdf_gfortran 
$ tar -xzf ../tarball/ezcdf.tar.gz -C .
$ make FORTRAN_VARIANT=GCC NETCDFHOME=/home/yj/installed/netcdf-gfortran/
whre FORTRAN_VARIANT=GCC is to indicate we want to use gfortran compiler.

Using the above command lines, I also compiler a gfortran version of the ezcdf on ipp_cluster.
However, in linking the second test example provided by ezcdf, I got the error message,
`/usr/bin/ld: cannot find -lgfortran`. This is because of lack of libgfortran.a library.
I found that the gcc used on ipp_cluster is gcc-3.1.4, and this version has no libgfortran.a library,
while gcc-4.1.2 has this library, so I do the following:
$ cd ~/bin
$ ln -s /usr/bin/gcc4 gcc
to use gcc-4.1.2
then 
$  make FORTRAN_VARIANT=GCC NETCDFHOME=/home/yj/installed/netcdf-gfortran/
I still got the error message: /usr/bin/ld: cannot find -lgfortran
This is because libgfortran.a is not in the library path, so I manually modified the the Make.flags to explicit state the library: /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libgfortran.a
and /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libgfortranbegin.a
Now
$  make FORTRAN_VARIANT=GCC NETCDFHOME=/home/yj/installed/netcdf-gfortran/
pass all the tests.

---ezcdf--
-------ipp cluster--



to update the dynamical link library path:
[~] sudo /sbin/ldconfig 

I use the following command to delete files under /tmp :
[~]$ find /tmp/ -mtime +1 -exec rm -rf {} \;





whtat is ia32?

set keymap (do this under console, not under X terminal simulator)
 1. Save your current keyboard layout:
      $ dumpkeys > backup.kmap

      In case something goes wrong you might be able restore your keymap using the command 
        sudo loadkeys backup.kmap. 
   2. Check which keycodes are assigned to your keys:
      $ showkey
      Now press the key to know this keycode number
   3.   get to know the names of the desired keys from dumpkeys, such as
      $ dumpkeys | grep 1
      ...
      keycode   1 = Escape
      ...
      $ dumpkeys | grep 58
      ...
      keycode  58 = CtrlL_Lock
      ...

   4.  Note the keymap line from dumpkeys:

      $ dumpkeys | head -1
      keymaps 0-127

   5. Create a keymap file, for example to switche ESC and CAPSLOCK:

      keymaps 0-127
      keycode   1 = CtrlL_Lock
      keycode  58 = Escape

   6.     Load the keymap:

      $ sudo loadkeys swap_esc_capslock.kmap

To have this modification load on every reboot, put the line sudo loadkeys swap_esc_capslock.kmap in the file /etc/rc.local.
I find this setting do not have any effect on the keyboard in X environment.

desktop computer ip: 210.73.18.155


博士后 research associate


Mistakes easy to make:
(1) You want to type the following command:
cp ~/tmp/*.f .
but you missed the last dot by mistake, i.e. you actually type
cp ~/tmp/*.f 
If there happen to be exactly two files in ~/tmp directory, then the above commands pass silently, but the the work it actually do is to overwrite the second file with the first file found in the directory, a result not wanted.

(2) about the soft link:
If 'aaa' is a soft link to file 'foo.txt', and you over-write abc with file 'bbb':
$ cp bbb aaa

The results are: aaa are still a soft link to foo.txt, but the content of 'foo.txt' replaced by 'bbb'
I do not like this feature of the soft-link.


I use 'lp' to print text files in linux when I was working at PPPL.

--diff--patch--
patch - apply a diff file to an original file to generate new version of the file.
For example:
first get the difference of "a" and "b" (the results is the instructions on how to modify a to make it become  b)
$ diff a b >a.diff
then use "a.diff" to patch a (i.e., to make 'a' become 'b')
$ patch a a.diff

处理中文文档的方法：先纯文本， 然后将其粘贴到一个空白的openoffice文档内， 这样字体很好看（应该是标准的仿宋字体)

--find--
$ find ./ -type d \( -iname 'installed' -o -iname 'install_source' \) -prune -o -iname '*.tm' -print
This is to search for '*.tm' file in the current and sub derectory, but excluding the 'installed' and 'install_source' directory. Here the last -o means 'or', however I prefer to understand '-o' as 'then do the following things'.
-prune and -print are both action.

To skip multiply directories when using 'find' to search for files, use the following command
find . -type d  \( -name installed -o -name install_source -o -name my_thesis_ustc \) -prune -o -name '*.tm' -print

--octave----
To save a plot when the figure is displayed on the X11 screen, use the print command. For example,
print -deps foo.eps

--welcome message, message of today /etc/motd --
edit /etc/motd to set welcome message  for login.

--latex2html on laptop--
wget http://mirrors.ctan.org/support/latex2html/latex2html-2008.tar.gz
tar -xf latex2html-2008.tar.gz  
./configure --with-gs=/usr/bin/gs --prefix=/home/yj/tmp/latex2html 
make
make test
make install

--remove black lines underneath equations---
Black lines appear underneath equations. This turns out to be a bug in the latex2html package that can easily be fixed with a quick hack. For a single user, WTK found that: I did have to add
$DVIPSOPT = ' -E'; # remove -Ppdf flag
to my ~/.latex2html-init file.
ref: http://einstein.drexel.edu/liki/index.php/Latex2html

Q:The reference numbers of equations appear as square symbols in the translated html, Why?
A: Before running latex2html, you should run "latex  your_paper.tex" to produce the .aux file, latex2html need this file to correctly produce the equation reference number.

(3) I found that I must use absolute path, instead of relative path, of figures in tex file, otherwise the figure can not be displyed in the converted html version. I do not know why.

-----


--esc--
$ tar -xf ../tarball/esc.tar.gz -C .
$ export FORTRAN_VARIANT="GCC" && make
--esc-
--ntcc--separatrix-- (separatrix is needed by teq code.)
The CR newline code is used in the source code of separatrix, the linux system installed on my labtop and desktop can not recongnize the newline code correctly, thus can not execute the configure scripts. I use "tr" to convert the format:
tr -d '\015' < configure >tmp_yj
mv tmp_yj configure
tr -d '\015' < config.sub >tmp_yj
mv tmp_yj config.sub
chmod u+x configure config.sub
The config.guess provided in the tarball can not be recognized by the system, again due to some format issues, so I use a sucessful config.guss in my system:
$ cp /home/backup/install_source/emacs-22.3/config.guess config.guess 
then run configure script:
$ ./configure --with-F90=gfortran --with-LAPACKFLAGS="/home/yj/install_source/lapack-3.1.1-gfortran/lapack_LINUX.a /home/yj/install_source/lapack-3.1.1-gfortran/blas_LINUX.a"

$ make
$ make test
The output I got is such as
         1 gd3df
Error is within tolerance:  1.12225463781897553E-006 cm < 1.0e-3 cm

which indicates the test is successful!
--separatrix-

---teq--
The same procedures as above are made to convert the format (refer to the above section). 
When all the above is done, then 
$ ./configure --with-F90=gfortran --with-SEPLIBPATH=/home/yj/ntcc/separatrix  --with-L
APACKFLAGS="/home/yj/install_source/lapack-3.1.1-gfortran/lapack_LINUX.a /home/yj/install_source/lapack-3.1.1
-gfortran/blas_LINUX.a"    
$ make && make test


--set display when running program using crontab, e.g.
export DISPLAY=:0.0 && xterm -hold -e 'myscript.sh'

I found the command 'display' can be used to view images. This is a useful command line tool.
$ display /home/yj/kuixingge.jpg

--make a ps figure using the ncarg metafile
$ ctrans    -d $NCARG_ROOT/lib/ncarg/graphcaps/ps.land.mono  plotmap >t.ps
or
$ctrans -d ps.land.mono  plotmap >t.ps
or
$ctrans -d ps.mono  plotmap >t.ps !this is a rotation of the above result

--icc on desktop--
download installation file: l_ccompxe_ia32_2011.4.191.tgz
Note that the achiteture is ia32
The serial number provided by intel is : N5D5-G353FJBZ  
$ tar -xzf l_ccompxe_ia32_2011.4.191.tgz
$ cd l_ccompxe_ia32_2011.4.191
$./install.sh

--ifort on desktop--
The serial number provided by intel is: NR2M-27CGGZL7  
downloaded file: l_fcompxe_ia32_2011.4.191.tgz. 
(I also downloaded the 64bit version file, l_fcompxe_intel64_2011.4.191.tgz. However, the installation scripts inform me the file does not match my machine's architeture. I'm confused by this because the file /proc/cpuinform on my machine contains 'lm' flag, which indicates the cpu is 64bit.)

$ tar -xzf l_fcompxe_ia32_2011.4.191.tgz
$ cd l_fcompxe_ia32_2011.4.191
$ ./install.sh
blabla....
When installation finished, I got the following information:
To get started using Intel(R) Composer XE 2011 Update 4 located in
/home/yj/installed/intel/composerxe-2011.4.191/composerxe-2011.4.191: 
- Set the environment variables for a terminal window using one of the following
  (replace "intel64" with "ia32" if you are using a 32-bit platform).
     For csh/tcsh:
        $ source install-dir/bin/compilervars.csh intel64
     For bash:
        $ source install-dir/bin/compilervars.sh intel64
     To invoke the installed compilers:
        For C++: icpc
        For C: icc
        For Fortran: ifort
  To get help, append the -help option or precede with the man command.
- To view a table of getting started documents: 
  install-dir/Documentation/en_US/documentation_f.htm.

$ . /home/yj/installed/intel/composerxe-2011.4.191/bin/compilervars.sh  ia32

ifort can Environment Variables, (tested on my desktop computer)
You can use shell commands to set the appropriate environment variable to a value that indicates a directory (if needed) and a file name to associate a unit with an external file.
Intel Fortran recognizes environment variables for each logical I/O unit number in the form of FORTn, where n is the logical I/O unit number. If a file name is not specified in the OPEN statement and the corresponding FORTn environment variable is not set for that unit number, Intel Fortran generates a file name in the form fort.n, where n is the logical unit number.


-------
2011-6-5: to insatll 拨号软件
hn:/home/yj# dpkg -i libpcap0.8_1.1.1-2_i386.deb #this library is needed by ppp package
hn:/home/yj# dpkg -i ppp_2.4.5-4_i386.deb 
hn:/home/yj# dpkg -i pppoe_3.8-3_i386.deb 
hn:/home/yj# dpkg -i pppoeconf_1.20_all.deb 

Before running 'pppoeconf' to configure diagup connection, examine the file /etc/network/interfaces to make sure it seems like:
# sudo cat /etc/network/interfaces
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
allow-hotplug eth0
iface eth0 inet dhcp

Then I run "pppoeconf" to configure diagup connection, answered the question and provdie my diagup_number and password. After the configuration was finished, my network worked!

For cuoristy, I examined the file /etc/network/interfaces, I found "pppoeconf" add the following lines to the file:
auto dsl-provider
iface dsl-provider inet ppp
pre-up /sbin/ifconfig eth0 up # line maintained by pppoeconf
provider dsl-provider

I get to know that pppoeconf also creates/modifies file /etc/ppp/peers/dsl-provider, in which username of my diagup account is stored.

diagup system:
executable programe: pppd
confiugure file: /etc/network/interfaces and /etc/ppp/peers/dsl-provider

pppd is now executed when system startup, I'll find how to disable this, so I can start pppd manually when I need it.

Some messages given when running 'pppoeconf':
Now, you can make a DSL connection with "pon dsl-provider" and terminate it with "poff". Would you like to start the connection now?

The DSL connection has been triggered. You can use the "plog" command to see the status or "ifconfig ppp0"  for general interface info.


#when at home, do the following to use network:
$ cd /etc/network/
$ sudo cp interfaces_home interfaces
$ sudo /etc/init.d/networking restart 

#when at office, do the following to use network:
$ cd /etc/network/
$ sudo cp interfaces_ipp interfaces
$ sudo /etc/init.d/networking restart 

----------------------------------

--convert---
HOWTO convert an EPS image to a (good quality) GIF
Using 'convert' to convert an EPS/PS image to a gif often results in a poor quality image - this is because the default sampling of the EPS image is 72 dots per inch. You can increase the sampling rate using the following command line:

convert -density 144 infile.eps outfile.gif

This doubles the sampling density to 144 dots per inch and improves the image quality. 

command: convert
$convert file.gif file.eps


--animation using gif--
The following script is to create a gif animation:

for filename in contour?????.txt 
do
cp $filename contour.txt
gnuplot my_contour_templet.plt 
#get the filename without the extension
mainfilename="${filename%.*}"
mv abc.eps ${mainfilename}.eps
echo "$filename" "===>" "${mainfilename}.eps"
done
echo 'Creating gif animation...', '.eps===>.gif'
convert -delay 20 contour?????.eps   a.gif 
mv contour?????.txt ./data
rm contour.txt  contour?????.eps


--enca--enconv--iconv--
to detect the encoding of a file, use enca or enconv.
To convert the encoding of content of a file, use "iconv", for exmaple,
$ iconv -f gb2312 -t utf-8 foo.txt > output.txt

If you use chinese in your shell script, you should make the encoding of the script file be utf-8, instead of gb2312, otherwise the chinese content in your script may not be teated properly.
I use iconv to change the encoding of the script file, for example,
$ iconv -f gb2312 -t utf-8 weather_forecast_fetion.sh > output.sh
--------------


---
fetion passwd: happyhu328996

--#define in fortran----
Many Fortran compilers come with a pre-processor which implements #define, although it's not part of the standards. On linux-like systems, source files named with .F or .F90 typically cause the pre-precessor to be invoked, or a command line option which invokes pre-processing is available. If all else fails, a common tactic is
gcc -x c -traditional -E yourfile.f > preprocessedfile.f
Several preprocessors of similar nature are available as open source.


[~/project/nova_test/gost_yj]$ ./gost 
./gost: error while loading shared libraries: libpng15.so.15: cannot open shared object file: No such file or
 directory 
When this error happens, it is usually due to the lack of a shared library (dynamic library) on your computer, or the required libray exists but is installed at a non-standard location. For the latter case, you can fix this error by adding the path to the dynamic libray to the LD_LIBRARY_PATH environment variable, for example, 
export LD_LIBRARY_PATH=/home/yj/public/png/png/lib:$LD_LIBRARY_PATH

Another example:
"./equlibr: error while loading shared libraries: libfj9i6.so.1: cannot open shared object file: No such file or directory "
Fix the above error using the following command line:
export LD_LIBRARY_PATH=/pkg/restrict/lf95/6.2/lib/:$LD_LIBRARY_PATH

--ar--
ar - create, modify, and extract from archives
for example: create a library based on object file 'tv80lib.o'
ar cr libtv80.a tv80lib.o
or
ar -r libtv80.a tv80lib.o 

--ncview-- http://meteora.ucsd.edu/~pierce/ncview_home_page.html
Install ncview:
$ ./configure --x-libraries=/usr/lib --prefix=/home/yj/installed/ncview-1.93 --with-netcdf_incdir=/home/yj/installed/netcdf-gfortran/include/ --with-netcdf_libdir=/home/yj/installed/netcdf-gfortran/lib/         

Note that `--x-libraries=/usr/lib` is to let the configure script find the X libraries and development headers. The ./configure script assume these files are in /usr/X11R6/lib, however, on my system, /usr/X11R6 does not contain a subdirectory lib, all X libraies are stored in /usr/lib, so I explicitly tell the configure script to look in this directory.

Comments: It seems that Debean/Ubuntu stores X libraries is in a non-standard location, /usr/lib rather than /usr/X11R6/lib. This point must be noted when you compile any X related application from source on these systems.

$ make
$ make install
$ export XAPPLRESDIR=/home/yj/.app-defaults
Why I export 'XAPPLRESDIR' is due to the following information given by `make install` ncview,
************************************************************
              **** I M P O R T A N T ****
 
To run properly, ncview needs to have a properly installed
applications default file.  You do not seem to be installing
as super-user, so I cannot write into the global application
defaults directory, /usr/lib/X11/app-defaults.  Therefore, I
must install the applications default file in a user-specific 
location that you have write access to.  The traditional way to 
do this is to define an environmental variable named XAPPLRESDIR 
that holds the name of a directory to install user-specific application
default files into.  I am going to go ahead and put the ncview
applications default file, Ncview, into directory /home/yj/.app-defaults
 
        *** WHAT YOU NEED TO DO IS add the       ***
        *** following line to your .cshrc file:  ***
 
setenv XAPPLRESDIR /home/yj/.app-defaults
 
NOTE that this will not take effect until you log out and then log
back in again!  (It also assumes you are using the csh; modify
as appropriate if you are using a different shell.)
 
************************************************************
Installing app-defaults file in /home/yj/.app-defaults
--------------------------------------------------------

-------
uname - print system information, Using this command, you can get various system information, such as,
uname -s      #for kernel name
uname -o      # for operating system
uname -p    #for process type
uname -i    #print the hardware platform or "unknown"
uname -m   #print the machine hardware name

If a program outputs many many information to standard output, and you want to pipe this information to a file and meanwhile you want to monitor the information on the monitor, can this be achived? Yes, the answer is: first pipe the output to a file:
$ ./program >& my_file &
and then using tail to follow the change of 'my_file'
$     tail  -f  my_file
the -f option is to follow the appended data as the file grows.
This method is better than using |tee, because, for some programs (including fortran codes written by me), |tee writes the result to standard output only after the command `./program` has finished. Thus we do not get a realtime results.
Update: the "tail -f" method actually does not work for the fortran program written by me because, when the output is redirected to a file, the standout is buffered and is actually written to the file only when the program finish running.

--ipp cluster----
user name : yj
password: hy+six numbers

$ module avail #to see available software
$ module load compiler/ifort/11  #to use the ifort comiler


---ncarg on desktop:
aptitude install xorg-dev , I need install this package to compile ncl-ncarg libriary.
I also need to install csh, since the pre-configure script of ncarg uses csh.
$ cd  ~/install_source
$ tar -xf ../tarball/ncl_ncarg_src-5.2.1.tar.gz -C . 
$ cd ncl_ncarg_src-5.2.1
$ . yj_exports # the file 'yj_exports' contains the above commands to set environment variables
$ cd config/
$ cp LINUX.64.GNU LINUX
$ edit the 19th line, from "#define FcOptions      -fPIC -fno-f2c -fno-second-underscore"
to "#define FcOptions      -fPIC -fno-f2c -fno-second-underscore -fno-range-check"
$ cd ..
$ ./Configure  (disable ncl and set the parent install directory /home/yj/installed/ncl_ncarg_gnu
Set local library search paths to /usr/lib64 /usr/lib (I do not know whether /usr/lib is necessary, but it does not hurt to include it. ( I can now answer this question. In fact /usr/lib is need, while /usr/lib64 is not needed. Still has a question, my desktop computer is 64bit machine, it may be more reasonable that I should use  /usr/lib64. why?)) 
Set local include search path to /usr/include
$ 	make Everything >& make-output &
add  /home/yj/installed/ncl_ncarg_gnu/bin to $PATH
Now test the compiled ncarg library:
yj@dt:~/tmp$ ncargex cpex08

NCAR Graphics Fortran  Example <cpex08>

  Copying cpex08.f

  Copying cpexcc.f

Compiling and linking...
gfortran -fPIC -fno-f2c -fno-second-underscore -fno-range-check -O -o cpex08 cpexcc.f cpex08.f -L/home/yj/installed/ncl_ncarg_gnu/lib -L/usr/lib64 -L/usr/lib -lncarg -lncarg_gks -lncarg_c -lX11 -lXext
/usr/bin/ld: skipping incompatible /usr/lib64/libm.so when searching for -lm
/usr/bin/ld: skipping incompatible /usr/lib64/libm.a when searching for -lm
/usr/bin/ld: skipping incompatible /usr/lib64/libc.so when searching for -lc
/usr/bin/ld: skipping incompatible /usr/lib64/libc.a when searching for -lc

Executing <cpex08>...
 PLOT TITLE WAS EXAMPLE 8
 INTEGER WORKSPACE USED          120
    REAL WORKSPACE USED          400
    AREA MAP SPACE USED        93050
 PLOT TITLE WAS EXAMPLE 8
 INTEGER WORKSPACE USED          120
    REAL WORKSPACE USED          400
    AREA MAP SPACE USED       865034

Metafile file is named cpex08.ncgm.

yj@dt:~/tmp$ ls
cpex08*  cpex08.f  cpex08.ncgm  cpexcc.f
yj@dt:~/tmp$ ctrans -d X11 cpex08.ncgm 
This will display a figure on an X11 window.

Comments: There are warning messages such as "/usr/bin/ld: skipping incompatible /usr/lib64/libm.so when searching for -lm". This message indicates that I should not use libray in /usr/lib64 directory. (Question: Why the libriary in /usr/lib64 is incompatible while my computer is a 64bit machine?)

Troubleshooting:
(1) When getting the error message: "In function `gziqwk_':
 gziqwk.f:(.text+0x187): undefined reference to `ggkwdr_'"
This may be due to missing of xorg-dev related library. I aptitude installed xorg-dev package, and the error messages was gone.
(2) I run the following command
yj@dt:~/tmp$ ctrans -d X11 cpex08
and get the following error message
ctrans: FATAL - Error fetching CGM element

This error message is usually due to that the file you given ('cpex08' in this case) is not a ncarg metafile.

When I tested ncarg library on my desktop computer for the first time, I got this error message, and this made me think the library is not correctly compiled on the computer. Then I spent many time reading the installing manual, checking the compiling procedures, googling the error message, and still can't find any solution. Finally, I found I specified a wrong metafile in the command line, the metafile should be cpex08.ncgm, instead of cpex08! What a stupid mistake I made!

-------

ipp_cluster usrname: yj
passwd: family name plus six numbers

when using -lX11 option for a compiler, the correct library directory should be
-L/usr/X11R6/lib64/, instead of  -L/usr/X11R6/lib/. That is, we should link the library "/usr/X11R6/lib64/libX11.a", instead of "/usr/X11R6/lib/libX11.a", since the ipp_cluster is a 64bit machine.

--pgplot on ipp_cluster and desktop computer--
read install-unix.txt, copy and modify drivers.list

yj@dt:~/installed/pgplot5.2$ ~/install_source/pgplot5.2/makemake /home/yj/install_source/pgplot5.2/ linux f77
_gcc 

Befor compiling, modify makefile as follows.
set fortran compiler to gfortran
delete the -u and -lf2c option
modify the x11 library location to /usr/X11R6/lib64/

modify gidriv.f to change %val(blabla) structure to "blabla", here %val() structure is to explicitly set reference by value, however, this feature is not suported by the 64-bit version of gfortran, so I change it to the ordinary form (i.e. reference by address)

$export PGPLOT_FONT=/home/yj/installed/pgplot/grfont.dat 

$ gfortran -o example f.for ../libpgplot.a -L /usr/X11R6/lib64/ -lX11 
$./example
$ gv pgplot.ps 

--ezcdf---
$ tar -xzf ../tarball/ezcdf.tar.gz -C .
$ export   FORTRAN_VARIANT=Intel
$ make  FLIBROOT='/opt/intel/fce/10.0.023/lib/' NETCDF_DIR=/home/yj/installed/netcdf-ifort/   

compile source code that call eznetcdf:
$ ifort -c t.f90  -I ~/install_source/eznetcdf_ifort/LINUX/mod/
Link:
ifort t.o  -L/home/yj/install_source/eznetcdf_ifort/LINUX/lib/ -L/home/yj/installed/netcdf-ifort/lib/ -lezcdf -lnetcdf
注意这里的链接库的次序非常重要,如果次序反了链接时报错，很迷惑人，切记！

--ezcdf-- using gfortran on ibm laptop---

$ mkdir ezcdf_gfortran 
$ cd ezcdf_gfortran 
$ tar -xzf ../tarball/ezcdf.tar.gz -C .
$ make FORTRAN_VARIANT=GCC NETCDFHOME=/home/yj/installed/netcdf-gfortran/
whre FORTRAN_VARIANT=GCC is to indicate we want to use gfortran compiler.

Using the above command lines, I also compiler a gfortran version of the ezcdf on ipp_cluster.
However, in linking the second test example provided by ezcdf, I got the error message,
`/usr/bin/ld: cannot find -lgfortran`. This is because of lack of libgfortran.a library.
I found that the gcc used on ipp_cluster is gcc-3.1.4, and this version has no libgfortran.a library,
while gcc-4.1.2 has this library, so I do the following:
$ cd ~/bin
$ ln -s /usr/bin/gcc4 gcc
to use gcc-4.1.2
then 
$  make FORTRAN_VARIANT=GCC NETCDFHOME=/home/yj/installed/netcdf-gfortran/
I still got the error message: /usr/bin/ld: cannot find -lgfortran
This is because libgfortran.a is not in the library path, so I manually modified the the Make.flags to explicit state the library: /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libgfortran.a
and /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libgfortranbegin.a
Now
$  make FORTRAN_VARIANT=GCC NETCDFHOME=/home/yj/installed/netcdf-gfortran/
pass all the tests.

---ezcdf--
-------ipp cluster--



to update the dynamical link library path:
[~] sudo /sbin/ldconfig 

I use the following command to delete files under /tmp :
[~]$ find /tmp/ -mtime +1 -exec rm -rf {} \;

------claws-mail---
1.in account preference,  and 'send' tab--Authentication--> SMTP authentication must
be enabled, otherwise the client can not send out email.

2.In SSl : (1) For pop3: Don't use ssl (2) for send(smtp): don't use ssl (but, if necessary, use STARTTLS)
Remarks: To make Gmail account work in claws-mail: use ssl for pop3 connection.

edit  ~/.claws-mail/clawsrc:
edit the line "ext_editor_command=emacs '%s'" to select your prefer external editor.


To install claws-mail, we need libetpan and gnutls 这两个库， 而gnutls又依赖libgcrypt库，
claws-mail--> libetpan
claws-mail-->gnutls--> libgcrypt

layout: 
libetpan安装在我的家目录/home/yj/installed/libetpan.(为了让configure找到这个库，除了用configure的选项--with-li-prefix=DIR 外， 我还手动改了configure文件中的代码，以让它找到 libetpan/bin目录中的可执行文件)
libgcrypt and gnutls这两个库安装在/usr/local目录中，（由于claws-mail的configure文件写的不够精细，
提供的选项无法使得安装在非标准位置的gnutls库被识别，所以最后我选择把gnutls库安装在标准位置/usr/local.
而且，我计划以后把自己编译的一些常用的库都安装在这个位置,以方便其他程序的configure脚本找到它们。)


--lyx cjk---:
1)Start LyX & run Tools/Reconfigure 
2) restart lyx and create a new file
3)In Document/Settings/Language, change the language to Chinese and change encoding to UTF8(注意是大写的，不是小写的）

lyx beamer: use beamer and my customerized beamer template: beamertinghua.sty
documetn/settings/article class : presentation (beamer)
documetn/settings/latex preamble : \usetheme{Tsinghua} % this corresponding a file named 'beamerTsinghua.sty'
in the working directory.


ssh yj@202.127.204.23
passwd: huyoujun
sshustc:
passwd: access

----NetCDF---:
compile sequence problem:
$ gfortran  simple_xy_wr.o -L /home/yj/installed/netcdf-gfortran/lib/ -lnetcdf 
The above compile command can get right result, however, the following compile comamand will not give right results:
$ gfortran  -L /home/yj/installed/netcdf-gfortran/lib/ -lnetcdf simple_xy_wr.o
The different is the sequence of the  libraries.
--ncdump:
The ncdump command-line utility converts netCDF data to human-readable form. e.g.:
$ ncdump lh_cql.nc >tmp.txt
-----------netcdf----


 



---beamer---:
一页放不下，自动放到下一页 加 [allowframebreaks] 选项：
\begin{frame}[allowframebreaks]{some Title}
要使图表有标号：
\setbeamertemplate{caption}[numbered] 
Use `pdflatex` command to complile the .tex file which using the beamer class.

----gnome related----
sloppy focus
1. Go into gnome configuration editor (type gconf-editor in terminal if you don't have a shortcut)
2. In the editor, go to: / -> apps -> metacity -> general
3. change the focus option to 'sloppy'

让gnome使用我指定的窗口管理器：
编辑 /usr/bin/gnome-wm, 
取定其中WINDOW_MANAGER变量:WINDOW_MANAGER=fvwm.


不可避免的需要把usb闪存或者cd等mount上来,需要命令行手动输入。

fat32的分区 
mount -t vfat -o iocharset=utf8 /dev/hda5 /mnt/x
ntfs的分区 
mount -t ntfs -o iocharset=utf8 /dev/hda5 /mnt/x    
iso文件 
mount -o loop /abc.iso /media/cdrom    
软盘 
mount -t vfat -o iocharset=utf8 /dev/fd0 /media/floppy
USB闪存 
mount -t vfat -o iocharset=utf8 /dev/sda1 /mnt/usb

可以指定文件格式"-t 格式", 格式可以为vfat, ext2, ext3等. 而iocharset表示字符编码，我用utf8编码所以这里iocharset=utf8, 若是用MS的GBK，则iocharset=cp936 
cdrom:
mount  loop /dev/cdrom /media/cdrom

### mac of printer computer
hwaddress ether 00:14:2a:3e:db:4a
#mac of my ibm laptop
#hwaddress ether 00:0a:e4:37:ec:ca
# mac of Qilong Ren
#hwaddress ether 00:21:86:13:c2:16


---makefile---

A general rule I find helpful is to always use immediate assignment (:=) unless I actually need recursive expansion (=) (which is rare).

# YouJunHu's makefile
# this makefile provides a good templete for writing makefiles:
NAME:=		toray
COMPILER:=	ifort
BUILDER:=	$(COMPILER)
F90SOURCES:=      precision_mod.f90 real_mod.f90  
f77sources:=gaussj_yj.for

F90OBJS:= $(F90SOURCES:.f90=.o)
f77objs:= $(f77sources:.for=.o)

COMPILE:=	$(COMPILER) -c -I $(INCLUDE) 
BUILD:=		$(BUILDER) -o $(NAME) 


$(NAME):	$(F90OBJS) $(f77objs)
	$(BUILD) $(F90OBJS) $(f77objs) $(LOCATION) $(LIBRARIES) 


$(F90OBJS): %.o: %.f90
	$(COMPILE) $< -o $@

$(f77objs): %.o: %.for
	$(COMPILE) $< -o $@

.PHONY : run clean tarfile merge

run: $(PROGRAM_NAME)
	./$(PROGRAM_NAME)
clean :
	 rm -f $(PROGRAM_NAME)  $(f90objs) $(f77objs) *.mod  
tarfile:
	tar -cf $(PROGRAM_NAME)_version`date +"%Y-%m-%d"`.tar makefile input.nmlt $(f90sources) $(f77sources) 

(*) makefile的赋值号":=" is the immediate assignment, while the assingment "=" is recursive assignment,，其仅在实际引用这个变量时才进行展开，
这两个赋值号意义正好于mathematic中的记号相反。
(*) Note that ${blabla} and $(blabla) are both used as variable expansion in makefile.
(*) 命令前加一个@ 则此命令不在终端显示。
You can define your own implicit rules by writing pattern rules.
The following is an example of defining pattern rule:
%.o:%.f      
	gfortran -c  $<  
# here the automatic variables '$<' stands for the first prerequisite (usually the corresponding sourse file)
The above rule indicates any file named 'your_name.o' depends on file 'your_name.f' 
and the corresponding commands to update is: gfortran -c your_name.f

Suffix rules are a more limited way to define implicit rules. The folowing is an example of defining Suffix rules:
.f.o:	$(srcs)    # $srcs  is a list of all the .f files 
	gfortran -c  $?
Here the automatic variables $? expands to: the names of all the prerequisites that are newer than the target, with spaces between them.

makefile 的 If 结构： 
    ibs_for_gcc = -lgnu
     normal_libs =
     
     ifeq ($(CC),gcc)
       libs=$(libs_for_gcc)
     else
       libs=$(normal_libs)
     endif
     
     foo: $(objects)
             $(CC) -o foo $(objects) $(libs)

Inference rules:
Inference rules generalize the build process so you don't have to give an explicit rule for each target. As an example, compiling Fortran 90 source (.f90 files) into object files (.o files) is a common occurrence as can be seen from the above example. Rather than requiring a statement that each .o file depends on a like-named .f90 file, make uses an inference rule to infer that dependency. The source determined by an inference rule is called the inferred source. Inference rules are rules distinguished by the use of the character “%” in the dependency  rule line of the makefile. Hence, one can give make a set of rules for creating files with a certain suffix from files with the same (or approximatelly the same) root file name, but a different suffix. For example, the following lines in the makefile:

    %.o: %.f90

        $(FC) -c $(OPTION) $<

tells make that all .o files are created from the corresponding .f90 files. The command that followed will recompile any .f90 file if it is newer than the corresponding .o file. Hence, this line uses the make internal macro  $<, which translates to the name of the first prerequisite


-----------------------end of makefile-----------------------------------------------


统计一个目录中的文件数：ls |wc -l

总结：在Linux下安装显卡驱动程序，首先要下载显卡支持Linux的驱动程序，再将其拷贝到/usr/X11R6/bin目录下，然后启动显卡配置程序进行配置即可。 

xorg X Window System server configuration file: /etc/X11/xorg.conf

Check it with:
$ shopt huponexit
huponexit off
(which indicat HUP on exit is disabled. 所以logout不终止后台进程。)
Enable it with:
$ shopt -s huponexit
$ shopt huponexit
huponexit on
现在logout后终止后台进程。
To disable again:
$ shopt -u huponexit
$ shopt huponexit
huponexit off


/etc/init.d/ directory  provides a way to 
 start or stop a process cleanly and without using the kill or killall commands. 
Each script in /etc/init.d/ can be run as a command and the structure of the command 
look like:
/etc/initi.d/command OPTION
for example  if you make a change to your network and need to restart it, 
you could do so with the following command:
/etc/init.d/networking restart

/etc/rc.local script provide a another method to start or stop the services.
This script is executed after all the initial process, you can put various command in it to control
various services such as things you want to do such as mount a nfs disk, and so on.

----rsync----
update the "tokamak_equilibrium" directory on shenma cluster:

$ rsync -avz --delete tokamak_equilibrium/ yj@hpc.ipp.ac.cn:/home/yj/public_html/research_notes2/tokamak_equilibrium/

Note that I include the trailing slash for the source directory. If the trailing slash was omitted, the result would be that a new tokamak_equilibrium directory was created under the existing destination directory "tokamak_equilibrium". (It does not matter whether the trailing slash of the destination directory is included or not.)
The same result can be obtained via the following command:
$ rsync -avz -delete tokamak_equilibrium yj@hpc.ipp.ac.cn:/home/yj/public_html/research_notes2/

Note that I do NOT include the trailing slash of the directory on the local machine. If I do include a trailing slash, the result is synchronizing the files in the remote directory research_notes2/, instead of its subdirectory tokamak_equilibrium,  with the local tokamak_equilibrium directory.

This difference for the case with and without the trailing slash is important especiallly when you use --delete option. So be careful.

A source directory name with a trailing slash means the content of the directory while a directory name without a trailling slash means the directory itself. Remember this difference, we can understant what rsync does. (It does not matter whether the trailing slash of the destination directory is included or not. The destination directory always behaves like a container)


[~/tmp]$ rsync -r --delete ttt/ yj@ipp:~/tmp
以上命令使得服务器上的~/tmp directory 和本机上的目录ttt/ 保持一致，这是单向模式，存在于目标目录而源目录中没有的文件将被删除.


[~/tmp]$ rsync -r --delete ttt  yj@ipp:~/tmp
Note, the above command, without the '/' at the end of directory name, will create a directory
named 'ttt' in the yj@ipp:~/tmp directory.
我用以下命令备份我的主目录到移动硬盘上：
rsync -r --exclude '.*' yj/ /mnt/sda2/


/usr/local       #put apps you build yourself here.
我把/usr/local目录的owner设为 yj, 以方便编译安装软件。
后来(2010-6-27)，我又改回来了:
# chown -R root local

Think of /usr/local as a 'safe haven' for command-line, open source, and similar utilities and programs you download or build yourself.



安装了一个lib, 顶层目录为libprefix, 里面一般有几个目录,如 lib/ include/ bin/
可以把这个库的路径告诉configure, 但有时候configure要用到 libprefix/bin中的可执行文件，
如果这个目录不在路径上， 就还要想办法让confiugre知道这个可执行文件的路径, 一种办法是要直接改configure文件中的代码。


gthumb: edit-->preference->browser-->hide/show-thumbnails, 默认没有打开thumbnail预览。
gimp:截图方法:
首先选择部分图像：
tool-select tool

edit-copy
paste as new file
最后还可以缩放：
tool--transform tool---scale

mount iso文件: 
mount -o loop ~/abc.iso /media/cdrom 

sudo mount  -o uid=yj /dev/sdb1 /mnt/usb

------mathematica---------:
*) "a->b" represents a rule that transforms "a" to "b"
For example, the roots that find by "FindRoot" is given in the form of a transformation rule such as "x->0.2".
To apply transformation rule to an expression, use:
expr/.lhs->rhs
for example:
	In: x^2 /. x->2
	Out: 4
Note that using a tansformation rule to a variable do not permanently change the value of the variable.

*) Do not use underline in Mathematica because it seems that the underline has special meaning in Mathematica

Clear a variable:
For example: Clear[x]
To clear all variables, use Remove["Global`*"] or Clear["`*"]

Define a function
In: f[x_] := x^2
Define the derivative of a function
In: fprime[x_]:=f'[x]
Note that the following definition does not work:
In: fprime[x_]:=D[f[x],x]
The reason is that := is a delayed definition (i.e.,only evlauated when it needs to be evlauated). When the right-hand side is evaluated, Both "x" and "f[x]" are evalued to be special values, mathematical will giving the error message "** is is not a valid variable"

'Assumptions' is an option for functions such as Simplify, Refine and Integrate 
which specifies default assumptions to be made about symbolic quantities. 
For example:
In:Integrate[1/(1 + a Cos[x]), {x, 0, 2 \[Pi]},  Assumptions -> a < 1 && a > 0]

A 属于 B 中的属于号 can be entered as \[Element].

Read and write file in mathematica
In:abc = ReadList["/home/yj/project/eccd06/srcs/tmp.txt", {Number, Number}]
This is to read a two collum data to a table called abc.
Then we can use the following command to plot the data:
In: ListPlot[abc]

Create a two-collomn table:

In: abc = Table[{x, f[x]}, {x, start, end, step}]

Write the table as two-collum date file
In:Export["/home/yj/math/out.txt", abc, "Table"]

数值求解一个微分方程：
s2 = NDSolve[{yy'[x] + b[x, j] yy[x] == -c[x, j], yy[0.001] == 0},   yy, {x, 0.001, 5}]
then use this numerical solution to construct a function:
One may use the following defintion:
In: my_fun[x_] := yy[x] /. s2
However the above definition gives a table instead of a value:
We must take the function value from the table:
In: my_fun[x_] := yy[x] /. s2[[1]]
where [[1]] is to take out the first element of the list. In this way we construct a proper function.

--install mathematica:
sudo mount -o loop ./TLF-SOFT-Wolfram.Research.Mathematica.v7.0.1.Linux-EDGEISO.iso01.iso /media/cdrom
cd /media/cdrom/Unix/Installer/
 ./MathInstaller

To save disk of my ibm laptop, I mv the install tarball: TLF-SOFT-Wolfram.Research.Mathematica.v7.0.1.Linux-EDGEISO.iso01.iso, 649M, to the ippp_cluster,  under the directory: /home/yj/project/installed/tarball/

mathemathic7.0:
lience: L7413-7573
pass:   1668-019-452
在下次到期时,用keygen产生一个新的lience和pass， 而不是重新安装。
步骤：到windows下运行keygen.exe产生一个licence号码，将它填入到mathematic窗口中，点击下一步，mathematic会给出一个mathid
然后将其回填到keygen.exe的窗口中去, 点击generate按钮从而产生一个passwd. 最后将该passwd填入mathematic窗口中。

----mathemathic end----

(windows下)k-mac.zip 改mac地址，选第二个interface. 就可以上网了

my latex:
\documentclass{article}
\usepackage{geometry,amsmath,amssymb,hyperref}
\geometry{a4paper}
\hypersetup{colorlinks=true}
haha
\end{document}
latex--latex---dvipdf
hyperref does not work properly with dvipdfm and dvipdfmx.

于治的 ip:  210.73.19.76
我的 ip:210.73.18.177
printer:  smb://lenovo-cd1da488/printer
set MANPATH variable:
export someplace/sss/man:$MANPATH
not 
export someplace/sss/man/man1:$MANPATH

2009-9-25 conference
能不能把盛政明老师的code拿过来?


regular expression:
否定：[^a-z]
例如去匹配一个word，可以用如下的正则表达式:
'[^a-z]yourword[^a-z]'
当然实际中我用  '\bmyword\b' 去匹配一个word.
where '\b' imply word boundary.

----toray---
2011-5-26: 
east: /home/ligq/east/eccd/gfiles/g013606.07104  works
using /home/ligq/east/eccd/gfiles/g013606.08103 , toray give zero power, current

compile: first modify  src/Makefile:
first add CPU=LINUX. this is to set appropriate fortran compiler
In file cofig/LINUX.config, 
set:
SPECIAL   = -Msave -byteswapio  #without this option, we can not read mhddat file correctly.
remove  the following  line( with it, cannot get to be comptable to netcdf, I don't know why):
OPTIMIZE  = -fast -tp p6

then modify the following statement acording the actual path of netcdf library:
INC = -I/home/yj/installed/netcdf-4/include
LIB =  -L/home/yj/installed/netcdf-4/lib -lnetcdf

toray's input file:  echin, {mhddat|psiin|eqdskin}, toray.in (a namelist file,optional), gafit.in ( GAFIT namelist input file needed when igafit=1 in toray.in)

The flux average of Lin-Liu's work is implemented by me in the subroutine TorGa_getpsi(nj,nw,gafsep) 
in getpsi.f90 file:
 <B^2/B0^2>
 <SQRT(1-B/Bmax)>
 <B/B0>
 <R0/R>


Note the difference of nx, nz,nw, nj:
nx,nz: computational x grid and z grid number
nw: uniform psi(poloidal flux) grid number
nj(or npts)  uniform toroidal flux grid number, also called transport grid number.
nj is specified in the 'fitdat' namelist. The default is npts=51.

Not that nw may be not equal to nj (or npts)

nw is defined in toray_grid_module.f90, this module contains a subroutine  toray_eqgrid_init
which is called in toray.f90 through 'call toray_eqgrid_init(nw=65, nh=65)', so nw get the value of 65. Then nw is passed to TorGA_read_psiin(jnw=nw), and finally to   TorGa_getpsi(nw=jnw). 
 nw=nx

j12 is the profile grid number:
In toray.f90, j12 is read in from echin, line2, collum 2, then pass to TorGA_gafit(npts=j12) ,
further pass to TorGA_read_psiin(npts=npts), further to  TorGa_getpsi(nj=npts) 


poloidal flux is related to toroidal flux by: d(toroidal flux)/d(poloidal flux)= safety_factor
fluxav12
gp==>bpmag


in gafit.f90

gafsep is  read in frome  namelist /fitdat/ ipsi, gafsep, dsrat, tolmap, percenflux,  &
this is done in TorGA_gafit, the namelsit fitdat is in the file gafit.in
In getpsi.f90, need adding something:

===>  TorGa_getpsi(nj=npts,nw=jnw,gafsep=gasep) 

TorGA_gafit==>TorGA_read_psiin===>TorGa_getpsi

psir(nj) is the poloidal flux on the transport grid. psir(nj)=psival(1)= poloidal flux at boundary
nj is the transport grid number
so nj and j12 is usually diferent.
btorus is b0
onetwo:
ech===>rf_mhddat===> wrt_psiin

--g eqdsk file:--
qpsi(nw):    q values on uniform poloidal flux grid from axis to boundary 
the quantity on line 2 and collomn 3 is rmajor_mk(major radius in unit of meter）

toray1.6不能读某些g-eqdsk file的原因在于：getgfai.f90的92行,应该加上一条语句：isgnbtor = 1, this line has been inculded in version1.8 of torayxs

x    - vector containing nx ascending abcissae
x(i)没取到值（全部为0）
x(i)对应  rho grid, normalized toroidal flux, rho

 number of radial grid points, nj, 即为number of tansport grid points, npts

错误出在：getpsi.f90  line 395: ierr=131
 call uertst_rep (ierr, isub)
调用关系：getpsi.f90-->getpsi()==>TorGA_intrp2==> TorGA_icsicu_rep

在paradm.i中可选择两种格点：(在用不同格点的g file时要选择使用其中之一)
1. 65x65 and 51 transport grid points
2. 129x129 and 201 transport grid points
The number of transport grid pts must be specified using 'npts' in the 'fitdat' namelist. The default is npts=51.

TorGA_read_psiin call getpsi
TorGA_get_cspln  CALL  ibcccu_rep
读完eqdskin 文件后 ，插值时出现错误的原因是  从eqdskin 文件中第一行读如的的nx=129大于65,读入语句如下：
  read (neq, '(6a8, 3i4)') (ntitle(i), i=1,5), vid, ipestg, nx, nz

下一步： 弄清楚eqdskin文件第一行数据的意义。


----end toray----

----
Converts A, E, G eqdsk files back and forth between ASCII and binary formats
---
make: warning:  Clock skew detected.  Your build may be incomplete.
1. It seems that the clock in the BIOS is not equal to the current system time. Change the time in the BIOS to the real time. Also check your timezone in your distro...
2.This message is normal if You use remote resources (linked via nfs).
Why?
Time on the nfs server and your workstations are different.
------------------------------------------------
--mplayer---
mplayer -vf rotate=2 filename.wmv
will rotate the image by 90 degrees and optionally flips it. For values between 4−7 rotation is only done if the movie geometry is portrait and not landscape.
0 Rotate by 90 degrees clockwise and flip (default).
1 Rotate by 90 degrees clockwise.
2 Rotate by 90 degrees counterclockwise.
3 Rotate by 90 degrees counterclockwise and flip.

But this seems to not work for mp4 files.

aptitude install: libopencore-amrnb-dev, then compile a new mplayer, so that mplayer can player 3gp format
--mplayer,字幕，字幕的字体，全屏: 指定输出设备 -vo x11
mplayer kiss-ap1-cd1.mkv -font  /usr/share/fonts/truetype/arphic/ukai.ttc -sub kiss-ap1-cd1.Eng.srt,kiss-ap1-cd1.chs.srt -ontop -zoom -subcp gb2312 -vo x11

以下的命令不能显示中文字幕，因为times.ttf 没有中文字体（也可能是因为times.ttf不是bitmap font)
mplayer kiss-ap1-cd1.mkv -font  /usr/share/fonts/truetype/from_windows/times.ttf -sub kiss-ap1-cd1.Eng.srt,kiss-ap1-cd1.chs.srt -ontop -zoom

In addition to the font, we should also pay attention to the encoding of the srt files. We can use enconv to dectect the encoding of the file, and if necessary, use iconv to convert the encoding of the file to the one you prefer.

选择了中文和英文字幕， 可以用j键在两者间切换。
j:Cycle through the available subtitles.
r and t:Move subtitles up/down.

To make th subtile and the video sync, use y and g:
y and g	Step forward/backward in the subtitle list. 

声音同步问题：

mplayer -autosync 0 -mc 0 <filename.flv>
经验证上述无效。
全屏时声音图像不同步，但窗口时声音图像同步！


disable erro output:
$somcommand 2>/dev/null

stdin(channel 0), stdout(channel 1) stderr(channel 2)
set one channel to another channel:
2>&1  #this is to set channel 2 to channel 1

$./out > file 2>&1  # this output the stdout and stderr in one file.
however the following command does not work:
$./out  2>&1 > file   
you should use:
$(./out  2>&1) > file   



在命令行写简单的文件：
$cat>filename
blabla
blabla
 C-d

xscreensaver  has a client-server model: 
the xscreensaver process is a daemon that runs in the back-ground; 
it is controlled by  other  foreground  programs  such  as  xscreensaver-command  and  xscreensaver-demo.
xscreensaver-command, is a command-line-oriented tool; the while the 'xscreensaver-demo'  program
is a graphical tool.





X Window System的启动过程，startx只是负责一些参数传递，真正的X启动由xinit实现。实际上可以分为启动X server和启动X client两部分。
startx脚本主要是置X client和X server所在的位置，并处理相关参数，最后交给xinit处理。
可以看出startx 设置X client的位置是先搜寻$HOME/.xinitrc，然后是/etc/X11/xinit/xinitrc；
设置X server的位置是先搜寻$HOME/.xserverrc，然后是/etc/X11/xinit/xserverrc。
至于xinit，则根据startx传过来的参数启动X server，成功后根据xinitrc启动X  client。

 To run startx and redirect its output to a log file, type:
      $ startx >$HOME/startx.log 2>&1 


echo $HISTFILE
echo $HISTFILESIZE

查看 本机 ip
[~]$ /sbin/ifconfig -a
inet addr:210.73.18.231  Bcast:210.73.19.255
sshblade:
yj       pts/1        Jun 30 08:47 (210.73.18.231)

file ' /etc/host.conf ' determine the order of  quey  in determine the ip adrress for a hostname.

The file '/etc/resolv.conf store the ip addresses of  nameservers
[~]$ cat /etc/resolv.conf 
search domain
nameserver 202.38.64.1
nameserver 202.38.64.7

[~]$ cat /etc/resolv.conf 
search ipp.ac.cn
nameserver 202.127.207.1
nameserver 202.38.64.1
系统启动时会自动检测DNS,并把找到的DNS的ip地址写入文件 /etc/resolv.conf
When I was in IFTS:
$ cat /etc/resolv.conf 
search SSG-520M
nameserver 10.10.2.53


lftp:
lftp >bookmark           #显示所有收藏
lftp >bookmark add 别名  #使用 别名 收藏当前站点

使用别名登录 ftp服务器：
$ lftp 别名  

ftp://用户名:密码@服务器地址:端口 [不写端口的 默认为21]
lftp  ftp://upload:upload@202.38.64.22
IPP cluster is a sftp, so I use:
lftp  sftp://yj:passwd@202.127.204.23

set the charset:
>set ftp:charset GBK
disable the passive mode(enable active mode)
>set ftp:passive-mode off

For example, when I was at USTC, I use the following commands to log in USTC's movie ftp:
[yj@blade1:~]$ lftp ftp://upload:upload@202.38.64.22
lftp upload@202.38.64.22:~> set ftp:passive-mode off
lftp upload@202.38.64.22:~> set ftp:charset GBK


Download a directory:
> mirror dirname
Upload a directory:
> mirror -R dirname
----------------------------------------------------------
cp:
Q:How to mirror a directory?
A: for example, you have a directory test, and want to backup it.
You can use: cp -r test/ test_backup/
Note: test_backup does not exist before you launch this command. Otherwise cp will
place the content of the original directory 'test' in the 'test_backup/test'


How to count file number in a directory?
$ls -1 your/directory/ | grep -c ""
or
$ls  your/directory/ | wc -l 




you may also need to rebuild X with just the server for your video card enabled
mplayer
mplayer -zoom -fs filename  # full screen
mplayer -zoom  filename  # press F to switch from fullscreen to window.

---laptop--
my IBM thinkpad R50e 1834 a27 hardware information:

Checking for CPU vendor ... GenuineIntel (6:13:8) 
Checking for CPU type ...  Intel(R) Pentium(R) M processor 1.60GHz 
Checking for Linux kernel version ... 2.6.25.4, ok 
Checking for DVD support (libdvdnav) ... yes (internal)
显示芯片 Intel Extreme Graphics2   
Intel 855GME集成显卡

In general, Intel graphics driver is well integrated in Linux distributions so users won't worry about the driver setup. It should work out of the box with recent distributions. 

显存容量(MB) 共享内存
音频系统 SoundMAX
内存类型 	DDR333

CPU information:
$cat /proc/cpuinfo
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 13
model name	: Intel(R) Pentium(R) M processor 1.60GHz
stepping	: 8
cpu MHz		: 600.000
cache size	: 2048 KB
fdiv_bug	: no
hlt_bug		: no
f00f_bug	: no
coma_bug	: no
fpu		: yes
fpu_exception	: yes
cpuid level	: 2
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 sep mtrr pge mca cmov pat clflush dts acpi mmx fxsr sse sse2 ss tm pbe up bts est tm2
bogomips	: 1199.89
clflush size	: 64


----网上给出的 R50e 1384-ECO  基本配置：

    处理器 英特尔® 奔腾® M 处理器1500MHz
    芯片组 Intel® 855GME 芯片组
    内存  256MB DDR
    硬盘 40GB
    图形加速器  内置于Intel® 855GM 芯片组
    显示内存 最大64MB(与主内存共用)
    显示器  14.1"液晶屏(1,0240x 768) TFT 彩色显示器
    外部连接 2个USB 2.0;并口;外置显示器接口; 交流适配器，RJ-11， RJ-45， 音频：耳机/音频输出，外置麦克风端口
    调制解调器  内置兼容V.92及V.90/K56Flex 协议56K 传真及调制解调器
    无线网络功能 Intel PRO/Wireless 2200BG
    网卡 内置10/100M以太网接口
    驱动器 COMBO光驱（8/24×16×24）
    音效系统  使用AC97芯片，兼容Windows 声音系统， 立体声扬声器 
    尺寸(宽高长) 约313 x 33(最薄部) x 260 mm
    重量  约2.576 kg(装有电池时)  
    操作系统 : Microsoft® Windows® XP Home Edition简体中文版

电池采用的是10.8V4.4AH的规格，在我们的实际测试中，整体的续航能力还是不错的。
link:
http://publish.it168.com/2004/0901/20040901002808.shtml
-----

$ dpkg -c xxx.deb   // 安装前根据deb文件查看
$ dpkg -L debname   // 安装后根据包名查看
$ dpkg --info  xxx.deb //查看包的信息
解开已有的deb包看其中内容
1.释放安装内容到dirname目录中:
$ dpkg -X xxx.deb dirname
2释放控制信息到当前目录下的DEBIAN子目录中
$ dpkg -e xxx.deb

find file which are modified between last 80-60 day, and the filename is ended with .tm:
$ find  /home/yj  -mtime  -80 -mtime +60 -iname '*.tm'
find  last modified time is within 80 days form now:
$ find  /home/yj  -mtime  -80  -iname '*.tm'




您已成功注册成为飞信用户！您的飞信号为844115661请牢记


(Reading database ... 131151 files and directories currently installed.)
Removing evince ...
Removing cmap-adobe-gb1 ...
Removing graphicsmagick-imagemagick-compat ...
Removing graphicsmagick ...
Removing groff ...
Removing guile-1.8-libs ...
Removing libgraphicsmagick1 ...
Removing libjasper1 ...

Removing librsvg2-bin .
Removing libtiff-tools ...
Removing mlocate ...
libjasper1  librsvg2-bin  libtiff-tools  mlocate transfig  xfig  xfig-libs 
Removing texmacs-common ...
Removing texmacs-extra-fonts ...
Removing transfig ...
Removing xfig ...
Removing xfig-libs ...
Selecting previously deselected package libkrb5support0.
(Reading database ... 124148 files and directories currently installed.)
Unpacking libkrb5support0 (from .../libkrb5support0_1.6.dfsg.4~beta1-13_i386.deb) ...
Replacing files in old package libkrb53 ...
Selecting previously deselected package libk5crypto3.
Unpacking libk5crypto3 (from .../libk5crypto3_1.6.dfsg.4~beta1-13_i386.deb) ...
Replacing files in old package libkrb53 ...
Selecting previously deselected package libkrb5-3.
Unpacking libkrb5-3 (from .../libkrb5-3_1.6.dfsg.4~beta1-13_i386.deb) ...
Replacing files in old package libkrb53 ...
Selecting previously deselected package libgssapi-krb5-2.
Unpacking libgssapi-krb5-2 (from .../libgssapi-krb5-2_1.6.dfsg.4~beta1-13_i386.deb) ...
Replacing files in old package libkrb53 ...
Setting up libc6-i686 (2.9-6) ...
Setting up libvolume-id1 (0.140-2) ...
Setting up locales (2.9-7) ...
Installing new version of config file /etc/locale.alias ...
Generating locales (this might take a while)...
  en_US.UTF-8... done
  zh_CN.GB2312... done
  zh_CN.GBK... done
  zh_CN.UTF-8... done
Generation complete.
Setting up libc6-dev (2.9-6) ...
Setting up libkrb5support0 (1.6.dfsg.4~beta1-13) ...
Setting up libk5crypto3 (1.6.dfsg.4~beta1-13) ...
Setting up libkrb5-3 (1.6.dfsg.4~beta1-13) ...
Setting up libgssapi-krb5-2 (1.6.dfsg.4~beta1-13) ...
Press return to continue.


Only list directory in current directory. 
$ls -d */   #option -d prevent the content of directory from being shown.

-------------gnuplot------------------------
loop:
do for [i=0:100] {
plot  exp(-((x-4)-i*pi/20)**2)+exp(-((x-16)+i*pi/20)**2) 
}

--use "epslatex" terminal----
create a file named plt.plt, which contains the following lines:
set terminal epslatex color size 3.7inch,2.1inch # the defualt size is 5inch x 3.5inch
set out 'plot.tex'
plot [-5:5] [-1.5:1.5] sin(x+pi) title "$\\sin(x+\\pi)$"
set output

then execute the following command:
$ gnuplot plt.plt
This will include a plot.tex file with all the labels, and a separate plot.eps file including the graphical elements. 
Then create a .tex file named 'a.tex' as follows:
\documentclass{article}
\usepackage{graphicx}
\begin{document}
\thispagestyle{empty}
\input{plot.tex}
\end{document}

Then:
$ latex a.tex
$ dvips -E -o a.eps a.dvi 
This will generate a.eps file

In this method, gnuplot transform all the drawing command to the corresponding tex command, and then invoke tex to generate all the figures and their labels.

To set a suitable size for the figure, which is suitbale for being viewed in usual computer screens, I choose to set this by setting "set terminal epslatex color size 3.7inch,2.1inch". I found that Setting in the above statement is better than setting by using "size ratio".


 plot "filename.txt" every 2::100::200 using 1:2 with line
This is to select every two rows of the data between 100 and 200 rows, and plot it


plot 'f_q2.txt' u 1:4 axes x1y2  # use the second y axis
Note by defaul the second axis has no tics, to enable y2tics, use:
set y2tics 
Rememer that you need to "set ytics nomirror", otherwise, the tics of the y1 axis will show on the y2tics, and this messes the y2tics.

set xlabel offset <x>,<y>,<z>
will move the xlabel along the postive direction of x-axis by <x>, and along the psitive direction of y-axis by <y>, and along the positive direction of z-axis by <z> 
where the unit for the moving distanc is one character width.


To use color-map, insead of white-black, in the "plot with image", use:
set terminal postscript eps color 

"Grid data file" in gnuplot is defined as such a file that consists of single-blanck-separated blocks of (x,y,z) data, and the number of rows in each block must be equal.
The default 'grid data file' indentified by gnuplot should have all the x values in each block equal and all the y values in each block increasing uniformly.
If a "grid data file" consists of scattered data sets, then we need to use "set dgrid3d <row_number>,<collumn_number>" to tell gnuplot that the data points are scattered and thus needs to be converted to a uniform "grid data", where <row_number> and <collumn_number> are set by users, the values of which  will be used to calculate the grid intervals of the grid dat file. The range of the x and y will be set (by gnuplot internal procedures) to the largest values of x and y in the raw data files. Then the intervals of the uniform grid are given by dx=xmax/<row_number>, dy=ymax/<collumn_number>.
The command I actually use is:
set dgrid3d 129,129 qnorm 4
where "qnorm 4" is to get a decsent fitting of the data by using a 4th-order interpolating scheme. For my case, if this option is omitted, the amplitude of the result is substatially reduced.


--------contour--template------------
set table "tmp.dat"  # this is a temporary file to store the date# this is a temporary file to store the date
set view 0,0
unset surface
set contour base
#The following is to say 'draw  one contour lines every difference of value 1 between 0 and 5
set cntrparam levels incremental  -0.15, 0.02, 0.15
#set cntrparam levels auto 10
#set cntrparam levels discrete -0.39777480199999998,      -0.37445731166666663,      -0.35113982133333332,      -0.32782233099999997

unset clabel  # I do not need the label
#refer my note or 'not frequently asked question' for the format of the date file 'contour.txt'.

splot 'xir2d002.txt' using 1:2:3 with lines title '' 

unset table

#the following is only a simple 2D plot:
 set terminal postscript eps enhanced defaultplex \
   leveldefault monochrome colortext \
   dashed dashlength 1.0 linewidth 1.0 butt noclip \
   nobackground \
   palfuncparam 2000,0.003 \
   "Helvetica" 14  fontscale 1.0 

 set output 'contour.eps'

 
unset key
#set yrange [ -15.7080 : 12.5664 ] noreverse nowriteback
set xlabel "R(m)"
set ylabel "Z(m)"
set tics out  # set the tics face outward
set xtics nomirror  # do not show the tics on the top x axis
set ytics nomirror  # do not show the tics on the right y axis
set xrange [1.2:2.5]
set yrange [-1.0:1.0]
set size ratio -1 0.5,0.5

set xtics 1.2,.4,2.4
plot "tmp.dat" using 1:2 w lines lt 1 lw 1 # -2.7999999999999998/2, 2.7999999999999998/2
--------contour--template------------


!set the xtic staring point at 1.2, interval 0.4, and ending point 2.4:
set xtics 1.2,0.4,2.4 

set xtics nomirror  # do not show the tics on the top x axis
set ytics nomirror  # do not show the tics on the right y axis

set table !to store the data in table format
One should use "set table", instead of "set term table " in gnuplot newer than version 4.2.0
and after finishing, we should use:
unset table !go back to normal mode, 
I found if this unstet is omitted and then use eps term to plot figure, an error will apear when viewing the eps figure by gv.

画一个箭头：
set arrow from 0,0 to 70,70
查看已经画出的箭头：
show arrow
取消编号为2的那个箭头：
unset arrow 2

point type for eps terminal
pt 1 点
pt 2 加号+
pt 3 乘号
pt 3 星号*
pt 4 小空方框
pt 5 小实方框
pt 6 小圆

plot 'root.txt' u 1:2 w p pt 7 ps 0.3
!here ps is the size of the point

# set term to eps and set the output filename
set term postscript eps enhanced
set output 'tmp.eps'
save "output.plt"

when use log tic, set the y tic format to form: 10^x
>set format y "10^{%L}"

(*) set the sample points:
 set samples 400
(*) set multiplot layout 2,1  

(*) edit the source code of gnuplot to disable startupt greeting message: commenting out several lines in show.c.
(*) set size ratio -1 0.5,0.5 #here -1 means gnuplot will try to set x and y axis so that the same number difference will have the same length on both the x and y axes

最佳的尺寸选择！ 最佳缩放比例： set size ratio 0 0.5,0.5
set size ratio 0 0.5,0.5  # this may be better than  the following.
#set size 0.4,0.4 


To set the bottom margin:
set bmargin {<margin>}
where the units of <margin> are character heights.
Proparly setting bottom margin can set proper space for the label on the x axis.

input greek character in eps term:
set ylabel '{/Symbol c}'

column : $1, $2, $3 ...
for example: plot 'data' u 1:(($2)*2.0)

一个文件中可以有几个数据块，数据块间用两个空行分割。
可以用index n 引用。（n=0,1,2,3....)
例如：plot 'file' index 0 using 1:2, 'file' index 1 using 1:2

(*) select index:
 plot 'file' index <m>:<n>:<p>  using 1:2
here `index <m>:<n>:<p>` selects indices <m>, <m>+<p>, <m>+2<p>, etc., but stopping at <n>. 

A line can have a line style (ls), a line type (lt), and line width (lw)
four line types: solid, dashed, dotted and dot-dashed. 
The number 1, 2, 3, and 6 are binded to them in the postscript terminal
line width : 1,2,3 for thin,middle,thick.
定义一个line sytle:
set style line 8 lt 1 lw 1   #这定义了一个line style 8 它的line type 为1(即solid),linewidth为1(即thin)的线。
用上面定义的line style 8画图：
plot sin(x) with line ls 8


gnuplot contour from data file: (refer 'not frequentlly asked question' for the data file format) 
gnuplot> set contour base  # I need  contour
gnuplot> unset surface   # I do not need  surface
gnuplot> set view 0,0 # set view ( in this case, it is  bird view)
gnuplot> set cntrparam levels incremental -1, 0.2, 1  #set the contour level
gnuplot> splot "az.dat" using 1:2:3 with lines

There are three methods that you can choose to specify how the contour lines should be drawn:
gnuplot> set cntrparam levels 10  # this is to say ' I need only 10 lines'
gnuplot> set cntrparam levels incremental -1, 0.2, 1 #this is to say draw  contour lines every 0.2
 inteval between -1 to 1,  
gnuplot> set cntrparam levels discrete -0.2, -0.5, 0.2, 0.5  # this is specify the discrete value
for which you want the contour line be drwan.

refer to ~/source_code/my_contour_templet.plt for a complete .plt file for drawing contour.

gnuplot contour from function:
gnuplot> unset surfa # I need  contour
gnuplot> set contour   # I do not need  surface
gnuplot> set view 0,0   # set view ( in this case, it is  bird view)
gnuplot> splot log(cosh(x))+1.0*(1./cosh(x))**(0.5)*sin(0.5*y)  # now plot 


gnuplot symoble: 参看文档：/home/yj/install_source/gnuplot-4.2.3/docs/psdoc/ps_guide.pdf
{/Symbol \136}  is the perpendicular sign. 注意 要放在单引号内（不是双引号）.
{/Symbol \174} is a short line, 两条这样的线可以合成一个平行号.(出来的效果非常好）
如果用{/Symbol \275}则效果非常糟糕。
partial derivative: {/Symbol \266}


 If you are working on Unix or Linux, and your system has GhostScript, probably you have ps2ps, eps2eps  commands. Those shell scripts convert your PostScript graphs generated by gnuplot into more proper PS file. You can adjust your BoundingBox with the following command.

$ eps2eps input.eps output.eps
这可截取多余的空白边,但图像质量下降很多。

One guys on website http://stackoverflow.com said:
"I also crop the Bounding Box afterwards, since I hate playing around with margins in gnuplot. I realized that somehow, eps2eps indeed does adjust the bounding box, but it also transforms text (labels etc) into pixel-graphic?!
I usually use "epstool" which conserves text as text when croping the bb, the command I use is:
epstool --copy --bbox in.eps out.eps
"

--epsmerge---
Now, I use latex to merge multiple .eps files into one figure. This solution provides more control over the layout.
An example of the .tex file for merging the eps files is as follows:
\documentclass{article}
\usepackage{graphicx}
\begin{document}
\thispagestyle{empty}
\begin{figure}[h]
  \includegraphics{/home/yj/project_new/read_gfile/fig110/p3.eps}\includegraphics[scale=0.7]{/home/yj/project_new/read_gfile/fig110/p4.eps}
\end{figure}
\end{document}

Run the following commands to generate the final .eps file:
$ latex merge.tex 
$ dvips -E -o merge.eps merge.dvi #output .eps file
where the option -E is to ask dvips to attempt to generate an EPSF file with a tight bounding box

!水平排列
epsmerge  --stack  -x 1 -y 2 -o out.eps in1.eps in2.eps in3.eps  
 ！垂直排列
epsmerge  --stack  -x 2 -y 1 -o out.eps in1.eps in2.eps in3.eps 
其中 --stack选项作用是：把图形堆放在一起（不改变纵横比）

gnuplot 生成的eps 引入到latex文档(ustctheme.cls)后，caption 总是和图有重叠。
Solution: 用epsmerge处理eps图形，用上面所说的--stack选项。
Possible cause：gnuplot 4.0 patched level 0 used at IBM blade machine is too old.
Update: gnuplot 4.2 patched level 3 still has this problem.
It is the ustcthesis.tex that causes this problem! 

Compile the gnuplot source 
Purpose: To replace the buildin readline lib with the GNU readline lib.
First, intall the GNU readline and history libraries:
#apt-get install libreadline5-dev
Then configure with the redline  set to gnu readline
$ ./configure    --with-readline=gnu    --without-lisp-files
(For some unkonwn reason, it seems the makefile can not compile the lisp files, so I choose not to
use the lisp files.)

some output:
configure: WARNING: wxWidgets can't be found. You can try --with-wx-config-path to give the right 
path to wx-config. The wxWidgets terminal will not be compiled.                                  
  Readline library: GNU readline library with  -lncurses
$make
#make install
Done!

install gnuplot for another time: 
install libgd2-xpm and libgd2-xpm-dev library to enable the gif terminal
./configure   --with-readline=gnu  --without-lisp-files --prefix=/home/yj/installed/gnuplot4.2.3_second/
make 
make install

install gnuplot third time, this time is the lastest version 4.6.2.



---emacs---
Use C-x C-f open remote file:  /yj@ipp:~/public_html/free_software.html
Both "C-c ;" and "M-;" can be used to comment fortran code, but the way the code is commented is different.
And "M-;" can also be used to comment shell scripts

The site: http://xahlee.org/emacs provide good tips on Long Term Emacs Productivity.
emacs word search
`C-s <RET> C-w WORDS <RET>'
     Search for WORDS, ignoring details of punctuation.

`C-r <RET> C-w WORDS <RET>'
     Search backward for WORDS, ignoring details of punctuation.
undo: C-x u, C-_, C-/  do the same job, 
I prefer C-/, because it is easy to type.
Note M-/ is a command to auto-complete a word.
Shift-insert can produce different content from middle-button.! why?


C-h k runs the function: describe-keyl
C-h f runs the function: describe-function
C-h w runs the function: where-is

C-/   undo
C-x h Select All
-----------

-----------Fortran--------------
Fortran Edit Descriptors
(*) the 'p' descriptor:
Let us see some examples:
a=10.
write(*,'(0pe14.5)') a !the output is 0.10000E+02
write(*,'(1pe14.5)') a !the output is 1.00000E+01
write(*,'(2pe14.5)') a !the output is 10.0000E+00

(*) editor descriptor iw.m , where w specifies the width, m specifies the minimum number of digits to output. For example, the integer 37 printed using the edit descriptor ‘i5’ will appear as bbb37 (where b denotes a blank) and when printed using i5.3 it will appear as bb037.
the descriptor "ES12.6E4", where "S" indicates the use of scientific format, "12" specifies the total collum for the output, "6" specifies the the number of digits to the right of the decimal point, "4" specifies the number of digits in the exponent part 

(*) mod(a,b) returns the remainder of a/b
(*) sign(a,b) returns sgn(b)*abs(a)
(*) cpu_time return the cpu clock, which can be used to estimate the time, thus is useful to evaluate the efficiency of a algorithm
  real(p_):: tarray(2) !record the cputime
  call cpu_time(tarray(1))
  ...some codes here ...
  call cpu_time(tarray(2))
  write (*,*) 'CPU time used (seconds)', tarray(2)-tarray(1)

(*) types of array (which are formal arguments)  in subroutine: adjustable size, assumed-Shape, assumed size, deferred-shape
(*) fortran store elements of a matrix by the order of the collumn (collumn is defined in the usual way we encounter in mathematical books)
(*) Fortran pass a argument by reference  while standard C pass a argument by value (even when the argument is a pointer).
(*) The EXIT statement is a useful facility for transferring control outside the DO loop before the END DO is reached. After an EXIT statement has been executed control is passed to the first statement after the loop. The CYCLE statement is transferring control back to the beginning of the loop to allow the next iteration of the loop to begin.

(*) The option advance='no' suppresses linebreak so that different write statements write their contents on the same line.
For example: the following two write statements
write(*,*,advance='no') a
....some other codes here.....
write(*,*,advance='no') b
will write a and b on the same line.

(*) "selected_real_kind(p,r)" returns the kind value  of a real data type with decimal precision of at least p digits and a exponent range of at least r. If more than one real data type meet the criteria, the kind of the data type with the smallest decimal precision is returned. If no real data type matches the criteria, the return value is:
    * -1 if the processor does not support a real data type with a precision greater than or equal to p
    * -2 if the processor does not support a real type with an exponent range greater than or equal to r
    * -3 if neither is supported.

(*) fortran command line parameters:
character*10  argv
  INTEGER:: i, iargc, n
  n = iargc()
  do  i = 1, n
     call getarg( i, argv )
     write( *, '( i2, 1x, a )' ) i, argv
  end do
end

    * The IARGC function returns the number of command line arguments: 
N = IARGC () !    Sets N to the number of command line arguments
    * The GETARG subprogram returns the value of a specified argument: 
CALL GETARG(I , STR) ! Puts the I'th argument into string STR


call shell command from fortran code:
Fortran intrinsic subroutine "system(command)" where "command" is a character variable containing the desired command.
call system(command) , where command is of character data type
e.g call system('ls')

Fortran has the equivalent of Unix file descriptors: UNIT=5  for stdin, UNIT=6 for stdout and UNIT=0 for stderr.


把数组写在文件中同一行：
  open(30,file='abc.txt')
  write(30,*) (a(i),b(i),i=1,m)  
  close(30)

format(\)  !换行符
format(a)  ！输出整个字符串
format(a4) ! 把接下来的字符串的前4个字符作为字符串输出。

------------------programming notes start----------------------
(*) the first check of a new written code is to verify that the formal arguments and actual arguments match each other.
The Fortran compiler can not find the mimatch between formal arguments list and actual arguments list.

(*) In order to make the code written by me able to be reused in future, try to write every program as a subroutine.

(*) integer(p_),intent(in)::m
By mistake, I set the kind value of a interger to be the one of a float number. 
the compiler can not dectect this error because integers can also have its kind value
but the value should be less than 16, if p_=16 in this case, the integer stored will be wrong!

在传递实参给函数时，如果形参要求是双精度，而传递的实参是单精度时，运算结果将出错（gfortran)
这种情况很容易被忽视，导致运算错误: 当实参是个常数，例如写成1.2, 这种写法暗含了实参是单精度的，这样传递给函数就要出错，

gfortran options:

-fbounds-check
:    Enable generation of run-time checks for array subscripts and against the declared minimum and maximum values. It also checks array indices for assumed and deferred shape arrays against the actual allocated bounds. 

2010/6/5
Make sure the kind values of actual parameter and formal parameter are identical.
For example, if actual parameter 'A' is defined by
real:: A    
and the corresponding formal parameter is defined by
real(p_):: A  !where p_=16
When passing this actual parameter to formal parameter, you will get wrong results.
(The gfortran/ifort compiler do not check this mis-match when linking the code)

检验程序中复杂公式中是否有键入错误的方法：
与其一遍遍检查找错，不如重新键入公式代码, 对比新老版本的结果，如果相同，则公式中有错误的概率很小（两次犯同样错误的概率很小）
如果不同，则对比两次的键入，找到不同处，进而改正错误。(2009/12/4)

2009/10/20
计算电导的fokker-planck程序一直不能达到稳态解，其原因是演化的时间不够长，
（要达到几百个碰撞时间以上才能达到稳态）。由于计算中q的值较大让我误认为算法不稳定q的稳态不存在。


Fortran 中一个容易犯的错误是： 把 **(power) 误写为 *

2009-10-4
1d fokker-planck code: super-gauss distribution go to gauss distribution through electron-electron collision.
我把摩擦系数前的负号丢掉了，结果导致结果不正确，今天改正过来后，结果对了！

打开文件， 写/读完后要关闭，否则一些情况下会导致写的文件不完整。

从奇异值分解得出的奇异值的分布情况可以看出矩阵是否真的奇异了，这可以进一步用来verify牛顿迭代确实是把行列式赶向了零。

A mistake corrected at 2008-12-26:
When pass array between subroutines, Make sure the actual array and the formal array has the 
same shape and size, otherwise, you may get wrong results!
Why is it so?
Becuase Fortran pass a argument by reference.
It took at least six days for me  to find out this mistake in the tearing_finite_element program!!


A mistake corrected:
In computing tearing mode, the orbit integrand has a infinte sum, which can be calculated by
including  many (but finite) terms in the sum. The term should start from index zero, NOT one
It took much time for me  to find out this mistake in the program.

two guidelines:
1.In subroutine, use intent(in) and intent(out) to clarify the input and output quantity.
2. when use variables in a module, use "use module_name,only: a,b,c" to clarify which variables are actually used.

把一个单精度值赋给一个双精度变量，其在转换过程中有很大误差。
例如a是一个双精度的变量，把单精度值0.8赋给它：
integer,parameter:: p_=kind(1.0d0)
real(p_):: a
a=0.8
write(*,*) a
从输出情况知误差很大, 可能小数点后第三位即出现不同,有时可以精确到更多的小数点位，但都没有用a=0.8_p_准确

ifort:编译时检查太宽松，一些很重要的检查都不做，例如 数组下标应该为整型，
ifort在连接时，不检查函数形参实参的类型，个数匹配, 这个很容易引起错误。

有时运行时出现很奇怪的结果，例如明明应该给出相同结果的情况却给出不同结果。

ifort: 当实参与形参分别为单精度与双精度时，编译和连接时不报错，但运行结果错误。
形参与实参的个数不一致时，ifort与gfortran编译时都不报错,运行时出错：
gfortran给出Segmentation fault
ifort有结果，但结果不正确。

形参与实参类型一定要一致（包括kind值），编译时ifort不检查是否匹配，
若不匹配，运算结果错误，切记! 切记！！

Fortran pass a argument by reference, so,  
(1) when the the number of actual argument is less
than the formal argument, the segmentation fault appear.  This is a common mistakes/pitfall, remember it.
(2) when the number of actual argument is more than the number of formal argument, no segmentation
falut appear. The redundant actual arguments will be ingnored.

粒子的初始位置不能为0，要稍偏离一点，例如：xx(1)=0.00001
当初始位置为0时，计算中会出现nan.


复奇异值分解：a=u*s*(v**H)
其中a，u,v为 m-x-m复矩阵，s为对角的m-x-m实矩阵。v**H表示矩阵v的hermite共厄（即先转置再共厄）
想要的结果：找到s矩阵对角元为0(实际中不严格为零，但小到机器精度，例如双精度时约为10^(-12)）的位置, 这个位置的行号(或列号）对应的矩阵v的列向量是null空间的基矢，
null空间的基矢即为以a为系数矩阵的齐次方程组的所有线性无关的非零解。
注意事项：有的程序(例如lapack中的ZGESDD与CGESDD子程序）返回的矩阵是v**H而不是v,这时为了得到null空间的基矢，应该对得到的矩阵作一次共轭操作得到新矩阵L，然后取出s的矩阵元为零的序号所对应的L矩阵的行即为到null空间的基矢. (实例见/home/yj/project_new/finite_element_eigenvalue/main.f90)


本征函数计算准确的关键是本征值要准确（准确到小数点后8位）,最小奇异值要小到机器精度(双精度时为10^(-12))
本征函数的宇称已经计算正确（ax偶，ay,fai为奇）,但虚部与daughton的差一个负号。

后来发现当基函数的数目大于8时，本征函数发生巨大变化。
2008-3-7
一个困扰我很久的问题：当基函数的数目大于8时，本征函数发生巨大变化.
解决：原因是:调用lapack的函数ZGESDD作奇异值分解时，数组RWORK 的长度要为5*m*m + 7*m,以前我取为2000
这当m＝3*nb大时不行。

Debugging Segmentation Faults

If a program gets a segmentation fault (SIGSEGV), 
it references a memory address outside of the memory available to it.

The most frequent causes for a segmentation fault are:

    * An array index is outside the declared range.

    * The calling routine has fewer arguments than required.(in fortran)

    * A pointer is used before it has been defined.
 
    * 在含有contain函数的程序中，把contain 的函数名作为形参传给外部函数使用，这也会出现segmentation fault.


y=a+b*x**2+c*x**3+d*x**4
To make the operation to be minimized, this polynomial should be coded like the following:
y=a+x*(b+x*(c+x*d))

basic struct: a+x*()
-------------------programming notes end----------------------

---Remarks on Fortran--
Some People says that C laguage will supress/replace fortran language in future in the field of numerical calculation.
It seems to me that this point is not justified and Fortran will continue growing and dominating in the field of numerical calculation. The reason is as follows:
Fortran is designed particulaly for the purpose of numerical calculation, while C Laguage is designed for more general applications. "Do one thing and do it well" is one of the philophies of Linux. Using a Language designed for numerical calculation in numerical application is consistent with this philosiphy. Although numerical operation is a general operation, for modern numerical calculation, the internal parallel machcanism is important for improving the efficiency of numerical codes. Numerical mathematics will care more for the development of the strength of this machnism than the computer scients (user of C language).

not finished.....


----Metapost----
command: epstopdf

  p := halfcircle scaled 5mm rotated 180;
  drawarrow p xscaled 1.5 shifted (0,-5u);

pair a;  ! define point variable
pair a[];  !define point array
path a;   !define path variable
path a[]; !define path array
draw path_name
drawarrow  path_name
draw 1/2[A,B] -- C;  !draw line from middle point of line segment AB to point C
draw (0,0) .. (0,1cm) .. (1cm,0) .. (1cm,1cm); !use smooth line to connect point

Method 1: 处理metapost生成的含文字的eps文件：
1. create/edite .mp file to draw the figure.
2. generate the eps file using metapost:
   $ mpost file.mp
3. create the following tex.tex file to include the eps file:
\documentclass{article}
\usepackage{amsmath}    % need for subequations
\usepackage{graphicx}   % need for figures
\begin{document}
\thispagestyle{empty}
\includegraphics{mp.eps}
\end{document}
4. use the following command to generate tex.dvi
$ latex tex.tex
5 use the following command to gernerate .eps file
$ dvips -E -o MyFigure.eps tex.dvi 
Now we get the file MyFigure.eps  which contains the labels(characters), Done!

Method 2: 
~/bin/mp2pdf file.mp  #可生成pdf格式的图形文件。
------------------


Re-invent the wheel  is sometimes nessary!
Write code from scratch.

在~/.bashrc里面加了一句 stty -ixoff -ixon 使得bash不拦截ctrl-s。

I prefer to install program from soure code following the precess: 
./configure --prefix=/home/yj/installed/texmacs  && make && make install
This has the advantage that I can use --prefix to set the install directory.
And this make me know exactly where all the files of the program are located, and does not
mix up with the other program's files. 
And this make that uninstalling a program is simply deleting these files.


XeTeX and pdftex works well with both LaTeX ,ConTeXt and ctex  macro packages
dvipdf is too old, is replaced by dvipdfm. and dvipdfmx is an eXtended of dvipdfm.

# to use the color theme defined in file ~/.dir_colors
eval `dircolors $HOME/.dir_colors`
alias ls='ls -F --color=auto'

ls only directories:
$ls -d */
you can use several */ to get deeper, like this:
$ls -d */*/


xterm -ls -fg gray -bg black 
option -ls indicate a login shell will be started in this xterm window.


linux-to-connect windows: rdesktop ,vnc

sshd, the daemon that handles handles incoming SSH connections.
The way to do stop sshd is:
# /etc/init.d/ssh stop 

Adobe Reader(both for Windows & Linux) 是能对被
 "enable 了 commenting and analysis" 的 pdf 文档作注释的.
如果你发现你的 Adobe Reader 在 Linux 下无法对 pdf 文档做注释,
 一般不外乎两种原因:
1. 这个文档没被 Enable commenting and Analysis for Adobe Reader.
2. 你的 Adobe Reader 没有安装 commenting plugin.

re，我第一次发现这个是杂志给的清样，在linux下打开发现居然可以注释，搜了一下发现
这个功能，acrobat pro可以将文档"Enable commenting and Analysis for Adobe Reader"

--wget--
`-c` or `--continue'   !Continue getting an existing file. 
This is useful when you want to finish up the download started by another program, or a previous instance of Wget. Thus you can write:

    wget -c ftp://sunsite.doc.ic.ac.uk/ls-lR.Z

    If there is a file name `ls-lR.Z' in the current directory, Wget will assume that it is the first portion of the remote file, and will require the server to continue the retrieval from an offset equal to the length of the local file. Note that you need not specify this option if all you want is Wget to continue retrieving where it left off when the connection is lost--Wget does this by default. You need this option only when you want to continue retrieval of a file already halfway retrieved, saved by another FTP client, or left by Wget being killed. Without `-c', the previous example would just begin to download the remote file to `ls-lR.Z.1'. The `-c' option is also applicable for HTTP servers that support the Range header.

`-p' `--page-requisites' This option causes Wget to download all the files that are necessary to properly display a given HTML page.  This includes
       such things as inlined images, sounds, and referenced stylesheets.

wget -r -l 2 -p http://SITE/1.html
where -r turn on recursive retrieving
and "-l 2" specifies the recursion maximum depth level

The above command will retrieve  two levels of the page 1.html and download all the pages' inline requisite (such as image)
I use this to obtain a local copy of html version of Richard Fitzpatrick's lecture notes:
wget -r -l 2 -p  http://farside.ph.utexas.edu/teaching/plasma/lectures1/index.html

To know the distribution version:
$ cat /etc/issue
$ cat /etc/debian_version 
$ cat /proc/version
Keep in mind that a distro is simply a kernel plus a set of packages that the distro creator decided to includ.

To schedule jobs in linux, you have two choice:
First choice: You cna use `/usr/bin/crontab` command to add a job:
$ export EDITOR=emacs   !use my favorate editor
$ crontab  -e            !now edit the crontab to add new tasks. This actually edit content of the file located at /var/spool/cron/crontabs/your_username. However direct edition of this file is
not desirable.
crontab file format:
*     *     *   *    *        command to be executed
-     -     -   -    -
|     |     |   |    |
|     |     |   |    +----- day of week (0 - 6) (Sunday=0)
|     |     |   +------- month (1 - 12)
|     |     +--------- day of        month (1 - 31)
|     +----------- hour (0 - 23)
+------------- min (0 - 59)



The second choice is to use the system-wide file '/etc/crontab'. Different from the first case, you can directly edite this file to add a new job if you has write permision to this file. 
Another Difference from the user-specific crontab file (/var/spool/cron/crontabs/your_username) is that the format in '/etc/crontab' has a username entry since it needs to know who are requiring the job.


list all users in the linux box:
 cat /etc/passwd | cut -d":" -f1

----------------
*) Creating a new group: 
 Manually add the group definition by aditing the file /etc/group and include the user to be added in the group, such as
yjweb:x:1002:yj


*) Add an existing user to a group: 
edit /etc/group Syntax is:
cdrom:x:22eterh,charles

The user of course has to exist or you'll have problems...

Command-line tools:
useradd and groupadd

well I see many answered to the listing users, but not so clear answers to adding an existing user to a group (no offense); you can do this by using the "gpasswd -a user group" command.

*) To see which groups a user belong to
$  groups <username>


 ssh  test@210.45.72.46
/usr/sbin/adduser

change the owership of somefile to username:
$ chown username somefile
change the groupship of somefile :
$ chgrp username(groupname) somefile



编译用fftw库的程序(此处的fft.cpp用到fftw库)要在命令行指定连接fftw库。
同时程序源文件中要包含其头文件：#include <fftw.h>
g++ fft.cpp wave.cpp -lfftw -lm 


求解Reimman问题就是做间断分解


应该把/var单独挂一个分区

Future Plan:
particle in cell simulation
MHD simulation (首选双曲问题的finite volume method， WEN0格式也可尝试)

查看某个目录内容的的大小:
 du -sh dir_name

Fvwm
make button have the style of titlebar:  -- UseTitleStyle 
for example:
ButtonStyle 6 ActiveUp Vector 4 30x30@3 60x60@3 60x30@4 30x60@3 -- UseTitleStyle Flat

ButtonStyle 之后的数字是按钮编号
Vetore之后是画图标的绘图语句。第一个数子表示一共有多少个坐标点。后面的XxY@C中的XxY是坐标,
 左上角的坐标是(0,0) 右下角的坐标是(100,100)。@C 表示颜色, C是一个数字，0 表示阴影色，1 是高亮色，2 是背景色，3 是前景色，4 是移动光标而不画线。

键绑定：
Key Keyname Context Modifiers Function
for example:
Mouse 3 R A Menu FvwmWindowOpsMenu
即是在根窗口(R表示root)中按鼠标右键(A表示any即不需要任何modifier)则调出名叫FvwmWindowOpsMenu的菜单。
FVWM
Q:What is a 'modal window'?
A:A modal window blocks all other work-flow in the program until the modal window is closed
Q: How to keep a modal window always on the top of its parent window?
A: You can add this code to the config files: Style *  RaiseTransient



   If you want  FVWM decorate the modal window(i.e, add a title bar to the modal window),
   you can use:
   Style * DecorateTransient, RaiseTransient

如果出现系统时间不对，那么需要修改。查看
$ date
修改时区用
# tzselect
或者
# tzconfig
修改时间用
# date -s hh:mm:ss



5.30 若要手动修改ip
vim /etc/network/interfaces
比如我这里是静态ip:
iface eth0 inet static
        address 210.45.124.81
        netmask 255.255.255.0
        network 210.45.124.0
        broadcast 210.45.124.255
        gateway 210.45.124.1
        dns-nameservers 202.38.64.1

aptitude安装resolvconf使得dns-nameservers有效。 

rxvt:
Middle_mouse : PRIMARY selection
Shift-Insert:  PRIMARY selection  
Meta-Middle_mouse:  CLIPBOARD

/sbin/ifconfig -a
eth0      Link encap:Ethernet  HWaddr 00:0a:e4:37:ec:ca  
本机MAC 地址: 00-0A-E4-37-EC-CA	 private ip: 192.168.1.101

更改网卡MAC地址: 
1. emacs /etc/network/interfaces

2.找到下面这句,一般来说默认第一块网卡叫做eth0,这依你实际情况而改变
auto eth0
iface eth0 inet dhcp
3.加入一行你要更新的MAC地址
auto eth0
iface eth0 inet dhcp
hwaddress ether 00:0a:e4:37:ec:ca
4.重启网络服务就好了
/etc/init.d/networking restart
完成！可用以下命令来确认Hwadrr的值确实改变了:
/sbin/ifconfig -a

把scim设置成goole的打字风格：
在scim的选项中先把“FrontEnd”－“Global Setup”的
“(Embed Preedit String into client window)将预编辑字符串嵌入到客户窗口中”的勾去掉，再将“输入法引擎(IMEngine)”－“Smart Pinyin”
的“Auto fill preedit”的勾去掉
这样scim就也有了google的打字风格了！

modified by me: disable dynamic change

A: When I run ./configure , I got the following error information:
Package scim was not found in the pkg-config search path. Perhaps you should add the directory containing `scim.pc' to the PKG_CONFIG_PATH environment variable 
No package 'scim' found
configure: error: Library requirements (scim >= 1.2.0) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them.
Q: in this case, you need install scim-dev library, then you'll have a scim.pc in the diretroy: /usr/lib/pkgconfig



在结构间移动光标。
C-M-a, C-M-e
C-M-f, C-M-b
C-M-n, C-M-p

top
in top, type "1" to see all the cpus.

优化mpi code   !成功
在ustc新机器上装Debian  ！成功
集成网卡不能被识别。 解决方法：换装了一个老的网卡。
硬盘不能被识别。 ！用新编译的内核来安装(内核是ustcbbs/linux版网友编译好给发email给我的）
进不了bios  !放电
intel Dg43nb motherboard

制作新的引导内核：
另一台机器上编译好新内核，然后把testing的net install引导文件给整合一下，其实也就是重新把initrd打包了一下。

--Build a two-machines cluster
Needed software: NFS,MPICH2
I have two machines in a private net:
machine A (ip address: 192.168.103)
machine B (ip address: 192.168.102)
Now begin our work:
Install NFS server on machine A.
1.aptitude Install nfs-user-server.
2. edit or create  /etc/exports, add:
/home/yj        192.168.1.102
This makes the /home/yj directory on the machine A be able to be mounted by other machines.
3 then restart nfs service:
debian:/# /etc/init.d/nfs-user-server restart

On client side(machine B), we can now mount the server's /home/yj on a mount point:
#mkdir /home/yj
# mount 192.168.1.103:/home/yj /home/yj
Or auto-mount at boot time: add in /etc/fstab
192.168.1.103:/home/yj /home/yj nfs rw  0 0
syntax: <server>:</path/of/dir> </local/mnt/point> nfs <options> 0 0

Then create user acount 'yj' on machine B:
#adduser yj
System detect that the /home/yj directory already exist, so use this as the home directory 
and not copy any files into this direcory.
If the uid and gid of 'yj' on machine B are identical to the uid and gid of 'yj' on machine A, 
the jobs are done. If not, change uid/gid to make them are identical on machine A and B.


Instal MPICH2 on machine A
the install diretory of MPICH2 is chosen to be /home/yj/mpich2-install, which is shared by 
the two machines.

In both machine's /etc/hosts add:
192.168.1.103 node1
192.168.1.102 node2
this enable the two machine be called node1 and node2.

Now prepare to run a parallel program:
first, we need one `mpd` run on each of the two machines.
We can use `mpdboot` to run `mpd` on multi machines, however, we can also start the `mpd' daemons
"by hand" as follows:
Step 1: starts the  daemon on machine A:
mpd & 
Step 2:  makes the local daemon print its hostname and port in the form <hostname>_<port>
mpdtrace -l 
Step 3: Then log into machine B, and use the obove <hostname> and <port> to do:
mpd -h <hostname> -p <port> &
Step 4: Now we can check  that  the two  machines are actually  in the ring, using:
mpdtrace
Step 5: Now test  whether the two machines can  cooperate with each other to do one job:
mpiexec -n 2 /bin/hostname
This should  output hstnames of the two machines.
Step 6: This is another sanity check: run the 'hello world' program:
mpicc hellow.c
mpiexec -n 4 ./a.out

Done!


command: `hostname` can set hostname of the machine when linux is running.
The configure file "/etc/hostname" is used to set hostname when the machine boots.
so edit this file if you want to change the hostname permanently.

A bug fixed:
/usr/sbin/deluser line 228 contains : "if ($uid == 0) "
The variable "$uid" is incorrect.
The correct variable would be "$pw_uid" 

we can use `usermod` to change a user's home directory:
# usermod -d newdirectory  username


aptitude install rsh-client on master machine. 
aptitude install rsh-server on slave  machine. 

ddzhou  ssh 192.168.1.102 -l root
password: abc123

ssh client configuration file:
/etc/ssh/ssh_config 
~/.ssh/config

2.12 - My ssh connection freezes or drops out after N minutes of inactivity.

This is usually the result of a packet filter or NAT device timing out your TCP connection 
due to inactivity. You can enable ClientAliveInterval in the server's sshd_config, 
or enable ServerAliveInterval in the client's ssh_config (the latter is available in OpenSSH 3.8 and newer).

Enabling either option and setting the interval for less than the time it takes to time out your session will ensure that the connection is kept "fresh" in the device's connection table. 


--password-less ssh:
At local matchine
(1) first,  generate the private/public key pair :
$ ssh-keygen -t rsa
This will generate two files id_rsa and id_rsa.pub in ~/.ssh/ directory.
(2) then, use ssh-copy-ed to append the public key file .ssh/id_rsa.pub to the remote matchine's ~/.ssh/authorized_keys
$ ssh-copy-id -i ~/.ssh/id_rsa.pub yj@192.168.1.102
Done!

用老版本的ssh客户端，和有些服务器端的ssh server不能实现passwordless login.
Updating the ssh on the locale machine solves this problem, It took me  a lot of time to eventually find this solution.
-------

function of nfs in a cluster: make the different node read/write date from/to the same physical partition. (that is to share files)

/etc/hosts.allow  
/etc/hosts.deny 

network command:
route 
ifconfig.

aptitude
/键向下搜索搜索，\键向上搜索，选中要按+，取消选中则按-，按g查看所有被选中以及依赖的包，再按g开始安装. 
在包上按 r 可以列出所有依赖这个包的其他包.
To determine your shell, at the Unix prompt, enter:
echo $SHELL
To determine your terminal type, enter:
echo $TERM
if it is incorrect, you can set it:
export TERM=rxvt-unicode

---mpich2 routine:
int MPI_Send( void *buf, int count, MPI_Datatype datatype, int dest, int tag, MPI_Comm comm )

e.g.         MPI_Send(&value, 1, MPI_INT, right_neighbour, 99, MPI_COMM_WORLD);

int MPI_Recv( void *buf, int count, MPI_Datatype datatype, int source, 
              int tag, MPI_Comm comm, MPI_Status *status )

e.g.         MPI_Recv(&new_value, 1, MPI_INT, left, 99, MPI_COMM_WORLD, &recv_status);

int MPI_Bcast ( void *buffer, int count, MPI_Datatype datatype, int root, MPI_Comm comm )

e.g.         MPI_Bcast(&n, 1, MPI_INT, 0, MPI_COMM_WORLD); 
assign the value of n in process 0 to n in all the other process in the mpi_comm_world communicator.

int MPI_Reduce ( void *sendbuf, void *recvbuf, int count, 
                MPI_Datatype datatype, MPI_Op op, int root, MPI_Comm comm )
e.g.
            MPI_Reduce(&mypi, &pi, 1, MPI_DOUBLE, MPI_SUM, 0, MPI_COMM_WORLD);
!sum values of mypi  in all processes and assign the sum to  pi in  prosess 0.

The routine MPI_Reduce combines data from all processes (by adding them in this case), and returning the result to a single process ( the process 0 in this case).
---------------------
ifort:
-I<dir>
Specifies  a directory to add to the include path, which is used to search for module files (USE
statement) and include files (INCLUDE statement).
-L<dir>
Tells the linker to search for libraries in <dir> before searching the standard directories.

 -l<string>
Tells the linker to search for a specified library (lib<string>) when linking.
Because the linker searches and processes libraries and object files in the order they are specified, you should specify this option following the last object file it applies to.

 sudo mount -t ntfs-3g /dev/hda5 /mnt/d/

Force fsck on reboot
# shutdown -Fr now

disable stderr 
$ rm tmp.c  2>/dev/null 

epsmerge
# horolzed  3 figures.
 epsmerge -o new.eps -x 3 --  f1.eps f2.eps f3.eps

For nx to work, no modifications are needed to make to  the X server on the local computer

Q:For freenx to work (on a single application level or whole desktop environment), does  the X server need to be installed on the remote side?
A: The remote NX proxy poses itself to the X clients as if it is the X server. So real
X server is not needed in the remote side.
The remote proxy, in fact, incorporates a kind of X server, named nxagent, that becomes the X server of all the remote X clients.

Session persistence

NX allows you to disconnect a session, either a desktop or a floating-window session,

In addition to simply allowing users to log in remotely over a slow internet link to a server graphically, NX also allows them to suspend and resume sessions. During suspension, the processes invoked inside the session continue to run, and so many people have come to use NX as a graphical alternative to SSH and the 'screen' application - in order to run applications such as xchat permanently on a computer with a fixed internet link.


Freenx works not  only on the whole desktop level, but also on single application level.
To set-up a single application, select the desktop type "Custom" in the NX Client GUI and specify the application you want to run.
4.4 Session persistence

NX allows you to disconnect a session, either a desktop or a single application session, but this doesn't influence the aplication on your remote machine, which will continue to be running. You will be able to reconnect the session later, even from a different machine. 

Explanation of the NX session reconnection policies
NX server provides support for session reconnection i.e. the ability to suspend a running session and resume it later even from a different location.

Even though the session can be reconnected in most situations, there are still some constraints that have to be satisfied.
The implementation of the following Feature Request will ensure that a session can be always reconnected:

What are the constraints to be satisfied for reconnecting a session?

    * When the session has been initially launched on a display using the X RENDER extension, the session can be reconnected  only if the local X server provides support for the named extension.
      You can verify which extensions are supported by the X server by running the xdpyinfo command.
    * In general, the supported depths of the X servers running on the client side have to be the same, but it is possible to migrate from 24bpp to 32bpp and vice-versa.
    * The X servers on the client side should provide the same set of fonts.
      NX establishes a  temporary tunneling of a font server connection to provide missing fonts if possible. If the font server can't  provide the missing fonts, nxagent chooses a suitable replacement among the available fonts.
    * The same pixmaps formats must be supported by the X servers running on the client side.
    * The same set of depths must be supported by the X servers running on the client side.
    * The same picture formats must be supported by the X servers running on the client side (only if RENDER support has been enabled).
    * The set of visuals supported by the X servers should be the same.

How does session reconnection work?

Session reconnection has been implemented in a manner that it automatically happens after some minimal criteria are matched. This is intended to minimize the direct interactivity of users.

When the user performs a login, if there is  session available for reconnection on the server, a reconnection dialog is shown. This dialog lists all the running or suspended sessions for the specific user on the  server.

In this dialog there are three buttons: New,  Resume and Terminate in addition to the standard Cancel button that allows for quitting the dialog.

The New button is used to launch a new session. This button is greyed out if the user is prevented from launching new sessions; this can happen, for example, because the user session limit or the server session limit has been reached on the server.

The Resume button is used to reconnect to an already running or suspended session. If the button appears to be disabled, it is because no session actually matches the criteria for being reconnected.

The Terminate button is always enabled to provide the user with the ability to terminate a session.


screen:
C-a c Create a new terminal window.
C-a " Show list of terminals managed by Screen.
C-a w Show simple list of terminals managed by Screen.(in the bottom of the window)
C-a n  switch to next terminal window.
C-a p  switch to previous terminal window.
C-a d Detach the Screen session
screen -ls  list the running screen session.
screen -DR	make Screen re-attach (R)
C-a :quit   quit the screen session.


generate locales which you need:
# dpkg-reconfigure locales
I had chosen to generate the following locales:
en_US.utf8
zh_CN.utf8
zh_CN.gb2312
zh_CN.gbk

and set the en_US.utf8 as default locale.

LANG和LANGUAGE的区别
区别在于：
LANGUAGE是设置应用程序的界面语言。
而LANG是优先级很低的一个变量，它指定所有与locale有关的变量的默认值，
例如如果LC_MESSAGE没有被用户设置，则LC_MESSAGE的取值由LANG确定。
if you do not  explicitly set the value of LANG, then the value of LANG is determined by the default locale， for example, your default locale is zh_CN.UTF-8，
then LANG=zh_CN.UTF-8.

LC_ALL -  Overrides all LC_* environment variables with the given value 
LC_CTYPE - Character handling functions

LANG: If this is non-null and LC_ALL is undefined, the value is used for all LC_* locale categories with undefined values.

You can use the executable "locale" to show your current locale. 
The command "locale -a" displays all the locales currently installed on the machine. 
Make sure that the locale you select for LANG and LC_ALL is in the list that "locale -a" returns.
 The values that locale uses and returns are case-sensitive, so copy them exactly when assigning them to an environment variable.

/etc/environment
/etc/default/locale
can set the locale variables.
The definition in /etc/default/locale takes effect second, 
thus overwriting the value from /etc/environment.

for ssh -Y to work, the remost machine don't need to have x-window-system installed.



issues about embedding  font in pdf files:
I have set "pdftexDownloadBase14 true" in "/var/lib/texmf/web2c/updmap.cfg".
and embed fonts in the eps file generated by gunuplot(this was done in gunuplot)
However, on launching the command "dvipdf", I get the warning:
"dvips: Font NimbusSanL-Regu used in file potential.eps is not in the mapping file."
though the output pdf files seems good.
Q: why is the Nimbussanl-regu font not found in the mapping file. As far as I know, it is a not a
commercial font and it should be installed on my system.

----fftw----
a program using fftw should be linked as:
g++ program.cpp -lfftw -lm
-----
In general, the compiler option -lNAME will attempt to link object files with a library file 
called 'libNAME.a' in the standard library directories. 
The standard libray directories is /usr/local/lib and /usr/lib
So the command:
$gcc program.c -lNAME option 
is actually a short-hand of the following command:
$gcc program.c  /usr/local/lib/libNAME.a
or
$gcc program.c  /usr/lib/libNAME.a

A large program will typically use many -l options to link libraries such as the math library, graphics libraries and networking libraries.

Incidentally(by the way),  sometimes link order is important.


By default, gcc searches the following directories for header files:

/usr/local/include/
/usr/include/

and the following directories for libraries:

/usr/local/lib/
/usr/lib/

The list of directories for header files is often called  "include path", 
and the list of directories for libraries is often called "library search path" or "link path". 
When additional libraries are installed in non-standard directories, it is necessary to extend the search paths, in order for the libraries to be found. The compiler options -I and -L add new directories to the beginning of the "include path" and "library search path", respectively.

Additional directories can also be added to the "include path" using the environment variable C_INCLUDE_PATH (for C header files) or CPLUS_INCLUDE_PATH (for C++ header files). For example, the following commands will add ‘/opt/gdbm-1.8.3/include’ to the "include path" for C programs.

$ C_INCLUDE_PATH=/opt/gdbm-1.8.3/include 
$ export C_INCLUDE_PATH

and similarly for C++ programs:

$ CPLUS_INCLUDE_PATH=/opt/gdbm-1.8.3/include 
$ export CPLUS_INCLUDE_PATH

This directory will be searched after any directories specified on the command line with the option -I, and before the standard default directories (such as ‘/usr/local/include’ and ‘/usr/include’). The shell command "export" is needed to make the environment variable available to programs outside the shell itself, such as the compiler--it is only needed once for each variable in each shell session, and can also be set in the appropriate login file.

Similarly, additional directories can be added to the "link path" using the environment variable 
LIBRARY_PATH. For example, the following commands will add ‘/opt/gdbm-1.8.3/lib’ to the link path:

$ LIBRARY_PATH=/opt/gdbm-1.8.3/lib
$ export LIBRARY_PATH

This directory will be searched after any directories specified on the command line with the option -L, and before the standard default directories (such as '/usr/local/lib' and '/usr/lib').

With the environment variable settings given above the program ‘dbmain.c’ can be compiled without the -I and -L options,

$ gcc -Wall dbmain.c -lgdbm

because the default paths now use the directories specified in the environment variables C_INCLUDE_PATH and LIBRARY_PATH. The same compilation command with g++ would use the environment variables CPLUS_INCLUDE_PATH and LIBRARY_PATH.

linux boot process (from when kernel has been loaded  to when a login shell prompt shows up)

kernel first runs the /sbin/init program, which does some system checks, and starts vital programs needed for the operating system to function properly. It then inspects the /etc/inittab file to determine Linux's runlevel. Based on the selected runlevel, the init process then executes startup scripts located in subdirectories of the /etc/rc.d directory. 
Scripts used for runlevels 0 to 6 are located in directories /etc/rc.d/rc0.d through /etc/rc.d/rc6.d, respectively.

Most Linux packages place their startup scripts in the /etc/init.d directory, then  place symbolic links (pointers) to these scripts in the appropriate subdirectory of /etc/rc.d. 
This makes file management a lot easier. The deletion of a link doesn't delete the file, which can then be used for another day.


Q:Is the variable " LD_LIBRARY_PATH" special?
Q: It seems this variable is unavailable in X environment even when I have export it in the login shell.


mount usb disk:
before plug in usb disk :
# fdisk -l
after plug in usb disk:
# fdisk -l
From the difference in the output messenger, we can know what divice is the usb disk
then mount it:
#mount -t vfat /dev/sda1 /mnt/usb 

In Debian there are some useful utilities which can make life easy when build a new  kernel.
Fisrt make sure these useful utils have been installed. If not, install them.
#apt-get install kernel-package fakeroot module-init-tools
if you want to use menuconfig to configure kernel, you must have  libncurses5-dev  installed.
If not, install them.
#apt-get install libncurses5-dev 

Download the newest kernel from http://www.kernel.org 
untar to /usr/src
#tar -jxvf linux-2.6.25.4.tar.bz2 -C /usr/src
#cd /usr/src/linux-2.6.25.4
#You can use a  provious working config files as a  starting point for your customization:
cp /boot/config-2.6.22-3-686  .config
Now begin to configure kernel:
#make menuconfig
This will look the current directory for a .config file and load them as a basis configuration.
On this basis, you can adjust the option.
I choose that the device_driver/misc_driver/thinkpad-acpi-extral should be compiled into the kernel, instead of as a module.
Then save and exit. The original .config will be renamed as .config.old. and the new configuration is writen into .config file.

Next step: comple and pack the resulting binary files.

#fakeroot make-kpkg -revision=mykernel.1.0 kernel_image --initrd

A package named linux-image-2.6.25.4_mykernel.1.0_i386.deb will be generated in the /usr/src directory


some warning messages:
nclude/asm/io_32.h:216: warning: passing argument 2 of ‘__memcpy’ discards qualifiers from pointer target type
include/asm/io_32.h: In function ‘memcpy_toio’:
include/asm/io_32.h:222: warning: passing argument 1 of ‘__memcpy’ discards qualifiers from pointer target type

Now install the package:
#dpkg -i linux-image-2.6.25.4_mykerne1.1.0_i386.deb

Done!


delete all the files except for the files ending with .c .cpp (of course the hiden files are not influnced)
$ rm !(*.c|*.cpp)

find -name  'pattern' # this form are case sensitive.
find -iname 'pattern' # this form are case insensitive.


svn:
把我本地的一个目录上传到我的google code上，并把目录名也取为online_project:
svn import myproject/  https://fokker-planck-code.googlecode.com/svn/online_project
以用户yjunhu的身份把google code上的myproject目录下载到本地，并取名为fokker-planck-code.
svn checkout https://fokker-planck-code.googlecode.com/svn/myproject/ fokker-planck-code --username yjunhu

 # Non-members may check out a read-only working copy anonymously over HTTP.
svn checkout http://fokker-planck-code.googlecode.com/svn/trunk/  abc/
#this is to download  the svn/trunk directory to local matchine and rename it as abc/

$ svn add readme.txt       #写一个readme文件，并决定把它加到源里去。
$svn commit -m 'add readme file' #提交你的修改，附上一些说明信息。
$svn delete test2          # schedule the 'test2' to be deleted
$svn commit -m 'blabla...' #提交你的修改，附上一些说明信息。


---
Steps to prepare a partion on a hard disk:
*): find the name of  the hard disk: change to the directory /dev which lists the hard disk that found by the operating system
*) make sure that the partition is not currently mounted by using "df -h"
*) Removing or creating a partition, the tool is fdisk,  一般旧硬盘都已经分好区了，要做的仅是改变一些属性， e.g., change a partition's system id(e.g. change from "ntfs" to linux) 
2 Making a filesystem : "Formatting", the tool is mke2fs and mkfs.ext3, e.g., sudo mkfs.ext3 /dev/sda1
3. 挂载, 工具是mount

Example:
first  set the type of /dev/hda6 to linux(83):
# fdisk /dev/hda
type 't' to  change a partition's system id, 83 for linux
type 'w' to save the change and exit,
then use  "mke2fs -j /dev/hda6" to format it.
the results are as following:
hn:/home/yj#  mke2fs -j /dev/hda6
mke2fs 1.40.3 (05-Dec-2007)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
1011840 inodes, 2020402 blocks
101020 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=2071986176
62 block groups
32768 blocks per group, 32768 fragments per group
16320 inodes per group
Superblock backups stored on blocks: 
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632

Writing inode tables: done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 30 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.

The following is the case of formating my sda disk:
# mke2fs -j /dev/sda2 
mke2fs 1.40.3 (05-Dec-2007)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
6111232 inodes, 12209400 blocks
610470 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=0
373 block groups
32768 blocks per group, 32768 fragments per group
16384 inodes per group
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424

Writing inode tables: done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 36 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.

The following is the case of change the ntfs to linux:

Command (m for help): w
The partition table has been altered!

Calling ioctl() to re-read partition table.

WARNING: Re-reading the partition table failed with error 16: Device or resource busy.
The kernel still uses the old table.
The new table will be used at the next reboot.


dpi:
The following files have option of 'dpi':
 ~/.Xresource ~/.fonts.conf /etc/X11/xorg.conf /etc/X11/xinit/xserverrc

---sed--
The s command
The syntax is: s/regexp/replacement/flags
where the often used flags is g, which means applying the replacement to all matches to the regexp, not just the first. 
Example:
sed "s/calc1/calc2/g" plot.plt >plot2.plt

print the content between line 2 and line 6
$ sed -n '2,6p' file_name

$sed 's/$/EOL/' <oldfile >newfile
match  the end-of-line to add a  string 'EOL', write the output to newfile

You can match a blank line by specifying an end-of-line immediately after a beginning-of-line:
$ sed 's/^$/this used to be a blank line/' filename 
delete a blank line (note a blank line does not contain anything even for white space.)
 sed  '/^$/d' ttt

delete the line from 1 to 10 in the oldfile
$sed '1,10 d' <oldfile >newfile

delete all the lines between the string 'reg1' and 'reg2'.
$sed '/reg1/,/reg2/d' <oldfile >newfile

If your sed script is getting long, you can put it into a file, like this:

	# This file is named "sample.sed"
	# comments can only appear in a block at the beginning
	s/color/colour/g
	s/flavor/flavour/g

Then call sed with the "-f" flag:

$sed -f sample.sed filename

Or, you can make an executable sed script:

	#!/usr/bin/sed -f
	# This file is named "sample2.sed"
	s/color/colour/g
	s/flavor/flavour/g

then give it execute permissions:
$chmod u+x sample2.sed
and then call it like so:
$./sample2.sed filename 




---firefox:


Flash Game Maximizer 1.3.6可以全屏玩Flash游戏。(原本我的firefox不能控制flash游戏，使用它后，可以玩了）

天气预报：
Forecastfox 0.9.10.2



@-moz-document domain(”email.ustc.edu.cn”) 
{
pre input { table-layout: auto !important; } 

} 

-------grep------------
$ grep -l 'determinant' *.f90  
to find the string 'determinant' in files *.f90 and print the filename of the file which
contains the string.

To print all lines containing 'apple' as a word ('pineapple' and 'apples' will not match):
grep -w apple fruitlist.txt

To search a word 'apple' in files in current and sub directories recursively.
$ grep -r 'apple' ./

$  grep -iR --include '*.f90' '\byj\b' ./


Q: Are the processors 64-bit?
A:  see file: /proc/cpuinfo
A 64-bit processor will have lm ("long mode") in the flags section of cpuinfo.
 A 32-bit processor will not.
e.g., a 64-bit processor may give:
flags           : fpu vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt lm 3dnowext 3dnow pni cx16 lahf_lm cmp_legacy svm cr8legacy ts fid vid ttp tm stc


sleep 1 && xset dpms force off


--bash---Shell programming using bash---
to show all the commands executed with variables substituted:
set -x 

for i in 1 2 3 4 5
do
   echo "Welcome $i times"
done

for i in {0..10..2}
  do
     echo "Welcome $i times"
 done


Get filename without path:
filename=$(basename $fullfile)
Get the extension
extension=${filename##*.}
get the  name without the extension
myfilename=${filename%.*}

if construct:
if [ -n "${rain}" ]
then
echo 'it will rain tomorrow'
fi
Note that there are two  spacings inside the  brackets! Without the spaces, it won't work.
Note that here the string much be inclosed by quoted by " ".


comand substitution:  ` ` back quote or $( ) 

for example:
content=$(ls /etc) ; this form can also be used in makefile, but the command must be capitalized.
Another way to do this is:
content=`ls /etc` 


Note: distinguish between the ${} and the $():
${} is  variable expansion.
$() is  comand substitution, which is identical to ` `, which means the output of the command within it is used as input in the location where it apprears 
I prefer to use ` ` instead of $(), so that I do not confuse it with ${}.

In addition, the construct $((  )) is used to perform  arithmetic.
for example: echo $((100/3)) will output 33

Remarks: Note that both ${} and $() means variable expansion in Makefile; there is not difference between them.

对变量赋值时等号前后都不能有空格

 $?  存放上一个命令的exit status（0 成功， 非0失败）
 $# 存放脚本被调用时的命令行参数的个数。
 $0, $1, $2, $3...   position variable
 $@或$*  all the arguments 

 !$ 上一个命令的最后一个参数

readline key binding:
yank-last-arg (M-., M-_), i.e. press M-. will generate the last argument on the last command line, press again will generate the one on the second last command line

redefine the tty stop command to C-1:
$stty stop ^1

原先stop is defined on ^s,  
I need ^s  to perform foward-search function in readline library.
The stty command 优先级比readline高，^s 会先被stty截获。



疑问:
1.xelatex直接编译.tex文件生成的pdf文件中不能包含ps,eps图形。
2.我的系统中xelatex是一个指向xetex的symbolic link, 但用xetex编译与用xelatex编译结果却不同。
答:Some scripts can perform different operations, depending on which name they are invoked with. 
For this to work, the script needs to check $0, the name it was invoked by.
In this case, there must exist symbolic links to all the alternate names of the script.


可行的办法：先用latex 编译.tex文件，生成.dvi文件。再用dvipdf把.dvi文件转换成.pdf文件。

问：.cls文件怎么用?
答：把.cls和.tex放在同一个目录下，
假设cls文件为abc.cls
那么在.tex文件中加入：\doucumentclass{abc}就可以了.



maxima:
features 列出所有可用的数学property(例如：integer,real,complex,oddfun,evenfun)
declare(x,integer) ;假设x是一个整数。



% 引用上一个的输出结果。

把上一个结果中的b替换为haha
%, b=haha;

假设一个条件:：
 assume(a>2)
取消一个假设
forget(a > b)
注意：在定义一个与以前矛盾的假设时，一定要先取消以前的假设
facts();列出当前所有的假设。

values;  查看已经有值的变量
functions; 查看已经定义的函数
kill(all);  清除所有环境（相当于退出maxima再进入）
kill( a,b,c...); 清除指定的函数或变量。

assign  -------- :
define function :=
for example: f(x):=x+1
= is used for equation
导入一个包：
(C4) load(orthopoly)$
(C5) display2d : false$
(C6) makelist(hermite(i,x),i,0,3);
(D6) [1,2*x,-2*(1-2*x^2),-12*x*(1-2*x^2/3)]



----tex---
--- pdffonts - Portable Document Format (PDF) font analyzer,
which analyzer which fonts are included and which fonts are not in a PDF file. For example:
pdffonts Numerical_study_of_Alfven_eigenmodes_in_EAST_tokamak.pdf 2>/dev/null

outputs:
name                                 type              emb sub uni object ID
------------------------------------ ----------------- --- --- --- ---------
Symbol                               Type 1            no  no  no     134  0
SVIBLU+CMMI10                        Type 1C           yes yes no     135  0
Helvetica                            Type 1            no  no  no     133  0
,  which indicates the Helvetica font is not embeded in the pdf. 


-revtex-
when I tried to use revtex4-1, I enounter error messages about /url commands,
The solution is to download "url.sty" from the contrib/url directory on CTAN and put it in the working directory.


when the following error message appeares:
Too many unprocessed floats

Solution: use the morefloats package. 

**在tex源文件中，下划线是特殊字符，要在结果中产生下划线，需要用\_ 来得到。
Use the following statement to enable CJK.
\usepackage{CJK,graphicx}
then after \begin{document} add
\begin{CJK*}{GBK}{song}
bla...bla..
\end{CJK*}
\end{document}

---hyperlink errors
when I use hyperref package in .tex file, I got the following error message:
Paragraph ended before \Hy@setref@link was complete

A guy on the internet found that: This was due to having a regulare closing parenthesis directly after the curly bracket that closed a \ref, like this: (see section \ref{section-1}). Putting in a space between the closing curly bracket and parenthesis solved the problem: \ref{section-1} )
However the above fix is not suit for me because the .tex file I got is converted from a texmacs file: it is hard to manually add space before every parenthesis.

The simple hack is that: delete all .aux files.

---tex end-------


---Texmacs--
Compile Texmacs again:
cd /home/yj/install_source/TeXmacs-1.0.7.21-src_to_build_without_qt
patch -p1 < ./revert_2655.diff 
./configure --disable-qt --prefix=/home/yj/installed/TeXmacs-1.0.7.21_patched_built_without_qt 
make
make install

My remarks: I have used the patch "revert_2655.diff" to TeXmacs-1.0.7.21 and compiled a version with qt disabled (as above).
The result indicates there is considerable performance improvement compared with the un-patched version.
But for the qt version, the there is no obvious performance improvement after using the patch.
Refter to my post and the mailing list of TeXmacs-users

texmacs chinese fonts: to view chinese in texmacs, you need to install chinese fonts:
first download the chinese font package from texmacs website. After downloading, cd into the directory ~/.TeXmacs, and
tar -xzf TeXmacs-chinese-fonts.tar.gz 
Done!

\ldots level dots
\vdots vertical dots
\ddots incline dots

\dot upper single dot
\ddot upper double dots
\dddot upper three dots

!convert .tm to .pdf , then quit texmacs:
texmacs -c input.tm output.pdf -q

(*) To make the converted .tex file contain line: "\usepackage{hyperref}"
I want to achieve this because I need the latex package "hyperref" to making hyperlink in the pdf outputed by the tex compiler.
To achieve this, I follow the folloiwng steps:
(1) In Texmacs menu, select Document-->add package-->others, then type in "hyperref"
(2) In Texmacs menu, edit--preference-->converters-->texmacs_to_latex, then unckeck the option "Replace unrecognized styles". This step is needed because the package name "hyperref" I typed in is usually not recognized by texmacs, so to prevent the latex convertor from replacing this pacake name, I need to uncheck that option.

(*) Fix the bug of the ispell pluging of the TeXmacs to make the plugin work for french word (such as word with accent, e.g. the accent in the name "Alfvén").
Before the fix, the pluging will give the following error message
TeXmacs] ispell error: Error: The word "?" is invalid. The character '?' (U+3F) cannot be in the middle of a word.
and stop working when it encounters word with accenct, such as "Alfvén" and "Ampère".
After googling the key word "ispell encoding"  and reading the message in the texmacs-user mailing list,
I finally found the method to fix this bug (it took me a whole day (2012-12-6) to find out this fix):
I edit the source of the plugin,TeXmacs-1.0.7-src/src/Plugins/Ispell/ispell.cpp, to change the line
string cmd= "ispell -a  -d " * ispell_dictionary (lan)
to
string cmd= "ispell -a --encoding=iso-8859-1 -d " * ispell_dictionary (lan)

After the fix, the spell checker can proceed smoothly when it encounter the accent word.


I installed texmacs on my desktop computer using the precompiled binary files (the one compiled by myself does not function properly (the bug is: after using the menu of texmacs I can not input character using keyboard in the working area anymore. update: this bug disappears when I compiled another copy of Texmacs, So I switch back to use the version of Texmacs compiled by myself, further update: In fact, the bug ocures occasionally (on very few occasions), both for the precompiled and my compiled version.)
The steps are simple:
(1) download the binary file tarball  then un-tar it
(2) set in .profle of bash :
export TEXMACS_PATH=/home/yj/installed/TeXmacs-1.0.7-static-gnu-linux
export PATH=$TEXMACS_PATH/bin:$PATH
Comments: the TEXMACS_PATH is neccessary for texmacs to work properly. Upate: the above statement is wrong, I do not need to set these variables because the texmacs startup scripts themself set these variables.


hack texmacs latex convertor of TeXmacs to make it be able to export chinese .tm files to .tex files
The is acheived by commenting out some lines in the source code of the convertor.

Using "\right |" to generate a large upright line, which is better than that generated by "Alt-Shift-|", becaus the latter will turn into a small line when it is followed by a superscript and/or subscript.
\underbrace
\overbrace
\underline
\overline
accent: \'e or A-' e to generate accent e
\lim --> tex command for limit
figure in texmacs: using insert--image--bigimage, then insert--image--link image:
<postscript|../../project/toroidal_eccd/fig6/tmp.eps|0.45par|||||>
where: 0.45par give the width of the figure.

My Texmacs layout:
I) To make content page centered in the working window:
Step 1:
Document -->  Page --> Type --> Automatic
Step 2:
Document --> View --> Page layout -->  Left margin --> 2cm 
Document --> View --> Page layout -->  Right  margin --> 2cm 

II) pape size is chosen to A4. This papesize is suitable to view and print the output .pdf file.

Refer to '8.3.Keyboard shortcuts for text mode' for special characters.



\nabla # for the gradient operator
书写Texmacs文档，较好的尺寸是B4, 选择的类型为document-->page-->type-->papyrus
转为pdf最便于阅读的尺寸是A5(字较大便于阅读）: document-->page-size-A5

slide:
Step.1: Document---style----seminar
2.page size A5
3.page orienation: landscape, 
4.font: Helvetica 
5.font size 9
! use command: \new-page  to start a new page

use bibtex in texmacs:
step1: text-->automatic-->bibliography and selet style and your .bib file
step2:  \cite some entry in bibtex
step3: document-->update-->bibliography
style: plain,unsrt
this corrisponds to a file named plan.bst or unsrt.bst in the curretn directory or in a system-defined directory. For instance, I put pf.bst in the current directory and use style: pf, then I can use style of PoF jounar.

# one of output files of bibtex is the .bbl file. The context of this file can be used in the following Latex environment:
\begin{thebibliography}{10}  
\end{thebibliography}
to provide the reference.
This method is useful when submitting a .tex file to Jounal such as POP where the processing system does not support using bibtex file.


$ inline equation 
A-$  display equation 
A-&  display equation array.
C-TAB can switch between inline and display equation.
A-* can switch between numbered and unnumbered equation

M-! make a label.
M-? reference a label.

F5 is prefix for greek letters.
S-F5 d  \partial
S-F5 I  \int
F6    prefix for bold font
Esc t N t  创建一个表格（无边框）, A-arrow: change collom, Enter: change row.

When create a label for single equations ,
 the recommended place is at the beginning inside the equation.
 When create a label for  multiple equations ,
the label must be put just Behind the equation numbers.

slides:
document-style-seminar
page size A5 
orientation :landscape

-----texmacs end--------------

xsel --- manager x selection



GTK+1.x程序使用X11核心字体系统。
要在GTK+1.x程序中正确显示中文
，需修改/etc/gtk/gtkrc.zh_CN，
将其中的引号内的字体描述信息改为:
"-adobe- helvetica-medium-r-normal–12-*-*-*-*-*-iso8859-1,-misc-simsun-medium-r-normal -*-*-*-*-*-gbk-0,-*-”
这样GTK+1.x程序就应该可以正确地显示中文了。

ttf-arphic-*


3.把标准输出同时送到屏幕与文件
command | tee 文件
把出错信息同时送到屏幕与文件
command 2>&1 | tee 文件
例如 ls   | tee  my.log

4  LINUX创建用户的命令 
useradd -g test -d /home/test1 -s /etc/bash -m test1 

注解：-g 所属组 -d 家目录 -s 所用的SHELL 

删除用户命令 
userdel -r user_name
创建密码命令 
passwd  user_name

6 软件包管理：
如果想看某软件都有哪些文件，都装到了什么地方：
# dpkg -L 软件包名字
$ dpkg --info  foo_abc.deb   # obtain informathion of the .deb file

!remove a package
$dpkg -r packag_name




rm /lib/modules/2.6.25/  -r



--tex-install---
apt-get install  the following packages:
1    cjk-latex 
2    tetex-extra    //tex的基本系统
3    tetex-doc   /// doc
4   tfm-arphic-gbsn00lp
5   tfm-arphic-gkai00mp   /楷体
6   ttf-arphic-gbsn00lp
7    ttf-arphic-gkai00mp
8   dvipdfmx    //生成的pdf不内嵌字体，文件会小很多，具体参看dvipdfmx的readme
9   gv   // ps viewer,,  this software is indispensable, otherwise you'll be unable to see the pictures in dvi and pdf files.

tetex-base   /// already installed 
tetex-bin   /// already installed

gbkfonts //转换simsun.ttf字体的软件
dvipdfm-cjk-cmap //This package only contains non-free Adobe cmap file for dvipdfm-cjk
auctex context-el  //GNU emacs的tex编辑环境需要的，如果你想用emacs来编辑tex文件

dvipdfm-cjk //支持中日韩语言所需的

，
texmf-zh //自动安装中文字体，并在tex系统中添加一个文件夹来放中文字体
pdfscreen //如果你想用tex做幻灯片就装它吧，挺好用的


freetype1-tools libttf2 TrueType 和 Type1字体的一些转换工具和相关的编码文件，如果用dvipdfmx则需要安装。




在编译内核过程需要注意的是：
1）内核配置完成后，在退出配置菜单时如果选择保存配置，则会在当前目录中生成一个.config文件，记录内核的所有配置参数。该配置文件会在下次配置内核时自动导入。
也可以通过内核配置菜单的导入和存盘功能导入其它内核配置文件和把当前配置以任意的名字保存在其它地方。
2）Loadable module support–>Module unloading选项可允许卸载已加载的内核模块。
通过该功能，我们可以通过rmmod module_name和modprobe module_name命令改变内核模块的加载参数。

用新内核重启时如果提示VFS不能挂接问题,提示出错信息类似以下内容：
VFS:Cannot open root device “hdb2 or unknow-block(0,0)
Please append a correct “root=” boot option
kernel panic-not syncing: VFS:Unable to mount root fs on unknow-block(0,0)
原因：ext2文件格式支持没有编译进内核，不论你使用ext3或其它文件格式,ext2支持都必须直接编译进内核，
不能以内核模块形式编译。

如果要使用alsa，那么在内核选项中要加入alsa模块，
然后安装：apt-get install alsa-utils aumix xmix，
完成以后输入alsaconf来自动配置，如果一切正常的话，完美无瑕疵的声音就会永远伴随你了。

声卡驱动

#apt-get install alsa-base
#apt-get install alsa-oss
#apt-get install alsa-utils

Then, as root, run the following command :

#alsaconf

这样声卡应该可以发声了。

再安装一个调声音的东西：

apt-get install alasmixer

To tune the volumes with alsamixer,run the command:

alsamixer

可用以下命令测试声卡是否被成功驱动：

$ cat /dev/urandom > /dev/audio

Can you hear the noise?,if you can, congratulations! if not,check whether your group is the member of the audio group. 

---font--

[/usr/share/fonts/truetype]$ xlsfonts|grep simsun
-misc-nsimsun-medium-r-normal--0-0-0-0-m-0-ascii-0
-misc-nsimsun-medium-r-normal--0-0-0-0-m-0-iso10646-1
-misc-nsimsun-medium-r-normal--0-0-0-0-m-0-iso8859-1
-misc-nsimsun-medium-r-normal--0-0-0-0-m-0-iso8859-15
-misc-nsimsun-medium-r-normal--0-0-0-0-m-0-koi8-r
-misc-simsun-medium-r-normal--0-0-0-0-c-0-ascii-0
-misc-simsun-medium-r-normal--0-0-0-0-c-0-iso10646-1
-misc-simsun-medium-r-normal--0-0-0-0-c-0-iso8859-1
-misc-simsun-medium-r-normal--0-0-0-0-c-0-iso8859-15
-misc-simsun-medium-r-normal--0-0-0-0-c-0-koi8-r
[/usr/share/fonts/truetype]$ xlsfonts|grep mingliu
-dynalab-mingliu-medium-r-normal--0-0-0-0-m-0-ascii-0
-dynalab-mingliu-medium-r-normal--0-0-0-0-m-0-iso10646-1
-dynalab-mingliu-medium-r-normal--0-0-0-0-m-0-iso8859-1
-dynalab-mingliu-medium-r-normal--0-0-0-0-m-0-iso8859-15
-dynalab-pmingliu-medium-r-normal--0-0-0-0-c-0-ascii-0
-dynalab-pmingliu-medium-r-normal--0-0-0-0-c-0-iso10646-1
-dynalab-pmingliu-medium-r-normal--0-0-0-0-c-0-iso8859-1
-dynalab-pmingliu-medium-r-normal--0-0-0-0-c-0-iso8859-15
Why is there no gbk kind of the simsun and mingliu?
fc-list|grep simsun
no result
fc-list|grep mingliu
no result
It seems that  the .ttf fonts do not need the file 'font.dir'?
Today(2008-5-26) I cp the simsun.ttf(3.7M) to the directory  /usr/share/fonts/truetype/from_windows
I hope it will take some effects on the apperance of the whole system.
I hope fc-list will find the simsun font, and xlsfonts will find the gbk form of the simsun font.


the file /etc/sudoers can only be edited by command "visudo" as a root.

to see what has  happened just now:
# tail  /var/log/messages

Dear  Matsui, 
Your paper titled "Kinetic theory and simulation of collisionless tearing in bifurcated current sheets" (Phys. Plasmas 15 012901 (2008) ) interested  me.
It will help me greatly if I have the  opportunity  to read your  your Ph.D. thesis.
Could you kindly send me a copy of your Ph.D. thesis ?
Thank you so much!

Yours Sincerely
Youjun Hu

tatsuki-matsui@uiowa.edu


T. Matsui, Ph.D. thesis, The University of Iowa (2008)


12生肖顺序是 鼠 牛 虎 兔 龙 蛇 马 羊 猴 鸡 狗 猪

这两个字体很重要,我安过以后，浏览大部分的网页效果都很好。

apt-get install ttf-arphic-ukai
apt-get install ttf-arphic-uming

不安装 ttf-arphic-bkai00mp ttf-arphic-bsmi00lp ttf-arphic-gbsn00lp ttf-arphic-gkai00mp，若安装，效果变坏，中文字体模糊不清晰

The following NEW packages will be installed:
  ttf-arphic-bkai00mp ttf-arphic-bsmi00lp ttf-arphic-gbsn00lp ttf-arphic-gkai00mp
The following packages will be upgraded:
  ttf-arphic-ukai ttf-arphic-uming

I've used ktorrent, rtorrent, and Transmission, and I like all the three.
I'm now using Transmission.


Q: Since Transmission does not store partially downloaded files in a specific location, it becomes really hard to tell finished items from unfinished ones in the file manager. 
Could it maybe give unfinished stuff a special extension, for example .part ? 

A: Under Preferences -> Transfers, there's a checkbox for "Keep incomplete files in".

Transmission will then store all unfinished files in that folder, and move them to the other "Download to" folder when completed.

-----2009-12-21  my shell environment variable-----------
$ env
LC_PAPER=en_US.UTF-8
MANPATH=/opt/intel/fc/9.1.045/man:/home/yj/installed/texmacs/share/man/:
LC_ADDRESS=en_US.UTF-8
SSH_AGENT_PID=3221
LC_MONETARY=en_US.UTF-8
fvwm_icon=/home/yj/.fvwm/icons
INTEL_LICENSE_FILE=/opt/intel/fc/9.1.045/licenses:/opt/intel/licenses:/home/yj/intel/licenses:/Users/Shared/Library/Application Support/Intel/Licenses
SHELL=/bin/bash
TERM=rxvt-unicode
HISTSIZE=3000
FVWM_USERDIR=/home/yj/.fvwm
HOSTDISPLAY=hn:0.0
WINDOWID=16777223
XIM_PROGRAM=scim
HUSHLOGIN=TRUE
LC_NUMERIC=en_US.UTF-8
COLOR=Steelblue3
HISTFILESIZE=3000
USER=yj
LS_COLORS=
LC_TELEPHONE=en_US.UTF-8
SSH_AUTH_SOCK=/tmp/ssh-xTYnjt3187/agent.3187
PATH=/opt/intel/fc/9.1.045/bin:/home/yj/installed/mpich2-gfortran/bin:/home/yj/bin:/usr/local/bin:/usr/bin:/bin:/usr/games
XIM=scim
LC_MESSAGES=en_US.UTF-8
QT_IM_MODULE=scim
LC_IDENTIFICATION=en_US.UTF-8
LC_COLLATE=en_US.UTF-8
PWD=/home/yj
fvwm_scrpt=/home/yj/.fvwm/scripts
XMODIFIERS=@im=SCIM
EDITOR=emacs
LANG=en_US.UTF-8
LC_MEASUREMENT=en_US.UTF-8
FG_HICOLOR=white
fvwm_img=/home/yj/.fvwm/images
XPMPath=/home/yj/.fvwm/xpimages
HISTCONTROL=ignoredups
COLORFGBG=default;default
SHLVL=3
HOME=/home/yj
LANGUAGE=en_US:en" 
fvwm_wallpapers=/home/yj/.fvwm/images/wallpaper
DYLD_LIBRARY_PATH=/opt/intel/fc/9.1.045/lib
LOGNAME=yj
LC_CTYPE=zh_CN.UTF-8
DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-r00YwXm8T9,guid=a320e3500ac2667868e331bc4b2f795a
fvwm_home=/home/yj/.fvwm
HICOLOR=blue
LESSOPEN=| /usr/bin/lesspipe %s
FVWM_MODULEDIR=/usr/lib/fvwm/2.5.23
DISPLAY=:0.0
GTK_IM_MODULE=xim
LESSCLOSE=/usr/bin/lesspipe %s %s
LC_TIME=en_US.UTF-8
FG_COLOR=black
COLORTERM=rxvt-xpm
LC_NAME=en_US.UTF-8
XAUTHORITY=/home/yj/.Xauthority
_=/usr/bin/env
---------------------end of environment variable----------

----ustc blade---
This section is written by me when I temporarily worked as a administrator of the blade-cluster at MPHY-USTC.

sge_pe一定要看。

Open MPI is automatically integrated in SGE and will use random ports to start the communication.
So we  need to configure nothing to make Open_mpi work in SGE.
However MPICH2  needs some configuration.
Configure sge:
X window: qmon
command line: qconf

------------sge------------
command frequently used:
qsub
qstat
qdel
qhost

Master host runs the master daemon:sge_qmaster
and the scheduling daemon: sge_schedd.
Execution Hosts daemon: sge_execd

On master node restart sge daemon :
/gridware/sge/default/common/sgemaster start

how to create/change a queue definition?

sun grid engine
daemons on Master node:
sge_qmaster
sge_schedd   
A:No sge_schedd daemon  in our cluster, why? 
Q: This daemon is merged into sge_qmaster in new version sge.
damon on excutive node:
sge_execd
---------------sge-----------------------
/gridware/sge/mpich2_mpd/startmpich2.sh -catch_rsh $pe_hostfile /public/software/mpi/mpich2-gfortran
                   

Check it with:
$ shopt huponexit
huponexit off
(which indicat HUP on exit is disabled. 所以logout不终止后台进程。)
Enable it with:
$ shopt -s huponexit
$ shopt huponexit
huponexit on
现在logout后终止后台进程。
To disable again:
$ shopt -u huponexit
$ shopt huponexit
huponexit off

**r*o*o*t*yjyj***p*a*s*s*w*ord*: yx&6fYXg2 yj****

Install lapack:
cp  blas_LINUX.a lapack.LINUX.a form yj's homedirectory to /public/software/lapack-gfortran


I got atlas for my machine and through that I also got lapack and blas libraries for my machine

Install mpich2 as root:
------------------------------------------------------------
# tar -xzf mpich2-1.0.6.tar.gz 
# cd mpich2-1.0.6
# ./configure --prefix=/public/software/mpi/mpich2-gfortran/ F90=gfortran
# make
# make install
So system wide  mpich2  installed by me is located at: /public/software/mpi/mpich2-gfortran

The root's mpd configuration file is located in /etc/mpd.conf ( not /root/.mpd.conf )
edit/create this file to include this content: 'MPD_SECRETWORD=mr45-j8z'
And I use  the following command to copy this file from headnode to worker nodes.
# for x in `cat ~/machines`; do scp /etc/mpd.conf root@$x:/etc; done

Then in file '/etc/profile'
I added my mpich2 path to  path for other users to use root's mpich2 
and 'export  MPD_USE_ROOT_MPD=1' for other users to use  the root's mpd.

Then I boot mpd for all user to use:
# mpdboot -n 8 -f ~/machines 

Now the cluster is ready for every to use mpich2 command to run mpich program!
Done!
----------------------end Install mpich2 as root-----------------------

MPICH2 takes on similar characteristics to LAM/MPI, in that it can either run as MPICH1 did, 
or an MPI daemon (called an mpd) can be started on each of the nodes. 
Unlike in LAM/MPI, if this daemon is started by root, 
users' profiles can be configured(configured as obove) to have user programs attach to and run as the root daemon, 
meaning they do not need to start up and shut down an environment before running a parallel program.



Create file: /root/machines
then we can use this file to do a lot of things
For example:
( hitting shift+enter to create new lines )
# for x in `cat ~/machines`
> do
> ssh $x hostname
> done

or all in one line:
# for x in `cat ~/machines`; do ssh $x hostname; done 

Another example: I want to copy file ~/abc in headnode to all worker nodes:
 for x in `cat ~/machines`; do scp ~/abc root@$x:~/; done

Adding a new user to cluster:
First  create the user account on the headnode using `useradd user_name && passwd user_name`
(This just  updates 4 files on headnode:/etc/passwd and /etc/shadow /etc/group /etc/gshadow) 
then, I manulaly update  these 4 files on the worker nodes, that is, copy the above 4 files from the headnode to  workernodes:

 # for x in `cat ~/machines`; do scp /etc/passwd root@$x:/etc; done
 # for x in `cat ~/machines`; do scp /etc/shadow root@$x:/etc; done
 # for x in `cat ~/machines`; do scp /etc/group root@$x:/etc; done
 # for x in `cat ~/machines`; do scp /etc/gshadow root@$x:/etc; done

or:
 # for x in `cat ~/machines`; do scp /etc/passwd /etc/shadow /etc/group  /etc/gshadow root@$x:/etc; done



Here is an example of a /etc/passwd  entry:
root:x:0:0:root:/root:/bin/bash
This line shows that the root user has a shadow password, as well as a UID and GID of 0. The root user has /root/ as a home directory, and uses /bin/bash for a shell.


 /etc/exports  !show which directory will be network  available . 

/etc/hosts

/etc/issue   #本机登录后显示的欢迎信息。
/etc/issue.net   #telnet登录后显示的信息。

/etc/motd  #ssh登录成功后显示的欢迎信息。


/etc/issue and /etc/issue.net appear if you nor your user remote to your server via telnet no ssh. If you want to display your messages after they provide their login but before password prompt (via ssh) then you should put it in your sshd_config located at /etc/ssh/sshd_config with line:

banner /etc/warning

But if you want put your messages after you nor your user successfull login to your server then you have to put it at /etc/motd. 
Unfortunely your users can avoid this if they create an empty .hushlogin in their home 
(and this file will also hide their last login time message).


"stty: standard input: Invalid argument"
That message is coming from an "stty" command in your .bashrc (or whatever) on mybox. 
Change this:
    stty what ever ...
to this:
    if [ -t 0 ]; then   # only run if stdin is a terminal
        stty what ever ...
    fi
And the problem will go away.

运行mpi程序的步骤：
1.create files ~/machines to store the hostname of worker nodes(one hostname in one line)
2. 在所有节点启动进程管理器：mpd  
$ mpdboot -n 8 -f ./machines
Here file "~/machines" 存放所有节点的hostname
3 查看进程管理器是否在各节点都已经启动：
$mpdtrace   !结果应该输出所有运行有mpd的节点的hostname
4.运行一个mpich程序；
$ mpiexec -n 4 ./cpi

5.关闭mpd
$ mpdallexit


At this moment, you can run  your mpich program directly.
Later, We'll use Torque and Maui to manage jobs, then you should use `qsub`  to submit a job.

Torque: resource manager
Maui: scheduler
I'll be using Torque for the resource manager and Maui for the scheduler


启动 pbs_server
# /usr/local/sbin/pbs_server


The scheduler in use  is Moab from Cluster Resources. 
The resources manager is Torque, an open source solution from the same company. 
Torque informs Moab of the available resources in the cluster 
and Moab decides when to run the queued jobs.

pbsnodes # view the state of nodes


Do NOT run resource-consuming programs on this node(blade1).



This note was writen by YouJun Hu during the period from 2008-3-1 to 2010-10-?



----- to Xiehua sheng-- about the steps to run nova and novak---

Assume the six executable files of novak are "goeq_ifort", "gomap_ifort", "gocont_ifort", "goin_ifort", "gost_ifort", "gotae_ifort", and they are located at the "build" directory. Then follow the steps below:
(0) cd work
(1) cp ../src/inequ_yj_good3 inequ
(inequ is a file formatted as a table. The first number in every line is called 'card number',In the following, the number of No. n card and No. m entry will be denoted as "n x m")
(2) modify the inequ to set the the value of entry 08x7 to 0.0 and set the value of 13x4 to 11.00
(3) ../build/goeq_ifort 
(4)  modify the inequ to set the the value of entry 08x7 to 1.0 and set the value of 13x4 to + 2.00
(5) mv eqb1 eqxz 
(6) ../build/goeq_ifort 
(7)   ctrans -d X11 ploteq       
(8) $ ./gomap
  &dfun /
   q
  &wdat /
(9) ctrans -d X11 plotmap    
(10)../build/gocont_ifort
   &inp /
  3
(11) ctrans -d X11 plotmap
(12) cp ~/nova/Equil/modinv .
(13) ../build/goin_ifort 
(14) ctrans -d X11 plotidin
(15) ../build/gost_ifort 
0
zero
0.42,0.1,25,1.e-7,1,1
1,1
finish
end
(16) ctrans -d X11 plotidst 
(17) ln -sf en-01w.4297E+00  eigenf  
(18) $ ./gotae
(19) Then modify the NOVA_param file to set the parameter, such as ntor, rmajor and rminor
(20) $ ./gotae


--------------------------------------------


http://www.forvo.com
user name: asymptotic
passward: The 2nd password used by me



Hello all,

I have a question regarding calling IDL from Linux command line. By
testing this out directly, I know that an IDL code can indeed be called
from the command line, e.g.:

$ idl test.pro

However, my limited experience indicates that this is not entirely
successful if "test" is a procedure, i.e. if it starts with the line:

PRO test, input

In this case I get the following error: "Programs can't be compiled
from a single statement mode". However, it seems not to matter too much
(at least for my purposes), since IDL keeps going onto the next line
anyway. But I don't know how to send the necessary variable "input" in
this case.

So I was wondering: is it possible to pass input variables via a
command line call? Can these be provided directly, or via an input
file? I contacted David Fanning, and he suggested that this group would
be a good source of information on this topic. Any help or information
that you have on this would be greatly appreciated.

Take care,
Sanjay

#ibm:
# hwaddress ether 00:0a:e4:37:ec:ca
# hwaddress of zhao_ai_hui
# hwaddress ether 00:01:6c:4a:75:b3
#hwaddress of printer:
# hwaddress ether 00:14:2A:3E:DB:4A
#hwaddress of xiaotao
#hwaddress ether 00:0c:76:38:6f:3c
#hwaddress of xiaotao's desktop
#hwaddress ether 44:87:fc:cc:99:d7
# hwaddress of chen jia le
#hwaddress ether 00:18:8b:11:2d:11
# QiLong's mac
#hwaddress ether 00:21:86:13:c2:16
# shi xin jian
#00-0b-db-7b-32-29





---mistakes_made_by_me_in_using_MPI:
在传递数组消息时，未能对数组的全部元素赋值。
2007-11-25, 在求一个矩阵与一个向量的乘积时，
在对a(i,j),b(j)赋初值时循环有误，结果未能对b的全部元素赋值，结果出现无穷大
所以出现无穷大问题时可以问这样的问题：所用的量都赋值了吗？
另一种出现无穷大的情况是分母为0。

---lft_commands_frequently_used---

lftp支持多种网络传输协议: ftp, ftps, http, https, hftp, fish.
(其中ftps和https需要在编译的时候包含openssl库).
对于熟悉shell的人，lftp的使用是非常亲切的，因为lftp的命令非常像一个shell: 你可以使用Tab键补全命令；
使用上下箭头快速切换到曾经输入的命令。它还允许多个后台任务执行等功能，
还有书签、排队、镜像、断点续传、多进程下载等功能。

这里我只记录一些lftp常用的命令和参数，如果想获得全部用法，可以在shell中使用

    lftp –help

或者在启动lftp后直接输入

    help [command]

例如

    help mirror

1、匿名登录ftp站点：

    lftp ftp://your-domain/ 

或者

    lftp

然后

    open ftp://your-domain/ 

2、使用用户名(name)和密码(pass)登录ftp站点：

    lftp ftp://your-domain/ -u name,pass

或者

    lftp ftp://your-domain/ -u name

然后输入密码。

3、指定端口号为9000：

    lftp ftp://your-domain/ -p 9000

4、下载单个文件：

    get ReadMe.txt

5、断点续传：

    get -c ReadMe.txt

6、批量下载文件：

    mget *.mp3

7、下载一个目录：

    mirror remote_dir_name [local_dir_name]

或者

    mget -d remote_dir_name/*

-d参数表示在本地新建与远端目录相同名字的目录并把远端目录下所有文件下载到本地新建的目录。

8、上传一个本地目录：

    mirror -R local_dir_name [remote_dir_name]

或者

    mput -d local_dir_name/*

9、10线程镜像一个目录：

    mirror –parallel=10 remote_dir_name [local_dir_name]

10、8线程下载一文件：

    pget -n 8 ReadMe.txt

该命令缺省线程为5。

11、只上传本地目录中比远程目录中新的文件：

    mirror -R -N local_name [remote_name]

12、后台任务管理：
使用CTRL+Z使当前任务转入后台，或者在执行任务命令时加上“&”符号，这些和shell中
一样，使用”jobs”查看后台进程，使用“queue”排队新的任务。
如果lftp在退出时还有任务在进行，则lftp自动进入后台执行。

13、读取站点中所有文件的大小到本地记录文件：

    du remote_dir_name log.txt

14、书签功能：

    bookmark [SUBCMD]

子命令：
add []：把当前位置或特定位置加入以“name”命名的书签。
del ：删除指定书签。
edit：编辑书签。
list：列出书签。

15、删除目录：

    rm -r dir_name

建立目录：

    mkdir dir_name

16、搜索文件：

    ls -R | grep ReadMe.txt

或者

    find -d 3 | grep ReadMe.txt

此处搜索深度为3


---configure files modified by me---
1.启动管理文件/etc/inittab
ID为3开机进入text模式
ID为5开机进入X11

2.屏幕分辨率
配置文件为： /etc/X11/xorg.conf
有两处屏幕分辨率的地方可以修改，例如加上：“1024x768".



4.~/.bashrc   这个文件中的命令将在启动终端时被加载。
例如我 加了语句：LANGUAGE="en_US:en",这样系统就会使用英文与用户交流。

5 定制shell提示符：
在bash中提示符是通过一个环境变量$PS1指定的。
可把以下语句加到~/.bash_profile中定制提示符：
export PS1=“[\u@\h \W]\$”。
其中\u代表用户名，
\h代表主机名，
\W代表当前目录的最后一层，
\w代表完整的当前目录.
\$ 普通用户则显示$，root用户显示#。


--emacs commands and configuration file---
C-s // search
C-M-s // regular search
C-c ;  /// comment the selected region or vice via
M-% // enter the query and replace mode: 'y' for replace 'n' for ignore this occurence and continue '!' for replacs all accurence
M-x shell 回车， 启动shell模式，此时仍然可以用C-x b切换到其他buffer.
M-C-q  // indent the current subprogram.
C-x k   /// kill a buffer
C-x C-c //exit emacs
C-x C-f //open file
C-x C-s //save
C-x C-w //save as

C-x b //(switch-to-buffer). 
C-x C-b // show the lists of existing buffer.
emacs -nw filename   run the no window version emacs 
C-z //suspend the emacs and return to shell, then you can use "fg" to restore emacs session

Here are some commands dealing with buffers: 

C-x o    if two buffers appear together on the screen, move the cursor
         to the other buffer
C-x 1    if two buffers appear together on the screen, expand the one
         current containing the cursor to make that buffer fill the screen

C-x C-b  list all buffers (note: this list itself will be a new buffer!)
C-x C-f  read in a file and create a new buffer for it
C-x C-r  read in a file and create a new buffer for it, but make the
         buffer read-only (so that the file will not accidentally get
         changed)
C-x k    kill buffer; emacs will ask you to confirm that you mean
         the one currently containing the cursor; otherwise, specify 
         which one

A nice feature of emacs is the ability to split a given buffer into two or more windows, enabling one to view more than one piece of a file at a time. Here are the main commands: 

C-x 2    split current window into two windows
C-x o    move cursor to the other window
C-x 1    unsplit, i.e. change back to having just one window on this buffer
C-x 0    move cursor to the other window and make that one fill the screen (same as C-x o followed by C-x 1)
C-x ^    make current window larger (and other window smaller)

配置文件：~/.emacs
;;语法高亮
(global-font-lock-mode t) 
;; remove the menu bar
 (menu-bar-mode nil)  
;;to set background color to black
(set-background-color "black")
;;disable backup
(setq make-backup-files nil)

emacs 中的颜色: red green blue, darkblue,DarkSlateGray

察看颜色名字列表:
M-x list-colors-display


--vnc_connection_issue--

若无法连接到主机上，请尝试以下操作：尤其是最后一项

1. 先用检查Vnc服务是否启动
service vncserver status
2. 如果没有启动就启动它
service vncserver start
3. 如果还不能连接你可以关掉iptables 再试
service iptables stop

注：iptables 是静态防火墙

---installing_freeNx_server--
Note: Installation of NX Server for Linux requires the download and installation of three packages: client, node and server. The client is needed because it ships libraries used by the node. The node is needed because it ships tools needed by the server. Furthermore, the SSH server daemon (SSHD) needs to be up and running on each of the NX Node machines since NX relies on the mechanism provided by the SSH subsystem for handling user authentication. 


Download the TAR.GZs in the /usr directory 
Change your working directory to the location where you saved the package 
and install it by running from a console:

  # cd /usr
  # sudo tar zxvf nxclient-3.0.0-84.i386.tar.gz 
  # sudo tar zxvf nxnode-3.0.0-93.i386.tar.gz 
  # sudo tar zxvf nxserver-3.0.0-79.i386.tar.gz

Run the setup script for installing the NX Node and NX Server software:

  # sudo /usr/NX/scripts/setup/nxnode 每-install 
  # sudo /usr/NX/scripts/setup/nxserver 每-install 
 
If you don't have the sudo utility installed, log on as superuser ("root") and run the commands without sudo. 
Note: 
 The NX service can be controlled by the command :
# /usr/NX/bin/nxserver --status|--start|--stop|--restart. 
Additional commands are available to configure the server. 
Try /usr/NX/bin/nxserver --help for more information.


代表性论文、论著：

[1] <strong>Y.J. Hu</strong>, Y.M. Hu, and Y.R. Lin-Liu, <a href="http://link.aip.org/link/doi/10.1063/1.3693201">Phys. Plasmas 19, 034505 (2012)</a>.
[2] <strong>Y.J. Hu</strong>, Y.M. Hu, and Y.R. Lin-Liu, <a href="http://link.aip.org/link/?php/18/022504">Phys. Plasmas 18, 022504 (2011)</a>.
[3] <strong>Y.J. Hu</strong>, Weihong Yang, Yinhua Chen, et al. <a href="http://link.aip.org/link/doi/10.1063/1.2970099">Phys. Plasmas 15, 082114 (2008)</a>.


